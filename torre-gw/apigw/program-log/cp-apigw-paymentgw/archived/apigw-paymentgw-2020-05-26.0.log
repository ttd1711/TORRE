2020-05-26 16:19:47,219 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-05-26 16:19:47,283 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-05-26 16:33:39,588 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:33:39,590 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-26 16:33:39,590 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-26 16:33:39,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:33:39,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-26 16:33:39,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:33:39,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 66101e82-0da7-4bd2-8a2f-c4dda439785d
2020-05-26 16:33:39,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:33:39,592 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:33:39,592 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-26 16:33:39,592 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 327
2020-05-26 16:33:39,593 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-26 16:33:39,593 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:33:39,593 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-26 16:33:39,593 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:33:39,594 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-26 16:33:39,594 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-26 16:33:39,722 WARN com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] the token is expired and not valid anymore
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2020-05-25T16:48:58Z. Current time: 2020-05-26T16:33:39Z, a difference of 85481717 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:385)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:481)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:541)
	at com.dz.apigw.security.JwtTokenUtil.getAllClaimsFromToken(JwtTokenUtil.java:58)
	at com.dz.apigw.security.JwtTokenUtil.getClaimFromToken(JwtTokenUtil.java:51)
	at com.dz.apigw.security.JwtTokenUtil.getUsernameFromToken(JwtTokenUtil.java:39)
	at com.dz.apigw.security.JwtAuthorizationTokenFilter.doFilterInternal(JwtAuthorizationTokenFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at com.dz.apigw.security.AuthorizationIPAddressFilter.doFilterWrapped(AuthorizationIPAddressFilter.java:84)
	at com.dz.apigw.security.AuthorizationIPAddressFilter.doFilterInternal(AuthorizationIPAddressFilter.java:68)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:806)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
2020-05-26 16:33:39,745 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 401 Unauthorized
2020-05-26 16:33:39,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< X-Content-Type-Options: nosniff
2020-05-26 16:33:39,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< X-XSS-Protection: 1; mode=block
2020-05-26 16:33:39,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2020-05-26 16:33:39,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< Pragma: no-cache
2020-05-26 16:33:39,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< Expires: 0
2020-05-26 16:33:39,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< X-Frame-Options: SAMEORIGIN
2020-05-26 16:33:39,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-26 16:33:57,612 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /login
2020-05-26 16:33:57,613 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-26 16:33:57,613 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:33:57,614 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-26 16:33:57,614 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:33:57,614 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: 3ed4775c-ff45-4940-b46e-ecfd116ab2bd
2020-05-26 16:33:57,614 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:33:57,614 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:33:57,615 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-26 16:33:57,615 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 87
2020-05-26 16:33:57,615 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-26 16:33:57,615 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:33:57,615 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-26 16:33:57,615 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/login' ...
2020-05-26 16:33:57,616 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'null'
2020-05-26 16:33:57,616 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-26 16:33:57,616 WARN com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] couldn't find PGW string, will ignore the header
2020-05-26 16:33:57,708 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:33:57,709 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:33:57,819 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:33:57,820 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:33:57,878 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-26 16:33:57,879 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"username": "pgw_fptplay",
2020-05-26 16:33:57,879 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"password": "F311P@ay2o201446!@#",
2020-05-26 16:33:57,880 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "login"
2020-05-26 16:33:57,880 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-26 16:33:57,880 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-26 16:33:57,881 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-26 16:33:57,881 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":0,"session":"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA","message":"Login successfully , username=pgw_fptplay"}
2020-05-26 16:34:21,033 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:34:21,034 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:34:21,035 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-26 16:34:21,035 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:34:21,035 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-26 16:34:21,035 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:34:21,035 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: a96fbf92-56ff-4dc6-8195-620108d3cf9b
2020-05-26 16:34:21,038 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:34:21,038 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:34:21,038 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-26 16:34:21,038 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 327
2020-05-26 16:34:21,039 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-26 16:34:21,039 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:34:21,040 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-26 16:34:21,040 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:34:21,040 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:34:21,040 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-26 16:34:21,084 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-05-26 16:34:21,091 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-05-26 16:34:21,091 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:34:21,091 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:34:21,098 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:34:21,101 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-1172085012",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:34:21,107 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'mt'
2020-05-26 16:34:21,119 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doMT] doing otp confirm...
2020-05-26 16:34:21,127 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 1590137531-1172085012
2020-05-26 16:34:21,127 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-05-26 16:34:21,128 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 1590137531-1172085012
2020-05-26 16:34:21,128 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-05-26 16:34:21,389 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5ecce29d226bfbd08886411a
2020-05-26 16:34:21,390 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce29d226bfbd08886411a'}'}
2020-05-26 16:34:21,391 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = null
2020-05-26 16:34:21,392 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 16:34:21,414 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce29d226bfbd08886411a'}'}
2020-05-26 16:34:21,415 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:34:21,667 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 16:34:21,670 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce29d226bfbd08886411a'}'}
2020-05-26 16:34:22,434 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:34:23,439 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:34:24,451 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:34:24,458 WARN com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-26 16:34:24,461 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:34:24,461 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "transactionId":"1590137531-1172085012",
2020-05-26 16:34:24,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "moId":"0",
2020-05-26 16:34:24,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:34:24,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:34:24,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "brandName":"",
2020-05-26 16:34:24,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:34:24,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:34:24,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:34:24,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:34:24,464 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:34:24,464 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  }
2020-05-26 16:34:24,464 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-05-26 16:34:24,464 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-26 16:34:24,464 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-1172085012","reason":null}
2020-05-26 16:34:50,990 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:34:50,991 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:34:50,993 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-type: application/json
2020-05-26 16:34:50,993 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:34:50,993 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept: */*
2020-05-26 16:34:50,994 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:34:50,995 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> postman-token: ccf59420-30d6-4cd7-82a1-afbdccbf37d9
2020-05-26 16:34:50,996 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:34:50,997 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:34:50,997 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> connection: keep-alive
2020-05-26 16:34:50,998 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-length: 327
2020-05-26 16:34:50,998 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>
2020-05-26 16:34:50,998 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:34:50,999 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Ip Adress '127.0.0.1' is valid
2020-05-26 16:34:50,999 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:34:50,999 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:34:50,999 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Looking for the header start with 'PGW'
2020-05-26 16:34:51,002 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] checking authentication for user 'pgw_fptplay'
2020-05-26 16:34:51,002 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] security context was null, so authorizating user
2020-05-26 16:34:51,003 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:34:51,003 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:34:51,008 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:34:51,015 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-4] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-1172085012",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:34:51,020 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] Service from the request is 'mt'
2020-05-26 16:34:51,021 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] [doMT] doing otp confirm...
2020-05-26 16:34:51,022 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyParameter] Starting to check request: 1590137531-1172085012
2020-05-26 16:34:51,023 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyParameter] Result: true
2020-05-26 16:34:51,023 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Starting to check request: 1590137531-1172085012
2020-05-26 16:34:51,024 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Result: true
2020-05-26 16:34:51,108 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [findRecord] Found record: Id=5ecce29d226bfbd08886411a
2020-05-26 16:34:51,109 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:34:52,120 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:34:53,125 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:34:54,131 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:34:54,134 WARN com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-26 16:34:54,136 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:34:54,137 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "transactionId":"1590137531-1172085012",
2020-05-26 16:34:54,137 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "moId":"0",
2020-05-26 16:34:54,137 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:34:54,137 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:34:54,137 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "brandName":"",
2020-05-26 16:34:54,138 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:34:54,138 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:34:54,138 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:34:54,138 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:34:54,138 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:34:54,138 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  }
2020-05-26 16:34:54,138 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< 200 OK
2020-05-26 16:34:54,138 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|<
2020-05-26 16:34:54,139 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-1172085012","reason":null}
2020-05-26 16:38:51,701 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-05-26 16:38:51,723 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-05-26 16:40:30,053 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] Routing file updated
2020-05-26 16:40:30,066 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] New routes created.
2020-05-26 16:44:30,337 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:44:30,347 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:44:30,347 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-26 16:44:30,348 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:44:30,348 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-26 16:44:30,348 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:44:30,348 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 60fe8232-b798-474d-81a5-e88b0aedee93
2020-05-26 16:44:30,349 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:44:30,350 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:44:30,357 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-26 16:44:30,358 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 327
2020-05-26 16:44:30,360 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-26 16:44:30,360 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:44:30,360 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-26 16:44:30,364 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:44:30,365 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:44:30,370 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-26 16:44:30,517 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-26 16:44:30,518 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-26 16:44:30,519 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:44:30,519 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:44:30,529 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:44:30,596 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-1172085012",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:44:30,624 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'mt'
2020-05-26 16:44:30,663 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doMT] doing otp confirm...
2020-05-26 16:44:30,669 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1590137531-1172085012
2020-05-26 16:44:30,669 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-26 16:44:30,670 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1590137531-1172085012
2020-05-26 16:44:30,670 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-26 16:44:30,937 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [findRecord] Found record: Id=5ecce29d226bfbd08886411a
2020-05-26 16:44:30,938 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:44:31,943 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:44:32,951 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:44:33,958 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ecce29d226bfbd08886411a] from db
2020-05-26 16:44:33,964 WARN com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-26 16:44:33,999 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:44:33,999 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "transactionId":"1590137531-1172085012",
2020-05-26 16:44:33,999 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "moId":"0",
2020-05-26 16:44:34,000 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:44:34,000 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:44:34,000 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "brandName":"",
2020-05-26 16:44:34,000 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:44:34,000 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:44:34,000 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:44:34,001 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:44:34,001 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:44:34,001 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  }
2020-05-26 16:44:34,001 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-26 16:44:34,002 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-26 16:44:34,002 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-1172085012","reason":null}
2020-05-26 16:45:07,064 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:45:07,064 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:45:07,064 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-26 16:45:07,065 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:45:07,065 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-26 16:45:07,065 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:45:07,065 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: bf90651a-f9c4-48f8-a33a-91ef691b477e
2020-05-26 16:45:07,066 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:45:07,066 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:45:07,066 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-26 16:45:07,066 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 328
2020-05-26 16:45:07,067 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-26 16:45:07,067 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:45:07,067 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-26 16:45:07,068 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:45:07,068 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:45:07,068 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-26 16:45:07,072 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-05-26 16:45:07,072 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-05-26 16:45:07,072 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:45:07,072 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:45:07,077 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:45:07,079 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:45:07,081 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'mt'
2020-05-26 16:45:07,082 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doMT] doing otp confirm...
2020-05-26 16:45:07,082 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 16:45:07,082 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-05-26 16:45:07,083 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 16:45:07,083 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-05-26 16:45:07,110 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5ecce523226bfbe3de3448a0
2020-05-26 16:45:07,113 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce523226bfbe3de3448a0'}'}
2020-05-26 16:45:07,114 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = null
2020-05-26 16:45:07,115 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 16:45:07,144 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce523226bfbe3de3448a0'}'}
2020-05-26 16:45:07,144 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ecce523226bfbe3de3448a0] from db
2020-05-26 16:45:07,216 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 16:45:07,217 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce523226bfbe3de3448a0'}'}
2020-05-26 16:45:07,231 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce523226bfbe3de3448a0]
2020-05-26 16:45:07,269 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce523226bfbe3de3448a0] Result: true
2020-05-26 16:45:08,151 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ecce523226bfbe3de3448a0] from db
2020-05-26 16:45:08,154 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] Found result of the request [5ecce523226bfbe3de3448a0]
2020-05-26 16:45:08,179 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-3] [deleteRecord] The request 5ecce523226bfbe3de3448a0 is deleted completely!
2020-05-26 16:45:08,181 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:45:08,182 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 16:45:08,182 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "moId":"0",
2020-05-26 16:45:08,182 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:45:08,182 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:45:08,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "brandName":"",
2020-05-26 16:45:08,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:45:08,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:45:08,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:45:08,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:45:08,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:45:08,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  }
2020-05-26 16:45:08,184 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-05-26 16:45:08,184 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-26 16:45:08,184 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
2020-05-26 16:47:42,027 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:47:42,031 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:47:42,032 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-05-26 16:47:42,032 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:47:42,032 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-05-26 16:47:42,033 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:47:42,033 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: c1abba7e-bccf-4a67-9b99-a1bb5d6eb0e8
2020-05-26 16:47:42,033 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:47:42,033 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:47:42,034 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-05-26 16:47:42,034 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 328
2020-05-26 16:47:42,034 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-05-26 16:47:42,034 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:47:42,035 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-05-26 16:47:42,035 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:47:42,035 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:47:42,036 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-05-26 16:47:42,050 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-05-26 16:47:42,050 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-05-26 16:47:42,051 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:47:42,052 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:47:42,060 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:47:42,248 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:47:42,258 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'mt'
2020-05-26 16:47:42,260 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doMT] doing otp confirm...
2020-05-26 16:47:42,262 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 16:47:42,266 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-05-26 16:47:42,268 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 16:47:42,269 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-05-26 16:47:42,440 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-5] [insertRequest][to DB] Result ID: 5ecce5be226bfbe3de3448a2
2020-05-26 16:47:42,441 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce5be226bfbe3de3448a2'}'}
2020-05-26 16:47:42,441 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = null
2020-05-26 16:47:42,442 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 16:47:42,446 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce5be226bfbe3de3448a2'}'}
2020-05-26 16:47:42,459 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ecce5be226bfbe3de3448a2] from db
2020-05-26 16:47:42,555 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 16:47:42,556 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce5be226bfbe3de3448a2'}'}
2020-05-26 16:47:42,569 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce5be226bfbe3de3448a2]
2020-05-26 16:47:42,573 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce5be226bfbe3de3448a2] Result: true
2020-05-26 16:47:43,474 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ecce5be226bfbe3de3448a2] from db
2020-05-26 16:47:43,477 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] Found result of the request [5ecce5be226bfbe3de3448a2]
2020-05-26 16:47:43,483 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-5] [deleteRecord] The request 5ecce5be226bfbe3de3448a2 is deleted completely!
2020-05-26 16:47:43,487 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:47:43,488 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 16:47:43,488 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  "moId":"0",
2020-05-26 16:47:43,488 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:47:43,488 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:47:43,488 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  "brandName":"",
2020-05-26 16:47:43,488 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:47:43,489 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:47:43,489 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:47:43,489 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:47:43,489 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:47:43,489 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  }
2020-05-26 16:47:43,489 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-05-26 16:47:43,490 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-05-26 16:47:43,490 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
2020-05-26 16:48:57,149 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:48:57,150 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:48:57,151 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-type: application/json
2020-05-26 16:48:57,151 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:48:57,151 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept: */*
2020-05-26 16:48:57,152 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:48:57,152 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> postman-token: 50455108-8781-41e0-8417-bef1b9fec23d
2020-05-26 16:48:57,152 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:48:57,152 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:48:57,152 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> connection: keep-alive
2020-05-26 16:48:57,152 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-length: 328
2020-05-26 16:48:57,153 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>
2020-05-26 16:48:57,153 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:48:57,153 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Ip Adress '127.0.0.1' is valid
2020-05-26 16:48:57,153 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:48:57,153 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:48:57,154 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Looking for the header start with 'PGW'
2020-05-26 16:48:57,156 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] checking authentication for user 'pgw_fptplay'
2020-05-26 16:48:57,157 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] security context was null, so authorizating user
2020-05-26 16:48:57,157 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:48:57,157 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:48:57,162 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:48:57,164 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-7] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:48:57,165 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] Service from the request is 'mt'
2020-05-26 16:48:57,166 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] [doMT] doing otp confirm...
2020-05-26 16:48:57,167 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-7] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 16:48:57,167 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-7] [verifyParameter] Result: true
2020-05-26 16:48:57,168 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 16:48:57,168 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Result: true
2020-05-26 16:48:57,173 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-7] [insertRequest][to DB] Result ID: 5ecce609226bfbe3de3448a4
2020-05-26 16:48:57,174 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce609226bfbe3de3448a4'}'}
2020-05-26 16:48:57,174 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = null
2020-05-26 16:48:57,174 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 16:48:57,175 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce609226bfbe3de3448a4'}'}
2020-05-26 16:48:57,176 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5ecce609226bfbe3de3448a4] from db
2020-05-26 16:48:57,218 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 16:48:57,218 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce609226bfbe3de3448a4'}'}
2020-05-26 16:48:57,223 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce609226bfbe3de3448a4]
2020-05-26 16:48:57,231 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce609226bfbe3de3448a4] Result: true
2020-05-26 16:48:58,191 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5ecce609226bfbe3de3448a4] from db
2020-05-26 16:48:58,193 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] Found result of the request [5ecce609226bfbe3de3448a4]
2020-05-26 16:48:58,198 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-7] [deleteRecord] The request 5ecce609226bfbe3de3448a4 is deleted completely!
2020-05-26 16:48:58,199 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:48:58,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 16:48:58,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  "moId":"0",
2020-05-26 16:48:58,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:48:58,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:48:58,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  "brandName":"",
2020-05-26 16:48:58,201 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:48:58,201 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:48:58,201 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:48:58,201 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:48:58,202 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:48:58,202 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  }
2020-05-26 16:48:58,202 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< 200 OK
2020-05-26 16:48:58,202 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|<
2020-05-26 16:48:58,203 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
2020-05-26 16:50:41,790 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:50:41,794 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:50:41,795 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-type: application/json
2020-05-26 16:50:41,795 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:50:41,795 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept: */*
2020-05-26 16:50:41,795 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:50:41,796 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> postman-token: 6e5f4045-d1e7-44cd-b03e-12cfafc9e1d4
2020-05-26 16:50:41,796 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:50:41,796 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:50:41,796 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> connection: keep-alive
2020-05-26 16:50:41,796 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-length: 328
2020-05-26 16:50:41,796 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>
2020-05-26 16:50:41,796 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:50:41,797 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Ip Adress '127.0.0.1' is valid
2020-05-26 16:50:41,797 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:50:41,797 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:50:41,798 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Looking for the header start with 'PGW'
2020-05-26 16:50:41,809 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] checking authentication for user 'pgw_fptplay'
2020-05-26 16:50:41,810 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] security context was null, so authorizating user
2020-05-26 16:50:41,810 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:50:41,810 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:50:41,816 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:50:41,828 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-9] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:50:41,833 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] Service from the request is 'mt'
2020-05-26 16:50:41,834 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] [doMT] doing otp confirm...
2020-05-26 16:50:41,835 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-9] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 16:50:41,836 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-9] [verifyParameter] Result: true
2020-05-26 16:50:41,836 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 16:50:41,837 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Result: true
2020-05-26 16:50:41,852 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-9] [insertRequest][to DB] Result ID: 5ecce671226bfbe3de3448a6
2020-05-26 16:50:41,853 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce671226bfbe3de3448a6'}'}
2020-05-26 16:50:41,854 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = null
2020-05-26 16:50:41,855 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 16:50:41,859 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce671226bfbe3de3448a6'}'}
2020-05-26 16:50:41,861 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5ecce671226bfbe3de3448a6] from db
2020-05-26 16:50:41,897 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 16:50:41,898 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce671226bfbe3de3448a6'}'}
2020-05-26 16:50:41,909 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce671226bfbe3de3448a6]
2020-05-26 16:50:41,931 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce671226bfbe3de3448a6] Result: true
2020-05-26 16:50:42,869 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5ecce671226bfbe3de3448a6] from db
2020-05-26 16:50:42,874 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] Found result of the request [5ecce671226bfbe3de3448a6]
2020-05-26 16:50:42,881 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-9] [deleteRecord] The request 5ecce671226bfbe3de3448a6 is deleted completely!
2020-05-26 16:50:42,884 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:50:42,885 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 16:50:42,885 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  "moId":"0",
2020-05-26 16:50:42,885 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:50:42,885 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:50:42,885 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  "brandName":"",
2020-05-26 16:50:42,885 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:50:42,886 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:50:42,886 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:50:42,886 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:50:42,886 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:50:42,886 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  }
2020-05-26 16:50:42,887 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< 200 OK
2020-05-26 16:50:42,887 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|<
2020-05-26 16:50:42,887 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
2020-05-26 16:51:32,068 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:51:32,069 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:51:32,069 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-26 16:51:32,069 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:51:32,070 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-26 16:51:32,070 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:51:32,070 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 5d83ca8d-e9d5-4212-b670-13dc508558ae
2020-05-26 16:51:32,070 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:51:32,070 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:51:32,071 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-26 16:51:32,071 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 328
2020-05-26 16:51:32,071 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-26 16:51:32,071 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:51:32,072 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-26 16:51:32,072 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:51:32,073 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:51:32,073 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-26 16:51:32,075 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-26 16:51:32,076 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-26 16:51:32,077 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:51:32,077 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:51:32,083 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:51:32,086 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:51:32,092 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'mt'
2020-05-26 16:51:32,092 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doMT] doing otp confirm...
2020-05-26 16:51:32,093 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 16:51:32,094 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-26 16:51:32,094 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 16:51:32,095 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-26 16:51:32,107 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ecce6a4226bfbe3de3448a8
2020-05-26 16:51:32,109 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce6a4226bfbe3de3448a8'}'}
2020-05-26 16:51:32,110 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-26 16:51:32,112 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 16:51:32,113 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce6a4226bfbe3de3448a8'}'}
2020-05-26 16:51:32,113 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ecce6a4226bfbe3de3448a8] from db
2020-05-26 16:51:32,163 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 16:51:32,163 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce6a4226bfbe3de3448a8'}'}
2020-05-26 16:51:32,172 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce6a4226bfbe3de3448a8]
2020-05-26 16:51:32,183 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce6a4226bfbe3de3448a8] Result: true
2020-05-26 16:51:33,120 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ecce6a4226bfbe3de3448a8] from db
2020-05-26 16:51:33,123 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] Found result of the request [5ecce6a4226bfbe3de3448a8]
2020-05-26 16:51:33,126 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5ecce6a4226bfbe3de3448a8 is deleted completely!
2020-05-26 16:51:33,128 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:51:33,128 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 16:51:33,128 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "moId":"0",
2020-05-26 16:51:33,128 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:51:33,128 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:51:33,129 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "brandName":"",
2020-05-26 16:51:33,129 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:51:33,129 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:51:33,129 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:51:33,129 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:51:33,129 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:51:33,129 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  }
2020-05-26 16:51:33,130 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-26 16:51:33,130 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-26 16:51:33,130 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
2020-05-26 16:51:54,544 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:51:54,544 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:51:54,550 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-26 16:51:54,550 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:51:54,550 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-26 16:51:54,550 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:51:54,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: 14649352-4985-47e8-88cb-37bcb7929b94
2020-05-26 16:51:54,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:51:54,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:51:54,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-26 16:51:54,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 328
2020-05-26 16:51:54,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-26 16:51:54,552 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:51:54,552 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-26 16:51:54,553 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:51:54,553 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:51:54,553 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-26 16:51:54,555 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-26 16:51:54,555 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-26 16:51:54,555 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:51:54,555 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:51:54,560 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:51:54,562 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:51:54,563 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'mt'
2020-05-26 16:51:54,563 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doMT] doing otp confirm...
2020-05-26 16:51:54,564 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 16:51:54,564 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-26 16:51:54,564 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 16:51:54,564 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-26 16:51:54,577 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [insertRequest][to DB] Result ID: 5ecce6ba226bfbe3de3448aa
2020-05-26 16:51:54,577 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce6ba226bfbe3de3448aa'}'}
2020-05-26 16:51:54,578 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-05-26 16:51:54,578 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 16:51:54,579 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce6ba226bfbe3de3448aa'}'}
2020-05-26 16:51:54,579 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ecce6ba226bfbe3de3448aa] from db
2020-05-26 16:51:54,766 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 16:51:54,766 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce6ba226bfbe3de3448aa'}'}
2020-05-26 16:51:54,774 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce6ba226bfbe3de3448aa]
2020-05-26 16:51:54,784 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce6ba226bfbe3de3448aa] Result: true
2020-05-26 16:51:55,586 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ecce6ba226bfbe3de3448aa] from db
2020-05-26 16:51:55,588 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] Found result of the request [5ecce6ba226bfbe3de3448aa]
2020-05-26 16:51:55,591 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [deleteRecord] The request 5ecce6ba226bfbe3de3448aa is deleted completely!
2020-05-26 16:51:55,593 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:51:55,593 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 16:51:55,593 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "moId":"0",
2020-05-26 16:51:55,593 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:51:55,593 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:51:55,594 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "brandName":"",
2020-05-26 16:51:55,594 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:51:55,594 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:51:55,594 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:51:55,594 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:51:55,594 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:51:55,595 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  }
2020-05-26 16:51:55,595 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-26 16:51:55,595 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-26 16:51:55,595 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
2020-05-26 16:53:05,467 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:53:05,468 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:53:05,468 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-type: application/json
2020-05-26 16:53:05,468 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:53:05,469 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept: */*
2020-05-26 16:53:05,469 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:53:05,469 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> postman-token: e842c56b-037f-4f8a-8ef8-8f2ae8e07cd1
2020-05-26 16:53:05,470 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:53:05,470 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:53:05,470 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> connection: keep-alive
2020-05-26 16:53:05,471 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-length: 328
2020-05-26 16:53:05,471 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>
2020-05-26 16:53:05,472 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:53:05,472 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Ip Adress '127.0.0.1' is valid
2020-05-26 16:53:05,472 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:53:05,472 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:53:05,473 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Looking for the header start with 'PGW'
2020-05-26 16:53:05,474 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] checking authentication for user 'pgw_fptplay'
2020-05-26 16:53:05,475 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] security context was null, so authorizating user
2020-05-26 16:53:05,475 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:53:05,475 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:53:05,479 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:53:05,480 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-4] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:53:05,483 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] Service from the request is 'mt'
2020-05-26 16:53:05,483 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] [doMT] doing otp confirm...
2020-05-26 16:53:05,484 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 16:53:05,484 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyParameter] Result: true
2020-05-26 16:53:05,484 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 16:53:05,484 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Result: true
2020-05-26 16:53:05,487 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [insertRequest][to DB] Result ID: 5ecce701226bfbe3de3448ac
2020-05-26 16:53:05,487 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-4] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce701226bfbe3de3448ac'}'}
2020-05-26 16:53:05,488 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-4] msgKeyword = null
2020-05-26 16:53:05,489 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-4] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 16:53:05,490 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-4] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce701226bfbe3de3448ac'}'}
2020-05-26 16:53:05,490 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ecce701226bfbe3de3448ac] from db
2020-05-26 16:53:05,520 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 16:53:05,520 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce701226bfbe3de3448ac'}'}
2020-05-26 16:53:05,526 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce701226bfbe3de3448ac]
2020-05-26 16:53:05,532 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce701226bfbe3de3448ac] Result: true
2020-05-26 16:53:06,496 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ecce701226bfbe3de3448ac] from db
2020-05-26 16:53:06,499 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] Found result of the request [5ecce701226bfbe3de3448ac]
2020-05-26 16:53:06,503 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [deleteRecord] The request 5ecce701226bfbe3de3448ac is deleted completely!
2020-05-26 16:53:06,505 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:53:06,506 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 16:53:06,506 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "moId":"0",
2020-05-26 16:53:06,506 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:53:06,506 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:53:06,506 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "brandName":"",
2020-05-26 16:53:06,506 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:53:06,507 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:53:06,507 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:53:06,507 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:53:06,507 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:53:06,507 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  }
2020-05-26 16:53:06,508 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< 200 OK
2020-05-26 16:53:06,508 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|<
2020-05-26 16:53:06,508 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
2020-05-26 16:53:40,194 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:53:40,195 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:53:40,196 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-type: application/json
2020-05-26 16:53:40,196 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:53:40,196 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept: */*
2020-05-26 16:53:40,196 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:53:40,196 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> postman-token: 4f5a33ef-0bf6-4968-b73f-7662d41c0e04
2020-05-26 16:53:40,197 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:53:40,197 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:53:40,197 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> connection: keep-alive
2020-05-26 16:53:40,197 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-length: 328
2020-05-26 16:53:40,197 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>
2020-05-26 16:53:40,197 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:53:40,198 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Ip Adress '127.0.0.1' is valid
2020-05-26 16:53:40,198 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:53:40,198 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:53:40,198 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Looking for the header start with 'PGW'
2020-05-26 16:53:40,199 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] checking authentication for user 'pgw_fptplay'
2020-05-26 16:53:40,199 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] security context was null, so authorizating user
2020-05-26 16:53:40,199 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:53:40,200 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:53:40,204 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:53:40,206 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-6] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:53:40,207 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] Service from the request is 'mt'
2020-05-26 16:53:40,264 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] [doMT] doing otp confirm...
2020-05-26 16:53:40,266 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-6] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 16:53:40,266 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-6] [verifyParameter] Result: true
2020-05-26 16:53:40,267 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 16:53:40,267 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Result: true
2020-05-26 16:53:40,276 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-6] [insertRequest][to DB] Result ID: 5ecce724226bfbe3de3448ae
2020-05-26 16:53:40,276 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-6] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce724226bfbe3de3448ae'}'}
2020-05-26 16:53:40,277 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] msgKeyword = null
2020-05-26 16:53:40,277 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 16:53:40,278 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-6] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce724226bfbe3de3448ae'}'}
2020-05-26 16:53:40,278 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5ecce724226bfbe3de3448ae] from db
2020-05-26 16:53:40,733 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 16:53:40,734 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce724226bfbe3de3448ae'}'}
2020-05-26 16:53:40,738 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce724226bfbe3de3448ae]
2020-05-26 16:53:40,743 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce724226bfbe3de3448ae] Result: true
2020-05-26 16:53:41,284 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5ecce724226bfbe3de3448ae] from db
2020-05-26 16:53:41,286 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] Found result of the request [5ecce724226bfbe3de3448ae]
2020-05-26 16:53:41,290 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-6] [deleteRecord] The request 5ecce724226bfbe3de3448ae is deleted completely!
2020-05-26 16:53:41,291 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:53:41,292 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 16:53:41,292 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  "moId":"0",
2020-05-26 16:53:41,292 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:53:41,292 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:53:41,292 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  "brandName":"",
2020-05-26 16:53:41,292 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:53:41,292 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:53:41,293 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:53:41,293 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:53:41,293 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:53:41,293 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  }
2020-05-26 16:53:41,293 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< 200 OK
2020-05-26 16:53:41,293 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|<
2020-05-26 16:53:41,293 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
2020-05-26 16:56:32,573 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:56:32,579 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:56:32,579 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> content-type: application/json
2020-05-26 16:56:32,580 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:56:32,580 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> accept: */*
2020-05-26 16:56:32,580 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:56:32,580 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> postman-token: da5d68af-18e4-4251-8bd6-ea3a1561da66
2020-05-26 16:56:32,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:56:32,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:56:32,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> connection: keep-alive
2020-05-26 16:56:32,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> content-length: 328
2020-05-26 16:56:32,582 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>
2020-05-26 16:56:32,582 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:56:32,582 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] Ip Adress '127.0.0.1' is valid
2020-05-26 16:56:32,582 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:56:32,582 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:56:32,582 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] Looking for the header start with 'PGW'
2020-05-26 16:56:32,593 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] checking authentication for user 'pgw_fptplay'
2020-05-26 16:56:32,594 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] security context was null, so authorizating user
2020-05-26 16:56:32,594 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-8] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:56:32,594 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-8] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:56:32,598 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:56:32,611 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-8] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:56:32,619 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-8] Service from the request is 'mt'
2020-05-26 16:56:32,619 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-8] [doMT] doing otp confirm...
2020-05-26 16:56:32,620 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-8] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 16:56:32,620 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-8] [verifyParameter] Result: true
2020-05-26 16:56:32,621 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-8] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 16:56:32,621 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-8] [verifyRequestCredentials] Result: true
2020-05-26 16:56:32,630 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-8] [insertRequest][to DB] Result ID: 5ecce7d0226bfbe3de3448b0
2020-05-26 16:56:32,630 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-8] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce7d0226bfbe3de3448b0'}'}
2020-05-26 16:56:32,631 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-8] msgKeyword = null
2020-05-26 16:56:32,631 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-8] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 16:56:32,633 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-8] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce7d0226bfbe3de3448b0'}'}
2020-05-26 16:56:32,634 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-8] [getResultOfProcess] starting to select result of the request [5ecce7d0226bfbe3de3448b0] from db
2020-05-26 16:56:32,696 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 16:56:32,697 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce7d0226bfbe3de3448b0'}'}
2020-05-26 16:56:32,701 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce7d0226bfbe3de3448b0]
2020-05-26 16:56:32,703 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce7d0226bfbe3de3448b0] Result: true
2020-05-26 16:56:33,644 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-8] [getResultOfProcess] starting to select result of the request [5ecce7d0226bfbe3de3448b0] from db
2020-05-26 16:56:33,661 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-8] [getResultOfProcess] Found result of the request [5ecce7d0226bfbe3de3448b0]
2020-05-26 16:56:33,672 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-8] [deleteRecord] The request 5ecce7d0226bfbe3de3448b0 is deleted completely!
2020-05-26 16:56:33,682 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:56:33,682 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 16:56:33,682 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  "moId":"0",
2020-05-26 16:56:33,683 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:56:33,683 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:56:33,683 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  "brandName":"",
2020-05-26 16:56:33,683 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:56:33,683 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:56:33,683 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:56:33,683 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:56:33,684 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:56:33,684 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>  }
2020-05-26 16:56:33,684 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|< 200 OK
2020-05-26 16:56:33,684 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|<
2020-05-26 16:56:33,684 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
2020-05-26 16:57:27,194 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> POST /payment/apigw
2020-05-26 16:57:27,196 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 16:57:27,197 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> content-type: application/json
2020-05-26 16:57:27,197 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 16:57:27,198 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> accept: */*
2020-05-26 16:57:27,199 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> cache-control: no-cache
2020-05-26 16:57:27,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> postman-token: 7d1365d5-1abf-43f3-96ca-3617b7d52b2d
2020-05-26 16:57:27,202 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 16:57:27,203 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 16:57:27,203 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> connection: keep-alive
2020-05-26 16:57:27,203 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> content-length: 328
2020-05-26 16:57:27,204 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>
2020-05-26 16:57:27,204 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 16:57:27,204 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] Ip Adress '127.0.0.1' is valid
2020-05-26 16:57:27,204 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 16:57:27,204 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 16:57:27,204 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] Looking for the header start with 'PGW'
2020-05-26 16:57:27,207 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] checking authentication for user 'pgw_fptplay'
2020-05-26 16:57:27,207 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] security context was null, so authorizating user
2020-05-26 16:57:27,208 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-10] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 16:57:27,208 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-10] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 16:57:27,216 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] authorizated user 'pgw_fptplay', setting security context
2020-05-26 16:57:27,251 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-10] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 16:57:27,264 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-10] Service from the request is 'mt'
2020-05-26 16:57:27,265 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-10] [doMT] doing otp confirm...
2020-05-26 16:57:27,265 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-10] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 16:57:27,266 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-10] [verifyParameter] Result: true
2020-05-26 16:57:27,267 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-10] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 16:57:27,268 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-10] [verifyRequestCredentials] Result: true
2020-05-26 16:57:27,318 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-10] [insertRequest][to DB] Result ID: 5ecce807226bfbe3de3448b2
2020-05-26 16:57:27,323 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-10] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce807226bfbe3de3448b2'}'}
2020-05-26 16:57:27,324 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-10] msgKeyword = null
2020-05-26 16:57:27,324 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-10] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 16:57:27,327 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-10] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce807226bfbe3de3448b2'}'}
2020-05-26 16:57:27,328 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-10] [getResultOfProcess] starting to select result of the request [5ecce807226bfbe3de3448b2] from db
2020-05-26 16:57:27,402 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 16:57:27,402 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce807226bfbe3de3448b2'}'}
2020-05-26 16:57:27,409 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce807226bfbe3de3448b2]
2020-05-26 16:57:27,416 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce807226bfbe3de3448b2] Result: true
2020-05-26 16:57:28,336 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-10] [getResultOfProcess] starting to select result of the request [5ecce807226bfbe3de3448b2] from db
2020-05-26 16:57:28,348 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-10] [getResultOfProcess] Found result of the request [5ecce807226bfbe3de3448b2]
2020-05-26 16:57:28,372 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-10] [deleteRecord] The request 5ecce807226bfbe3de3448b2 is deleted completely!
2020-05-26 16:57:28,375 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  {"service":"mt",
2020-05-26 16:57:28,376 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 16:57:28,376 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  "moId":"0",
2020-05-26 16:57:28,376 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 16:57:28,377 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 16:57:28,377 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  "brandName":"",
2020-05-26 16:57:28,378 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 16:57:28,378 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 16:57:28,379 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  "cpCode":"001",
2020-05-26 16:57:28,379 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 16:57:28,379 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 16:57:28,379 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>  }
2020-05-26 16:57:28,380 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|< 200 OK
2020-05-26 16:57:28,380 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|<
2020-05-26 16:57:28,380 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
2020-05-26 17:00:50,609 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-26 17:00:50,609 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 17:00:50,610 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-26 17:00:50,610 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 17:00:50,610 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-26 17:00:50,610 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-26 17:00:50,610 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: 0f416a52-9c3a-49f7-8ff5-4b10610081aa
2020-05-26 17:00:50,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 17:00:50,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 17:00:50,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-26 17:00:50,612 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 328
2020-05-26 17:00:50,612 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-26 17:00:50,612 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 17:00:50,612 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-26 17:00:50,613 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 17:00:50,613 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 17:00:50,613 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-26 17:00:50,615 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-26 17:00:50,616 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-26 17:00:50,616 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 17:00:50,616 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 17:00:50,619 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-26 17:00:50,620 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 17:00:50,631 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'mt'
2020-05-26 17:00:50,632 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doMT] doing otp confirm...
2020-05-26 17:00:50,633 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 17:00:50,633 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-26 17:00:50,634 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 17:00:50,634 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-26 17:00:50,644 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [insertRequest][to DB] Result ID: 5ecce8d2226bfbe3de3448b4
2020-05-26 17:00:50,645 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce8d2226bfbe3de3448b4'}'}
2020-05-26 17:00:50,645 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-05-26 17:00:50,645 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 17:00:50,646 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce8d2226bfbe3de3448b4'}'}
2020-05-26 17:00:50,646 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ecce8d2226bfbe3de3448b4] from db
2020-05-26 17:00:50,896 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 17:00:50,897 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce8d2226bfbe3de3448b4'}'}
2020-05-26 17:00:50,910 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce8d2226bfbe3de3448b4]
2020-05-26 17:00:50,919 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce8d2226bfbe3de3448b4] Result: true
2020-05-26 17:00:51,649 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ecce8d2226bfbe3de3448b4] from db
2020-05-26 17:00:51,652 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] Found result of the request [5ecce8d2226bfbe3de3448b4]
2020-05-26 17:00:51,657 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-2] [deleteRecord] The request 5ecce8d2226bfbe3de3448b4 is deleted completely!
2020-05-26 17:00:51,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  {"service":"mt",
2020-05-26 17:00:51,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 17:00:51,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "moId":"0",
2020-05-26 17:00:51,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 17:00:51,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 17:00:51,660 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "brandName":"",
2020-05-26 17:00:51,660 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 17:00:51,660 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 17:00:51,660 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "cpCode":"001",
2020-05-26 17:00:51,660 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 17:00:51,660 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 17:00:51,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>  }
2020-05-26 17:00:51,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-26 17:00:51,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-26 17:00:51,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
2020-05-26 17:03:38,275 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> POST /payment/apigw
2020-05-26 17:03:38,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA
2020-05-26 17:03:38,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-type: application/json
2020-05-26 17:03:38,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-26 17:03:38,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept: */*
2020-05-26 17:03:38,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> cache-control: no-cache
2020-05-26 17:03:38,280 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> postman-token: 330fca3e-bafe-4584-a04e-c33afb8ae1e1
2020-05-26 17:03:38,280 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-26 17:03:38,280 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-26 17:03:38,280 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> connection: keep-alive
2020-05-26 17:03:38,280 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-length: 328
2020-05-26 17:03:38,280 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>
2020-05-26 17:03:38,280 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-26 17:03:38,281 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Ip Adress '127.0.0.1' is valid
2020-05-26 17:03:38,281 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-26 17:03:38,281 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MTM0OTYzNywiaWF0IjoxNTkwNDg1NjM3fQ.aIa3ABvK75KHV3eUav6pRxFaZmZIdwf_9KJeMWFhb36bGc6rfqX5AthVloBJF5x_u32DtqroyvcdaL6pf8EWHA'
2020-05-26 17:03:38,281 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Looking for the header start with 'PGW'
2020-05-26 17:03:38,293 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] checking authentication for user 'pgw_fptplay'
2020-05-26 17:03:38,293 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] security context was null, so authorizating user
2020-05-26 17:03:38,293 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-26 17:03:38,293 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-26 17:03:38,297 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] authorizated user 'pgw_fptplay', setting security context
2020-05-26 17:03:38,313 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-4] Remote request body is ' {"service":"mt",
 "transactionId":"1590137531-11720850121",
 "moId":"0",
 "destinationAddress":"0843052080",
 "sourceAddress":"9046",
 "brandName":"",
 "contentType":"TEXT",
 "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
 "cpCode":"001",
 "serviceCode":"FPTPLAY",
 "packageCode":"VIP1"
 }'
2020-05-26 17:03:38,319 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] Service from the request is 'mt'
2020-05-26 17:03:38,321 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] [doMT] doing otp confirm...
2020-05-26 17:03:38,323 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyParameter] Starting to check request: 1590137531-11720850121
2020-05-26 17:03:38,323 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyParameter] Result: true
2020-05-26 17:03:38,323 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Starting to check request: 1590137531-11720850121
2020-05-26 17:03:38,324 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Result: true
2020-05-26 17:03:38,340 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [insertRequest][to DB] Result ID: 5ecce97a226bfbe3de3448b6
2020-05-26 17:03:38,340 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-4] Send msg = Notification {notificationType='MT_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce97a226bfbe3de3448b6'}'}
2020-05-26 17:03:38,342 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-4] msgKeyword = null
2020-05-26 17:03:38,342 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-4] Destination found: name = PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE, keyword = null
2020-05-26 17:03:38,347 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-4] Msg sent to queue[queue:'PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE']= Notification {notificationType='MT_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='MT_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='0843052080', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', dbId='5ecce97a226bfbe3de3448b6'}'}
2020-05-26 17:03:38,349 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ecce97a226bfbe3de3448b6] from db
2020-05-26 17:03:38,451 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [MT_RESPONSE]...
2020-05-26 17:03:38,480 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='MT_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='MT_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ecce97a226bfbe3de3448b6'}'}
2020-05-26 17:03:38,501 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ecce97a226bfbe3de3448b6]
2020-05-26 17:03:38,530 INFO com.dz.apigw.services.MTServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ecce97a226bfbe3de3448b6] Result: true
2020-05-26 17:03:39,355 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ecce97a226bfbe3de3448b6] from db
2020-05-26 17:03:39,357 INFO com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] Found result of the request [5ecce97a226bfbe3de3448b6]
2020-05-26 17:03:39,364 ERROR com.dz.apigw.services.MTServiceImpl [http-nio-8881-exec-4] [deleteRecord] The request 5ecce97a226bfbe3de3448b6 is deleted completely!
2020-05-26 17:03:39,368 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  {"service":"mt",
2020-05-26 17:03:39,368 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "transactionId":"1590137531-11720850121",
2020-05-26 17:03:39,368 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "moId":"0",
2020-05-26 17:03:39,368 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "destinationAddress":"0843052080",
2020-05-26 17:03:39,369 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "sourceAddress":"9046",
2020-05-26 17:03:39,369 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "brandName":"",
2020-05-26 17:03:39,369 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "contentType":"TEXT",
2020-05-26 17:03:39,369 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "content":"Quy Khach vua thuc hien mua thanh cong goi [Tên gói] dich vu FPT Play",
2020-05-26 17:03:39,369 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "cpCode":"001",
2020-05-26 17:03:39,369 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "serviceCode":"FPTPLAY",
2020-05-26 17:03:39,369 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  "packageCode":"VIP1"
2020-05-26 17:03:39,369 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>  }
2020-05-26 17:03:39,369 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< 200 OK
2020-05-26 17:03:39,370 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|<
2020-05-26 17:03:39,370 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< {"errorCode":-1,"transactionId":"1590137531-11720850121","reason":null}
