2020-06-29 10:36:42,299 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-06-29 10:36:42,328 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-06-29 10:37:18,513 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] Routing file updated
2020-06-29 10:37:18,536 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] New routes created.
2020-06-29 10:38:07,243 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] Routing file updated
2020-06-29 10:38:07,257 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] New routes created.
2020-06-29 10:38:30,941 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-06-29 10:38:30,942 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ
2020-06-29 10:38:30,943 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-06-29 10:38:30,943 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.25.0
2020-06-29 10:38:30,943 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-06-29 10:38:30,943 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-06-29 10:38:30,943 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: d8c76396-fe2d-4725-83ce-c4f065f23fbd
2020-06-29 10:38:30,944 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-29 10:38:30,944 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-29 10:38:30,944 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-06-29 10:38:30,944 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-06-29 10:38:30,944 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-06-29 10:38:30,944 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-29 10:38:30,944 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-06-29 10:38:30,945 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-29 10:38:30,945 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ'
2020-06-29 10:38:30,945 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-06-29 10:38:31,138 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-06-29 10:38:31,139 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-06-29 10:38:31,139 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-29 10:38:31,139 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-29 10:38:31,194 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-06-29 10:38:31,268 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"1590137531-117208501234"}'
2020-06-29 10:38:31,355 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-06-29 10:38:31,432 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='1590137531-117208501234',datetime='null'}
2020-06-29 10:38:31,449 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1590137531-117208501234
2020-06-29 10:38:31,450 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-06-29 10:38:31,451 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1590137531-117208501234
2020-06-29 10:38:31,451 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-06-29 10:38:31,853 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ef9623740fedfcfff354518
2020-06-29 10:38:31,855 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 10:38:31 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='1590137531-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9623740fedfcfff354518'}'}
2020-06-29 10:38:31,856 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-06-29 10:38:31,857 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching keyword found
2020-06-29 10:38:31,857 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-06-29 10:38:31,857 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = DOWNLOAD
2020-06-29 10:38:32,040 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 10:38:31 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='1590137531-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9623740fedfcfff354518'}'}
2020-06-29 10:38:32,044 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:33,085 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:34,094 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:35,100 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:36,104 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:37,111 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:38,119 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:39,128 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:40,136 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:41,142 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:42,151 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:43,158 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:44,166 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:45,172 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:46,195 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:47,198 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:48,206 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:49,211 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:50,217 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:51,243 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:52,248 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:53,258 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:54,262 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:55,268 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:56,277 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:57,283 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:58,288 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:38:59,297 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:39:00,308 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:39:01,314 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:39:02,323 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9623740fedfcfff354518] from db
2020-06-29 10:39:02,328 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-29 10:39:02,363 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5ef9623740fedfcfff354518 is deleted completely!
2020-06-29 10:39:02,388 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"1590137531-117208501234"}
2020-06-29 10:39:02,390 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-06-29 10:39:02,390 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-06-29 10:39:02,391 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1590137531-117208501234"}
2020-06-29 10:39:16,834 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] Routing file updated
2020-06-29 10:39:16,859 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] New routes created.
2020-06-29 10:40:55,848 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-06-29 10:40:55,851 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ
2020-06-29 10:40:55,851 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-06-29 10:40:55,851 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.25.0
2020-06-29 10:40:55,851 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-06-29 10:40:55,851 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-06-29 10:40:55,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 9a6fcd51-3e10-4abe-848f-399acfaca052
2020-06-29 10:40:55,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-29 10:40:55,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-29 10:40:55,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-06-29 10:40:55,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 229
2020-06-29 10:40:55,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-06-29 10:40:55,853 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-29 10:40:55,853 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-06-29 10:40:55,853 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-29 10:40:55,854 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ'
2020-06-29 10:40:55,854 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-06-29 10:40:55,857 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-06-29 10:40:55,857 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-06-29 10:40:55,858 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-29 10:40:55,858 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-29 10:40:55,866 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-06-29 10:40:55,873 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"15901375311-117208501234"}'
2020-06-29 10:40:55,908 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-06-29 10:40:55,911 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='15901375311-117208501234',datetime='null'}
2020-06-29 10:40:55,920 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 15901375311-117208501234
2020-06-29 10:40:55,920 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-06-29 10:40:55,921 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 15901375311-117208501234
2020-06-29 10:40:55,922 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-06-29 10:40:56,036 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ef962c840fedfcfff35451b
2020-06-29 10:40:56,037 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 10:40:55 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='15901375311-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef962c840fedfcfff35451b'}'}
2020-06-29 10:40:56,038 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-06-29 10:40:56,038 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching keyword found
2020-06-29 10:40:56,039 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-06-29 10:40:56,039 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = DOWNLOAD
2020-06-29 10:40:56,049 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 10:40:55 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='15901375311-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef962c840fedfcfff35451b'}'}
2020-06-29 10:40:56,050 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:40:57,078 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:40:58,084 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:40:59,090 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:00,097 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:01,103 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:02,109 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:03,119 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:04,124 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:05,131 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:06,137 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:07,144 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:08,154 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:09,164 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:10,168 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:11,171 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:12,179 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:13,186 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:14,194 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:15,201 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:16,207 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:17,215 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:18,221 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:19,236 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:20,244 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:21,250 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:22,257 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:23,261 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:24,267 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef962c840fedfcfff35451b] from db
2020-06-29 10:41:24,321 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] Exception: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'entityManagerFactory' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.AutoConfigurationPackages': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'metaDataSourceAdvisor': Cannot resolve reference to bean 'methodSecurityMetadataSource' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration': Initialization of bean failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry' available
2020-06-29 10:41:24,331 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] Exception: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'entityManagerFactory' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.AutoConfigurationPackages': BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'metaDataSourceAdvisor': Cannot resolve reference to bean 'methodSecurityMetadataSource' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration': Initialization of bean failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry' available
2020-06-29 10:41:24,343 ERROR com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] [doMainURLAction] Exception: 'Session/EntityManager is closed'
2020-06-29 10:41:24,348 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"15901375311-117208501234"}
2020-06-29 10:41:24,348 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-06-29 10:41:24,349 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-06-29 10:41:26,715 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] Routing file updated
2020-06-29 10:41:26,733 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] New routes created.
2020-06-29 10:42:50,317 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-06-29 10:42:50,320 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ
2020-06-29 10:42:50,320 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-06-29 10:42:50,321 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.25.0
2020-06-29 10:42:50,321 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-06-29 10:42:50,321 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-06-29 10:42:50,321 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 19e6a93e-327c-410a-ade9-81242385fff9
2020-06-29 10:42:50,321 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-29 10:42:50,322 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-29 10:42:50,322 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-06-29 10:42:50,322 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 230
2020-06-29 10:42:50,323 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-06-29 10:42:50,323 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-29 10:42:50,323 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-06-29 10:42:50,323 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-29 10:42:50,323 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ'
2020-06-29 10:42:50,324 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-06-29 10:42:50,326 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-06-29 10:42:50,326 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-06-29 10:42:50,326 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-29 10:42:50,327 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-29 10:42:50,339 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-06-29 10:42:50,341 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753112-117208501234"}'
2020-06-29 10:42:50,355 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-06-29 10:42:50,358 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753112-117208501234',datetime='null'}
2020-06-29 10:42:50,369 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 159013753112-117208501234
2020-06-29 10:42:50,375 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-06-29 10:42:50,375 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 159013753112-117208501234
2020-06-29 10:42:50,376 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-06-29 10:42:50,569 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ef9633a40fedfcfff35451e
2020-06-29 10:42:50,570 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 10:42:50 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753112-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9633a40fedfcfff35451e'}'}
2020-06-29 10:42:50,572 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-06-29 10:42:50,577 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching keyword found
2020-06-29 10:42:50,578 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-06-29 10:42:50,578 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = DOWNLOAD
2020-06-29 10:42:50,586 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 10:42:50 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753112-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9633a40fedfcfff35451e'}'}
2020-06-29 10:42:50,587 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9633a40fedfcfff35451e] from db
2020-06-29 10:42:51,597 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9633a40fedfcfff35451e] from db
2020-06-29 10:42:52,605 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9633a40fedfcfff35451e] from db
2020-06-29 10:42:53,611 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9633a40fedfcfff35451e] from db
2020-06-29 10:42:53,613 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-29 10:42:53,625 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5ef9633a40fedfcfff35451e is deleted completely!
2020-06-29 10:42:53,629 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753112-117208501234"}
2020-06-29 10:42:53,629 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-06-29 10:42:53,630 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-06-29 10:42:53,630 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753112-117208501234"}
2020-06-29 10:48:31,922 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-06-29 10:48:31,926 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ
2020-06-29 10:48:31,926 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-06-29 10:48:31,927 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.25.0
2020-06-29 10:48:31,927 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-06-29 10:48:31,927 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-06-29 10:48:31,927 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: 26c5e35d-d139-44dd-b921-5f16bcadc17a
2020-06-29 10:48:31,927 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-29 10:48:31,928 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-29 10:48:31,928 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-06-29 10:48:31,929 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 230
2020-06-29 10:48:31,929 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-06-29 10:48:31,929 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-29 10:48:31,929 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-06-29 10:48:31,929 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-29 10:48:31,930 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ'
2020-06-29 10:48:31,930 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-06-29 10:48:31,939 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-06-29 10:48:31,939 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-06-29 10:48:31,939 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-29 10:48:31,939 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-29 10:48:31,944 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-06-29 10:48:31,954 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753113-117208501234"}'
2020-06-29 10:48:31,959 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-06-29 10:48:31,961 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753113-117208501234',datetime='null'}
2020-06-29 10:48:31,962 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 159013753113-117208501234
2020-06-29 10:48:31,962 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-06-29 10:48:31,962 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 159013753113-117208501234
2020-06-29 10:48:31,962 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-06-29 10:48:31,973 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5ef9648f40fedfcfff354520
2020-06-29 10:48:31,973 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 10:48:31 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753113-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9648f40fedfcfff354520'}'}
2020-06-29 10:48:31,974 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-06-29 10:48:31,974 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching keyword found
2020-06-29 10:48:31,975 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-06-29 10:48:31,975 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = DOWNLOAD
2020-06-29 10:48:31,978 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 10:48:31 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753113-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9648f40fedfcfff354520'}'}
2020-06-29 10:48:31,979 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ef9648f40fedfcfff354520] from db
2020-06-29 10:48:32,989 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ef9648f40fedfcfff354520] from db
2020-06-29 10:48:33,994 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ef9648f40fedfcfff354520] from db
2020-06-29 10:48:35,002 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ef9648f40fedfcfff354520] from db
2020-06-29 10:48:35,005 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-29 10:48:35,012 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [deleteRecord] The request 5ef9648f40fedfcfff354520 is deleted completely!
2020-06-29 10:48:35,017 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753113-117208501234"}
2020-06-29 10:48:35,018 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-06-29 10:48:35,018 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-06-29 10:48:35,018 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753113-117208501234"}
2020-06-29 10:49:38,176 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-06-29 10:49:38,176 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ
2020-06-29 10:49:38,177 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-06-29 10:49:38,177 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.25.0
2020-06-29 10:49:38,177 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-06-29 10:49:38,177 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-06-29 10:49:38,178 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: be7c52b1-0f9b-4c97-98b2-96db15f9d7fc
2020-06-29 10:49:38,178 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-29 10:49:38,178 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-29 10:49:38,178 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-06-29 10:49:38,179 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 230
2020-06-29 10:49:38,179 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-06-29 10:49:38,179 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-29 10:49:38,179 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-06-29 10:49:38,180 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-29 10:49:38,180 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ'
2020-06-29 10:49:38,180 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-06-29 10:49:38,183 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-06-29 10:49:38,184 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-06-29 10:49:38,185 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-29 10:49:38,185 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-29 10:49:38,196 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-06-29 10:49:38,198 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753114-117208501234"}'
2020-06-29 10:49:38,201 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'charge'
2020-06-29 10:49:38,204 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753114-117208501234',datetime='null'}
2020-06-29 10:49:38,204 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 159013753114-117208501234
2020-06-29 10:49:38,205 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-06-29 10:49:38,205 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 159013753114-117208501234
2020-06-29 10:49:38,206 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-06-29 10:49:38,310 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [insertRequest][to DB] Result ID: 5ef964d240fedfcfff354522
2020-06-29 10:49:38,313 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 10:49:38 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753114-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef964d240fedfcfff354522'}'}
2020-06-29 10:49:38,313 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-06-29 10:49:38,314 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] no matching keyword found
2020-06-29 10:49:38,314 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-06-29 10:49:38,315 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = DOWNLOAD
2020-06-29 10:49:38,328 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 10:49:38 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753114-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef964d240fedfcfff354522'}'}
2020-06-29 10:49:38,329 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ef964d240fedfcfff354522] from db
2020-06-29 10:49:39,344 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ef964d240fedfcfff354522] from db
2020-06-29 10:49:40,349 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ef964d240fedfcfff354522] from db
2020-06-29 10:49:41,353 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ef964d240fedfcfff354522] from db
2020-06-29 10:49:41,357 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-29 10:49:41,363 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [deleteRecord] The request 5ef964d240fedfcfff354522 is deleted completely!
2020-06-29 10:49:41,365 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753114-117208501234"}
2020-06-29 10:49:41,366 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-06-29 10:49:41,366 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-06-29 10:49:41,367 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753114-117208501234"}
2020-06-29 10:50:54,861 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-06-29 10:50:54,864 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef964d240fedfcfff354522'}'}
2020-06-29 10:50:54,886 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ef964d240fedfcfff354522] Result: false
2020-06-29 13:44:07,427 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> POST /payment/apigw
2020-06-29 13:44:07,438 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ
2020-06-29 13:44:07,440 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-type: application/json
2020-06-29 13:44:07,440 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> user-agent: PostmanRuntime/7.25.0
2020-06-29 13:44:07,440 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept: */*
2020-06-29 13:44:07,441 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> cache-control: no-cache
2020-06-29 13:44:07,442 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> postman-token: 1e013a62-2e0c-4ee6-a958-c2e52d2454eb
2020-06-29 13:44:07,445 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-29 13:44:07,446 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-29 13:44:07,450 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> connection: keep-alive
2020-06-29 13:44:07,451 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-length: 230
2020-06-29 13:44:07,451 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>
2020-06-29 13:44:07,451 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-29 13:44:07,459 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Ip Adress '127.0.0.1' is valid
2020-06-29 13:44:07,463 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-29 13:44:07,468 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ'
2020-06-29 13:44:07,468 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Looking for the header start with 'PGW'
2020-06-29 13:44:07,496 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] checking authentication for user 'pgw_fptplay'
2020-06-29 13:44:07,496 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] security context was null, so authorizating user
2020-06-29 13:44:07,496 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-29 13:44:07,496 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-29 13:44:07,500 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] authorizated user 'pgw_fptplay', setting security context
2020-06-29 13:44:07,556 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-7] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753115-117208501234"}'
2020-06-29 13:44:07,566 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] Service from the request is 'charge'
2020-06-29 13:44:07,569 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753115-117208501234',datetime='null'}
2020-06-29 13:44:07,570 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Starting to check request: 159013753115-117208501234
2020-06-29 13:44:07,571 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Result: true
2020-06-29 13:44:07,572 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Starting to check request: 159013753115-117208501234
2020-06-29 13:44:07,573 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Result: true
2020-06-29 13:44:07,779 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [insertRequest][to DB] Result ID: 5ef98db740fedfcfff354524
2020-06-29 13:44:07,780 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 13:44:07 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753115-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef98db740fedfcfff354524'}'}
2020-06-29 13:44:07,780 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-06-29 13:44:07,780 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] no matching keyword found
2020-06-29 13:44:07,781 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-06-29 13:44:07,781 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = DOWNLOAD
2020-06-29 13:44:07,784 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 13:44:07 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753115-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef98db740fedfcfff354524'}'}
2020-06-29 13:44:07,785 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5ef98db740fedfcfff354524] from db
2020-06-29 13:44:08,796 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5ef98db740fedfcfff354524] from db
2020-06-29 13:44:09,804 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5ef98db740fedfcfff354524] from db
2020-06-29 13:44:10,810 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5ef98db740fedfcfff354524] from db
2020-06-29 13:44:10,818 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-29 13:44:10,830 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [deleteRecord] The request 5ef98db740fedfcfff354524 is deleted completely!
2020-06-29 13:44:10,839 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753115-117208501234"}
2020-06-29 13:44:10,841 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< 200 OK
2020-06-29 13:44:10,841 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|<
2020-06-29 13:44:10,841 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753115-117208501234"}
2020-06-29 13:45:23,388 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-06-29 13:45:23,389 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef98db740fedfcfff354524'}'}
2020-06-29 13:45:23,392 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ef98db740fedfcfff354524] Result: false
2020-06-29 13:48:53,977 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> POST /payment/apigw
2020-06-29 13:48:53,977 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ
2020-06-29 13:48:53,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-type: application/json
2020-06-29 13:48:53,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> user-agent: PostmanRuntime/7.25.0
2020-06-29 13:48:53,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept: */*
2020-06-29 13:48:53,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> cache-control: no-cache
2020-06-29 13:48:53,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> postman-token: 30c6683d-c344-4eed-b6a7-a720ea782051
2020-06-29 13:48:53,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-29 13:48:53,979 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-29 13:48:53,979 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> connection: keep-alive
2020-06-29 13:48:53,979 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-length: 230
2020-06-29 13:48:53,979 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>
2020-06-29 13:48:53,979 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-29 13:48:53,980 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Ip Adress '127.0.0.1' is valid
2020-06-29 13:48:53,980 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-29 13:48:53,980 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ'
2020-06-29 13:48:53,980 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Looking for the header start with 'PGW'
2020-06-29 13:48:53,982 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] checking authentication for user 'pgw_fptplay'
2020-06-29 13:48:53,982 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] security context was null, so authorizating user
2020-06-29 13:48:53,982 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-29 13:48:53,982 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-29 13:48:53,986 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] authorizated user 'pgw_fptplay', setting security context
2020-06-29 13:48:53,987 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-9] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753116-117208501234"}'
2020-06-29 13:48:53,989 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] Service from the request is 'charge'
2020-06-29 13:48:53,989 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753116-117208501234',datetime='null'}
2020-06-29 13:48:53,990 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Starting to check request: 159013753116-117208501234
2020-06-29 13:48:53,990 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Result: true
2020-06-29 13:48:53,990 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Starting to check request: 159013753116-117208501234
2020-06-29 13:48:53,991 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Result: true
2020-06-29 13:48:53,993 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [insertRequest][to DB] Result ID: 5ef98ed540fedfcfff354526
2020-06-29 13:48:53,994 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 13:48:53 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753116-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef98ed540fedfcfff354526'}'}
2020-06-29 13:48:53,994 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-06-29 13:48:53,994 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] no matching keyword found
2020-06-29 13:48:53,995 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-06-29 13:48:53,995 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = DOWNLOAD
2020-06-29 13:48:53,995 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 13:48:53 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753116-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef98ed540fedfcfff354526'}'}
2020-06-29 13:48:53,996 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5ef98ed540fedfcfff354526] from db
2020-06-29 13:48:55,005 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5ef98ed540fedfcfff354526] from db
2020-06-29 13:48:56,009 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5ef98ed540fedfcfff354526] from db
2020-06-29 13:48:57,018 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5ef98ed540fedfcfff354526] from db
2020-06-29 13:48:57,022 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-29 13:48:57,026 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [deleteRecord] The request 5ef98ed540fedfcfff354526 is deleted completely!
2020-06-29 13:48:57,028 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753116-117208501234"}
2020-06-29 13:48:57,028 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< 200 OK
2020-06-29 13:48:57,028 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|<
2020-06-29 13:48:57,028 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753116-117208501234"}
2020-06-29 13:50:09,519 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-06-29 13:50:09,519 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef98ed540fedfcfff354526'}'}
2020-06-29 13:50:09,522 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ef98ed540fedfcfff354526] Result: false
2020-06-29 13:56:21,876 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-06-29 13:56:21,876 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ
2020-06-29 13:56:21,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-06-29 13:56:21,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.25.0
2020-06-29 13:56:21,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-06-29 13:56:21,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-06-29 13:56:21,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 631a1037-24fd-4e73-a96e-c5c185df6f6a
2020-06-29 13:56:21,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-29 13:56:21,878 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-29 13:56:21,878 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-06-29 13:56:21,878 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 230
2020-06-29 13:56:21,878 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-06-29 13:56:21,879 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-29 13:56:21,879 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-06-29 13:56:21,879 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-29 13:56:21,879 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ'
2020-06-29 13:56:21,879 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-06-29 13:56:21,881 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-06-29 13:56:21,881 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-06-29 13:56:21,881 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-29 13:56:21,881 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-29 13:56:21,886 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-06-29 13:56:21,888 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753117-117208501234"}'
2020-06-29 13:56:21,891 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-06-29 13:56:21,892 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753117-117208501234',datetime='null'}
2020-06-29 13:56:21,892 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 159013753117-117208501234
2020-06-29 13:56:21,892 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-06-29 13:56:21,893 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 159013753117-117208501234
2020-06-29 13:56:21,893 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-06-29 13:56:21,896 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ef9909540fedfcfff354528
2020-06-29 13:56:21,896 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 13:56:21 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753117-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9909540fedfcfff354528'}'}
2020-06-29 13:56:21,896 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-06-29 13:56:21,897 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching keyword found
2020-06-29 13:56:21,897 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-06-29 13:56:21,897 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = DOWNLOAD
2020-06-29 13:56:21,898 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 13:56:21 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753117-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9909540fedfcfff354528'}'}
2020-06-29 13:56:21,898 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9909540fedfcfff354528] from db
2020-06-29 13:56:22,906 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9909540fedfcfff354528] from db
2020-06-29 13:56:23,912 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9909540fedfcfff354528] from db
2020-06-29 13:56:24,920 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef9909540fedfcfff354528] from db
2020-06-29 13:56:24,922 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-29 13:56:24,940 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5ef9909540fedfcfff354528 is deleted completely!
2020-06-29 13:56:24,943 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753117-117208501234"}
2020-06-29 13:56:24,943 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-06-29 13:56:24,943 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-06-29 13:56:24,944 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753117-117208501234"}
2020-06-29 13:57:37,448 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-06-29 13:57:37,449 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9909540fedfcfff354528'}'}
2020-06-29 13:57:37,452 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ef9909540fedfcfff354528] Result: false
2020-06-29 13:59:34,115 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-06-29 13:59:34,116 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ
2020-06-29 13:59:34,116 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-06-29 13:59:34,116 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.25.0
2020-06-29 13:59:34,116 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-06-29 13:59:34,117 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-06-29 13:59:34,117 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: bdcb6f97-2e9b-4795-99bf-7f6b411ee642
2020-06-29 13:59:34,118 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-29 13:59:34,119 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-29 13:59:34,119 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-06-29 13:59:34,119 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 230
2020-06-29 13:59:34,119 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-06-29 13:59:34,119 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-29 13:59:34,119 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-06-29 13:59:34,120 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-29 13:59:34,120 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MzgzNzY3NywiaWF0IjoxNTkyOTczNjc3fQ.UJDndecD72PMGHekU6N7QQ5N062t_lYHlA5GG5zCv5KYn87YQOvLaTpPTWf9JMrslhJ2AHmsQMv6LVmM-8Y-FQ'
2020-06-29 13:59:34,120 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-06-29 13:59:34,123 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-06-29 13:59:34,123 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-06-29 13:59:34,123 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-29 13:59:34,123 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-29 13:59:34,127 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-06-29 13:59:34,129 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753118-117208501234"}'
2020-06-29 13:59:34,129 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-06-29 13:59:34,130 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753118-117208501234',datetime='null'}
2020-06-29 13:59:34,130 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 159013753118-117208501234
2020-06-29 13:59:34,131 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-06-29 13:59:34,131 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 159013753118-117208501234
2020-06-29 13:59:34,132 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-06-29 13:59:34,135 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5ef9915640fedfcfff35452a
2020-06-29 13:59:34,136 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 13:59:34 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753118-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9915640fedfcfff35452a'}'}
2020-06-29 13:59:34,136 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-06-29 13:59:34,136 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching keyword found
2020-06-29 13:59:34,136 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-06-29 13:59:34,137 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = DOWNLOAD
2020-06-29 13:59:34,137 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 13:59:34 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='159013753118-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9915640fedfcfff35452a'}'}
2020-06-29 13:59:34,137 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ef9915640fedfcfff35452a] from db
2020-06-29 13:59:35,142 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ef9915640fedfcfff35452a] from db
2020-06-29 13:59:36,148 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ef9915640fedfcfff35452a] from db
2020-06-29 13:59:37,179 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ef9915640fedfcfff35452a] from db
2020-06-29 13:59:37,183 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-29 13:59:37,186 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [deleteRecord] The request 5ef9915640fedfcfff35452a is deleted completely!
2020-06-29 13:59:37,187 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"159013753118-117208501234"}
2020-06-29 13:59:37,188 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-06-29 13:59:37,188 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-06-29 13:59:37,188 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-117208501234"}
2020-06-29 14:00:50,728 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-06-29 14:00:50,789 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef9915640fedfcfff35452a'}'}
2020-06-29 14:00:50,870 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ef9915640fedfcfff35452a] Result: false
2020-06-29 14:38:17,713 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] Routing file updated
2020-06-29 14:38:17,981 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] New routes created.
2020-06-29 14:51:42,408 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-06-29 14:51:42,470 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5Mzg0MzgyOCwiaWF0IjoxNTkyOTc5ODI4fQ.ySCaNU0cGMRqS-RPtNpB4RKcM1ZLI0f9oJOb_WztR1-UcUADwzh743LODBu4H1ZVbZzippdapiF4b9n_N7YoWw
2020-06-29 14:51:42,471 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-06-29 14:51:42,472 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.25.0
2020-06-29 14:51:42,472 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-06-29 14:51:42,473 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-06-29 14:51:42,473 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: ee5a8c16-e662-4e25-81b8-07e6b80c9758
2020-06-29 14:51:42,473 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-29 14:51:42,477 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-29 14:51:42,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-06-29 14:51:42,480 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 226
2020-06-29 14:51:42,480 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-06-29 14:51:42,481 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-29 14:51:42,483 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-06-29 14:51:42,500 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-29 14:51:42,505 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5Mzg0MzgyOCwiaWF0IjoxNTkyOTc5ODI4fQ.ySCaNU0cGMRqS-RPtNpB4RKcM1ZLI0f9oJOb_WztR1-UcUADwzh743LODBu4H1ZVbZzippdapiF4b9n_N7YoWw'
2020-06-29 14:51:42,528 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-06-29 14:51:42,785 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-06-29 14:51:42,786 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-06-29 14:51:42,786 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-29 14:51:42,787 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-29 14:51:42,813 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-06-29 14:51:42,911 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"84982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"1592469997-11720850"}
'
2020-06-29 14:51:43,146 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-06-29 14:51:43,174 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='84982051117', account='0982051117',cmd='DOWNLOAD',trans_id='1592469997-11720850',datetime='null'}
2020-06-29 14:51:43,223 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1592469997-11720850
2020-06-29 14:51:43,228 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-06-29 14:51:43,231 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1592469997-11720850
2020-06-29 14:51:43,232 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-06-29 14:51:44,451 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ef99d8f40fedfcfff35452d
2020-06-29 14:51:44,452 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 14:51:43 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='1592469997-11720850',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef99d8f40fedfcfff35452d'}'}
2020-06-29 14:51:44,455 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-06-29 14:51:44,456 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching keyword found
2020-06-29 14:51:44,456 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-06-29 14:51:44,456 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = DOWNLOAD
2020-06-29 14:51:44,480 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Mon Jun 29 14:51:43 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='1592469997-11720850',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef99d8f40fedfcfff35452d'}'}
2020-06-29 14:51:44,482 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef99d8f40fedfcfff35452d] from db
2020-06-29 14:51:45,498 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef99d8f40fedfcfff35452d] from db
2020-06-29 14:51:46,558 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef99d8f40fedfcfff35452d] from db
2020-06-29 14:51:47,565 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ef99d8f40fedfcfff35452d] from db
2020-06-29 14:51:47,568 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-29 14:51:47,626 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5ef99d8f40fedfcfff35452d is deleted completely!
2020-06-29 14:51:47,651 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"84982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"1592469997-11720850"}
2020-06-29 14:51:47,653 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-06-29 14:51:47,655 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-06-29 14:51:47,655 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1592469997-11720850"}
2020-06-29 14:53:02,738 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-06-29 14:53:02,748 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='vinaphone', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', dbId='5ef99d8f40fedfcfff35452d'}'}
2020-06-29 14:53:02,776 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ef99d8f40fedfcfff35452d] Result: false
