2020-06-05 00:26:32,300 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:26:32,310 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP1', msisdn='0843052080', account='98765',cmd='null',trans_id='7',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92ec8226bfb55540b0389'}'}
2020-06-05 00:26:32,310 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:26:32,474 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 7
2020-06-05 00:26:32,475 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:26:32,487 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 7 [account=98765]
2020-06-05 00:26:32,487 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 7] Sending request [PaymentNotificationRequest {originalRequestId='7', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP1', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:26:39,256 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:26:39,258 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92ec8226bfb55540b0389'}'}
2020-06-05 00:26:39,263 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92ec8226bfb55540b0389'}'}
2020-06-05 00:27:36,464 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] Routing file updated
2020-06-05 00:27:36,495 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] New routes created.
2020-06-05 00:27:47,841 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-06-05 00:27:47,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MjA5ODM1NSwiaWF0IjoxNTkxMjM0MzU1fQ.9vl56s0ODwGhIUKFtvjPeam6yDeYwN51B9I3HVlZbaUSu62ExsUKkJyTprh5nq5z5mfsS0Ep4f5iH_K7icdoIQ
2020-06-05 00:27:47,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-06-05 00:27:47,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-06-05 00:27:47,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-06-05 00:27:47,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-06-05 00:27:47,853 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: b0509f6a-694a-4830-b5e7-d336f064a5d5
2020-06-05 00:27:47,853 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-05 00:27:47,853 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-05 00:27:47,853 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-06-05 00:27:47,854 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 223
2020-06-05 00:27:47,854 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-06-05 00:27:47,854 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-05 00:27:47,854 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-06-05 00:27:47,854 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-05 00:27:47,855 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MjA5ODM1NSwiaWF0IjoxNTkxMjM0MzU1fQ.9vl56s0ODwGhIUKFtvjPeam6yDeYwN51B9I3HVlZbaUSu62ExsUKkJyTprh5nq5z5mfsS0Ep4f5iH_K7icdoIQ'
2020-06-05 00:27:47,855 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-06-05 00:27:47,858 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-06-05 00:27:47,859 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-06-05 00:27:47,859 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-05 00:27:47,860 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-05 00:27:47,867 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-06-05 00:27:47,872 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP2","msisdn":"0843052080","account":"98765","cmd":"DOWNLOAD","trans_id":"1590137531-117208501234"}'
2020-06-05 00:27:47,886 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-06-05 00:27:47,897 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP2', msisdn='0843052080', account='98765',cmd='DOWNLOAD',trans_id='1590137531-117208501234',datetime='null'}
2020-06-05 00:27:47,909 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1590137531-117208501234
2020-06-05 00:27:47,911 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-06-05 00:27:47,912 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1590137531-117208501234
2020-06-05 00:27:47,913 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-06-05 00:27:48,174 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ed92f14226bfb81c84c4c6a
2020-06-05 00:27:48,175 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='Fri Jun 05 00:27:47 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP2', msisdn='0843052080', account='98765',cmd='DOWNLOAD',trans_id='1590137531-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92f14226bfb81c84c4c6a'}'}
2020-06-05 00:27:48,176 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-06-05 00:27:48,176 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-06-05 00:27:48,186 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='Fri Jun 05 00:27:47 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP2', msisdn='0843052080', account='98765',cmd='DOWNLOAD',trans_id='1590137531-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92f14226bfb81c84c4c6a'}'}
2020-06-05 00:27:48,186 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ed92f14226bfb81c84c4c6a] from db
2020-06-05 00:27:49,205 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ed92f14226bfb81c84c4c6a] from db
2020-06-05 00:27:50,213 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ed92f14226bfb81c84c4c6a] from db
2020-06-05 00:27:51,217 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ed92f14226bfb81c84c4c6a] from db
2020-06-05 00:27:51,219 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-05 00:27:51,224 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5ed92f14226bfb81c84c4c6a is deleted completely!
2020-06-05 00:27:51,228 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP2","msisdn":"0843052080","account":"98765","cmd":"DOWNLOAD","trans_id":"1590137531-117208501234"}
2020-06-05 00:27:51,228 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-06-05 00:27:51,228 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-06-05 00:27:51,228 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1590137531-117208501234"}
2020-06-05 00:28:24,702 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:28:24,702 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='71',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92f38226bfb55540b038b'}'}
2020-06-05 00:28:24,702 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:28:24,714 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 71
2020-06-05 00:28:24,714 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:28:24,722 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 71 [account=98765]
2020-06-05 00:28:24,722 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 71] Sending request [PaymentNotificationRequest {originalRequestId='71', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:28:26,881 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:28:26,882 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92f38226bfb55540b038b'}'}
2020-06-05 00:28:26,883 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92f38226bfb55540b038b'}'}
2020-06-05 00:28:44,554 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:28:44,554 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='71',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92f4c226bfb55540b038d'}'}
2020-06-05 00:28:44,555 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:28:44,556 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 71
2020-06-05 00:28:44,556 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:28:44,557 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 71 [account=98765]
2020-06-05 00:28:44,557 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 71] Sending request [PaymentNotificationRequest {originalRequestId='71', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:29:00,147 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:29:00,149 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92f4c226bfb55540b038d'}'}
2020-06-05 00:29:00,150 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92f4c226bfb55540b038d'}'}
2020-06-05 00:30:13,960 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:30:13,960 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='71',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92fa5226bfb55540b0390'}'}
2020-06-05 00:30:13,960 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:30:13,962 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 71
2020-06-05 00:30:13,962 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:30:13,965 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 71 [account=98765]
2020-06-05 00:30:13,965 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 71] Sending request [PaymentNotificationRequest {originalRequestId='71', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:30:14,110 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:30:14,113 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92fa5226bfb55540b0390'}'}
2020-06-05 00:30:14,114 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92fa5226bfb55540b0390'}'}
2020-06-05 00:30:36,262 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:30:36,262 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='711',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92fbc226bfb55540b0392'}'}
2020-06-05 00:30:36,263 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:30:36,268 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 711
2020-06-05 00:30:36,268 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:30:36,272 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 711 [account=98765]
2020-06-05 00:30:36,272 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 711] Sending request [PaymentNotificationRequest {originalRequestId='711', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:30:37,522 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:30:37,550 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92fbc226bfb55540b0392'}'}
2020-06-05 00:30:37,551 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92fbc226bfb55540b0392'}'}
2020-06-05 00:31:13,542 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:31:13,542 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='711',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92fe1226bfb55540b0395'}'}
2020-06-05 00:31:13,542 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:31:13,544 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 711
2020-06-05 00:31:13,544 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:31:13,545 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 711 [account=98765]
2020-06-05 00:31:13,545 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 711] Sending request [PaymentNotificationRequest {originalRequestId='711', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:31:13,675 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:31:13,678 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92fe1226bfb55540b0395'}'}
2020-06-05 00:31:13,679 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92fe1226bfb55540b0395'}'}
2020-06-05 00:31:39,049 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:31:39,049 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='711',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92ffb226bfb55540b0398'}'}
2020-06-05 00:31:39,049 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:31:39,052 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 711
2020-06-05 00:31:39,052 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:31:39,055 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 711 [account=98765]
2020-06-05 00:31:39,055 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 711] Sending request [PaymentNotificationRequest {originalRequestId='711', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:31:39,185 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:31:39,190 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92ffb226bfb55540b0398'}'}
2020-06-05 00:31:39,190 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed92ffb226bfb55540b0398'}'}
2020-06-05 00:34:24,514 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:34:24,514 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='711',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930a0226bfb55540b039e'}'}
2020-06-05 00:34:24,514 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:34:24,516 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 711
2020-06-05 00:34:24,516 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:34:24,518 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 711 [account=98765]
2020-06-05 00:34:24,519 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 711] Sending request [PaymentNotificationRequest {originalRequestId='711', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:34:24,660 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:34:24,662 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930a0226bfb55540b039e'}'}
2020-06-05 00:34:24,663 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930a0226bfb55540b039e'}'}
2020-06-05 00:34:41,339 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-06-05 00:34:41,340 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MjA5ODM1NSwiaWF0IjoxNTkxMjM0MzU1fQ.9vl56s0ODwGhIUKFtvjPeam6yDeYwN51B9I3HVlZbaUSu62ExsUKkJyTprh5nq5z5mfsS0Ep4f5iH_K7icdoIQ
2020-06-05 00:34:41,340 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-06-05 00:34:41,341 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-06-05 00:34:41,341 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-06-05 00:34:41,341 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-06-05 00:34:41,341 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: d5c62ea2-3ad8-46ba-819c-b6ccc993fa0a
2020-06-05 00:34:41,342 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-05 00:34:41,342 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-05 00:34:41,342 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-06-05 00:34:41,342 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 223
2020-06-05 00:34:41,342 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-06-05 00:34:41,343 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-05 00:34:41,343 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-06-05 00:34:41,343 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-05 00:34:41,343 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MjA5ODM1NSwiaWF0IjoxNTkxMjM0MzU1fQ.9vl56s0ODwGhIUKFtvjPeam6yDeYwN51B9I3HVlZbaUSu62ExsUKkJyTprh5nq5z5mfsS0Ep4f5iH_K7icdoIQ'
2020-06-05 00:34:41,344 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-06-05 00:34:41,346 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-06-05 00:34:41,347 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-06-05 00:34:41,347 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-05 00:34:41,347 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-05 00:34:41,350 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-06-05 00:34:41,351 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP2","msisdn":"0843052080","account":"98765","cmd":"DOWNLOAD","trans_id":"1590137531-117208501234"}'
2020-06-05 00:34:41,352 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-06-05 00:34:41,353 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP2', msisdn='0843052080', account='98765',cmd='DOWNLOAD',trans_id='1590137531-117208501234',datetime='null'}
2020-06-05 00:34:41,354 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 1590137531-117208501234
2020-06-05 00:34:41,355 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-06-05 00:34:41,356 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 1590137531-117208501234
2020-06-05 00:34:41,356 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-06-05 00:34:41,375 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5ed930b1226bfb81c84c4c6c
2020-06-05 00:34:41,376 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='Fri Jun 05 00:34:41 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP2', msisdn='0843052080', account='98765',cmd='DOWNLOAD',trans_id='1590137531-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930b1226bfb81c84c4c6c'}'}
2020-06-05 00:34:41,377 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = null
2020-06-05 00:34:41,377 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-06-05 00:34:41,378 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='Fri Jun 05 00:34:41 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP2', msisdn='0843052080', account='98765',cmd='DOWNLOAD',trans_id='1590137531-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930b1226bfb81c84c4c6c'}'}
2020-06-05 00:34:41,379 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ed930b1226bfb81c84c4c6c] from db
2020-06-05 00:34:42,392 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ed930b1226bfb81c84c4c6c] from db
2020-06-05 00:34:43,397 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ed930b1226bfb81c84c4c6c] from db
2020-06-05 00:34:44,405 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ed930b1226bfb81c84c4c6c] from db
2020-06-05 00:34:44,409 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-05 00:34:44,413 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [deleteRecord] The request 5ed930b1226bfb81c84c4c6c is deleted completely!
2020-06-05 00:34:44,415 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP2","msisdn":"0843052080","account":"98765","cmd":"DOWNLOAD","trans_id":"1590137531-117208501234"}
2020-06-05 00:34:44,416 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-06-05 00:34:44,416 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-06-05 00:34:44,416 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"1590137531-117208501234"}
2020-06-05 00:34:49,840 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:34:49,841 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='711',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930b9226bfb55540b03a0'}'}
2020-06-05 00:34:49,841 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:34:49,845 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 711
2020-06-05 00:34:49,845 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:34:49,849 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 711 [account=98765]
2020-06-05 00:34:49,850 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 711] Sending request [PaymentNotificationRequest {originalRequestId='711', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:34:50,059 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:34:50,063 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930b9226bfb55540b03a0'}'}
2020-06-05 00:34:50,064 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930b9226bfb55540b03a0'}'}
2020-06-05 00:35:09,886 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:35:09,886 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='711',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930cd226bfb55540b03a2'}'}
2020-06-05 00:35:09,886 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:35:09,888 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 711
2020-06-05 00:35:09,888 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:35:09,890 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 711 [account=98765]
2020-06-05 00:35:09,891 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 711] Sending request [PaymentNotificationRequest {originalRequestId='711', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:35:10,034 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:35:10,036 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930cd226bfb55540b03a2'}'}
2020-06-05 00:35:10,036 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930cd226bfb55540b03a2'}'}
2020-06-05 00:35:23,676 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:35:23,677 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='711',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930db226bfb55540b03a4'}'}
2020-06-05 00:35:23,677 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:35:23,679 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 711
2020-06-05 00:35:23,680 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:35:23,682 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 711 [account=98765]
2020-06-05 00:35:23,683 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 711] Sending request [PaymentNotificationRequest {originalRequestId='711', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:35:23,818 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:35:23,823 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930db226bfb55540b03a4'}'}
2020-06-05 00:35:23,824 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed930db226bfb55540b03a4'}'}
2020-06-05 00:36:48,646 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:36:48,646 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='711',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed93130226bfb55540b03a6'}'}
2020-06-05 00:36:48,646 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:36:48,648 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 711
2020-06-05 00:36:48,649 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:36:48,650 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 711 [account=98765]
2020-06-05 00:36:48,650 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 711] Sending request [PaymentNotificationRequest {originalRequestId='711', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:36:48,895 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:36:48,897 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed93130226bfb55540b03a6'}'}
2020-06-05 00:36:48,898 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed93130226bfb55540b03a6'}'}
2020-06-05 00:51:54,176 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:51:54,177 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='null',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed934ba226bfb55540b03b2'}'}
2020-06-05 00:51:54,177 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:51:54,180 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: null
2020-06-05 00:51:54,181 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:51:54,182 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: null [account=98765]
2020-06-05 00:51:54,182 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: null] Sending request [PaymentNotificationRequest {originalRequestId='null', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:51:54,317 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:51:54,318 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed934ba226bfb55540b03b2'}'}
2020-06-05 00:51:54,319 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed934ba226bfb55540b03b2'}'}
2020-06-05 00:52:08,996 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 00:52:08,996 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='null',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed934c8226bfb55540b03b4'}'}
2020-06-05 00:52:08,996 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 00:52:08,997 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: null
2020-06-05 00:52:08,998 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 00:52:08,999 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: null [account=98765]
2020-06-05 00:52:08,999 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: null] Sending request [PaymentNotificationRequest {originalRequestId='null', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 00:52:09,416 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 00:52:09,417 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed934c8226bfb55540b03b4'}'}
2020-06-05 00:52:09,417 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed934c8226bfb55540b03b4'}'}
2020-06-05 09:07:00,740 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-06-05 09:07:00,795 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-06-05 09:07:19,707 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 09:07:19,709 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='null',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed9a8d7226bfb481faafc9f'}'}
2020-06-05 09:07:19,709 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 09:07:19,723 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: null
2020-06-05 09:07:19,724 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 09:07:19,725 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: null [account=98765]
2020-06-05 09:07:19,726 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: null] Sending request [PaymentNotificationRequest {originalRequestId='null', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 09:07:21,119 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 09:07:21,121 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed9a8d7226bfb481faafc9f'}'}
2020-06-05 09:07:21,129 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed9a8d7226bfb481faafc9f'}'}
2020-06-05 09:10:42,649 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 09:10:42,704 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='null',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed9a9a2226bfb481faafca2'}'}
2020-06-05 09:10:42,705 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 09:10:42,720 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: null
2020-06-05 09:10:42,722 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 09:10:42,727 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: null [account=98765]
2020-06-05 09:10:42,727 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: null] Sending request [PaymentNotificationRequest {originalRequestId='null', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 09:10:43,037 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 09:10:43,042 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed9a9a2226bfb481faafca2'}'}
2020-06-05 09:10:43,051 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed9a9a2226bfb481faafca2'}'}
2020-06-05 09:11:50,527 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 09:11:50,528 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='VIP2', msisdn='0843052080', account='98765',cmd='null',trans_id='',price='10000',evenTime='2020-05-05 11:12:23',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed9a9e6226bfb481faafca5'}'}
2020-06-05 09:11:50,528 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 09:11:50,530 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 
2020-06-05 09:11:50,531 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 09:11:50,533 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request:  [account=98765]
2020-06-05 09:11:50,534 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: ] Sending request [PaymentNotificationRequest {originalRequestId='', account='98765', price='10000', serviceCode='FPTPLAY', packageCode='VIP2', evenTime='2020-05-05 11:12:23', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 09:11:50,725 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 09:11:50,736 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed9a9e6226bfb481faafca5'}'}
2020-06-05 09:11:50,737 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5ed9a9e6226bfb481faafca5'}'}
2020-06-05 09:13:16,105 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] Routing file updated
2020-06-05 09:13:16,137 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] New routes created.
2020-06-05 14:18:06,223 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] Routing file updated
2020-06-05 14:18:06,262 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] New routes created.
2020-06-05 14:20:19,518 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /login
2020-06-05 14:20:19,526 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-06-05 14:20:19,527 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-06-05 14:20:19,527 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-06-05 14:20:19,527 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-06-05 14:20:19,527 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: fcc8ee4c-22ed-4cc6-90c1-0f51972a9cca
2020-06-05 14:20:19,528 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-05 14:20:19,528 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-05 14:20:19,528 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-06-05 14:20:19,528 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 87
2020-06-05 14:20:19,528 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-06-05 14:20:19,528 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-05 14:20:19,531 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-06-05 14:20:19,531 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/login' ...
2020-06-05 14:20:19,532 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'null'
2020-06-05 14:20:19,532 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-06-05 14:20:19,532 WARN com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] couldn't find PGW string, will ignore the header
2020-06-05 14:20:19,818 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-05 14:20:19,819 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-05 14:20:19,920 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-05 14:20:19,924 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-05 14:20:20,054 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-06-05 14:20:20,055 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"username": "pgw_fptplay",
2020-06-05 14:20:20,055 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"password": "F311P@ay2o201446!@#",
2020-06-05 14:20:20,056 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "login"
2020-06-05 14:20:20,056 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-06-05 14:20:20,056 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-06-05 14:20:20,057 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-06-05 14:20:20,059 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":0,"session":"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MjIwNTYxOSwiaWF0IjoxNTkxMzQxNjE5fQ.TvI9SqTYLZEKNXOpBu5YZglrLMtzt81EnxZo3H9EP5MIUdjeYAf8q1u1mNY---OTRfKYHY_AZNiKgErTEEHYTA","message":"Login successfully , username=pgw_fptplay"}
2020-06-05 14:21:31,993 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] Routing file updated
2020-06-05 14:21:32,022 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] New routes created.
2020-06-05 15:40:41,050 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-7-thread-1] Routing file updated
2020-06-05 15:40:51,048 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-7-thread-1] New routes created.
2020-06-05 15:40:51,153 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-11-thread-1] Routing file updated
2020-06-05 15:40:51,247 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-11-thread-1] New routes created.
2020-06-05 15:40:51,250 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 15:40:51,250 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='null',trans_id='',price='2000',evenTime='2020-06-05 15:27:11',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda048b226bfb2abb4e8cbd'}'}
2020-06-05 15:40:51,250 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 15:40:51,268 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 
2020-06-05 15:40:51,268 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 15:40:51,271 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request:  [account=0843052080]
2020-06-05 15:40:51,272 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: ] Sending request [PaymentNotificationRequest {originalRequestId='', account='0843052080', price='2000', serviceCode='FPTPLAY', packageCode='TQCN', evenTime='2020-06-05 15:27:11', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 15:40:52,080 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 15:40:52,081 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda048b226bfb2abb4e8cbd'}'}
2020-06-05 15:40:52,092 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda048b226bfb2abb4e8cbd'}'}
2020-06-05 15:41:47,843 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-06-05 15:41:47,848 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MjA5ODM1NSwiaWF0IjoxNTkxMjM0MzU1fQ.9vl56s0ODwGhIUKFtvjPeam6yDeYwN51B9I3HVlZbaUSu62ExsUKkJyTprh5nq5z5mfsS0Ep4f5iH_K7icdoIQ
2020-06-05 15:41:47,848 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-06-05 15:41:47,848 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-06-05 15:41:47,849 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-06-05 15:41:47,849 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-06-05 15:41:47,849 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 733e6aec-6fe6-4cd8-98da-a782c9e2f26a
2020-06-05 15:41:47,849 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-06-05 15:41:47,849 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-06-05 15:41:47,850 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-06-05 15:41:47,850 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-06-05 15:41:47,850 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-06-05 15:41:47,851 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-06-05 15:41:47,851 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-06-05 15:41:47,851 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-06-05 15:41:47,852 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MjA5ODM1NSwiaWF0IjoxNTkxMjM0MzU1fQ.9vl56s0ODwGhIUKFtvjPeam6yDeYwN51B9I3HVlZbaUSu62ExsUKkJyTprh5nq5z5mfsS0Ep4f5iH_K7icdoIQ'
2020-06-05 15:41:47,852 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-06-05 15:41:47,906 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-06-05 15:41:47,906 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-06-05 15:41:47,906 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-06-05 15:41:47,907 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-06-05 15:41:47,918 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-06-05 15:41:47,987 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"1590137531-117208501234"}'
2020-06-05 15:41:48,024 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-06-05 15:41:48,036 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='1590137531-117208501234',datetime='null'}
2020-06-05 15:41:48,066 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1590137531-117208501234
2020-06-05 15:41:48,080 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-06-05 15:41:48,082 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1590137531-117208501234
2020-06-05 15:41:48,083 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-06-05 15:41:48,382 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5eda054c226bfb2cfeecd90f
2020-06-05 15:41:48,383 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='Fri Jun 05 15:41:48 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='1590137531-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda054c226bfb2cfeecd90f'}'}
2020-06-05 15:41:48,385 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-06-05 15:41:48,385 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-06-05 15:41:48,389 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='Fri Jun 05 15:41:48 ICT 2020', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='DOWNLOAD',trans_id='1590137531-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda054c226bfb2cfeecd90f'}'}
2020-06-05 15:41:48,393 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5eda054c226bfb2cfeecd90f] from db
2020-06-05 15:41:49,401 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5eda054c226bfb2cfeecd90f] from db
2020-06-05 15:41:50,406 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5eda054c226bfb2cfeecd90f] from db
2020-06-05 15:41:51,413 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5eda054c226bfb2cfeecd90f] from db
2020-06-05 15:41:51,415 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-06-05 15:41:51,443 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5eda054c226bfb2cfeecd90f is deleted completely!
2020-06-05 15:41:51,455 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"vinaphone","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0843052080","account":"0843052080","cmd":"DOWNLOAD","trans_id":"1590137531-117208501234"}
2020-06-05 15:41:51,456 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-06-05 15:41:51,456 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-06-05 15:41:51,457 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1590137531-117208501234"}
2020-06-05 15:42:07,783 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 15:42:07,785 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='null',trans_id='1590137531-117208501234',price='2000',evenTime='2020-06-05 15:27:11',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda055f226bfb2abb4e8cbf'}'}
2020-06-05 15:42:07,785 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 15:42:07,788 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 1590137531-117208501234
2020-06-05 15:42:07,788 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 15:42:07,790 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request: 1590137531-117208501234 [account=0843052080]
2020-06-05 15:42:07,791 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: 1590137531-117208501234] Sending request [PaymentNotificationRequest {originalRequestId='1590137531-117208501234', account='0843052080', price='2000', serviceCode='FPTPLAY', packageCode='TQCN', evenTime='2020-06-05 15:27:11', params='0'}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 15:42:08,039 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 15:42:08,042 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda055f226bfb2abb4e8cbf'}'}
2020-06-05 15:42:08,044 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda055f226bfb2abb4e8cbf'}'}
2020-06-05 16:53:26,021 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-14-thread-1] Routing file updated
2020-06-05 16:53:26,065 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-14-thread-1] New routes created.
2020-06-05 17:04:13,924 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-17-thread-1] Routing file updated
2020-06-05 17:04:13,989 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-17-thread-1] New routes created.
2020-06-05 17:04:33,247 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-20-thread-1] Routing file updated
2020-06-05 17:04:33,272 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-20-thread-1] New routes created.
2020-06-05 17:04:48,161 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-23-thread-1] Routing file updated
2020-06-05 17:04:48,188 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-23-thread-1] New routes created.
2020-06-05 18:06:41,201 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 18:06:41,435 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='null',trans_id='',price='2000',evenTime='2020-06-05 15:27:11',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda2740226bfb2abb4e8cd7'}'}
2020-06-05 18:06:41,436 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 18:06:41,712 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 
2020-06-05 18:06:41,721 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 18:06:41,736 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request:  [account=0843052080]
2020-06-05 18:06:41,737 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: ] Sending request [PaymentNotificationRequest {originalRequestId='', account='0843052080', price='2000', serviceCode='FPTPLAY', packageCode='TQCN', evenTime='2020-06-05 15:27:11', params='0', trans_id=''}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 18:06:42,324 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 18:06:42,330 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda2740226bfb2abb4e8cd7'}'}
2020-06-05 18:06:42,431 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda2740226bfb2abb4e8cd7'}'}
2020-06-05 18:09:25,423 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 18:09:25,428 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='null',trans_id='',price='2000',evenTime='2020-06-05 15:27:11',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda27e5226bfb2abb4e8cdb'}'}
2020-06-05 18:09:25,430 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 18:09:25,451 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 
2020-06-05 18:09:25,452 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 18:09:25,459 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request:  [account=0843052080]
2020-06-05 18:09:25,459 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: ] Sending request [PaymentNotificationRequest {originalRequestId='', account='0843052080', price='2000', serviceCode='FPTPLAY', packageCode='TQCN', evenTime='2020-06-05 15:27:11', params='0', trans_id=''}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 18:09:25,680 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 18:09:25,681 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda27e5226bfb2abb4e8cdb'}'}
2020-06-05 18:09:25,686 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda27e5226bfb2abb4e8cdb'}'}
2020-06-05 18:11:44,099 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 18:11:44,104 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='null',trans_id='',price='2000',evenTime='2020-06-05 15:27:11',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda2870226bfb2abb4e8cdf'}'}
2020-06-05 18:11:44,105 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 18:11:44,127 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 
2020-06-05 18:11:44,127 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 18:11:44,137 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request:  [account=0843052080]
2020-06-05 18:11:44,137 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: ] Sending request [PaymentNotificationRequest {originalRequestId='', account='0843052080', price='2000', serviceCode='FPTPLAY', packageCode='TQCN', evenTime='2020-06-05 15:27:11', params='0', trans_id=''}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 18:11:44,337 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 18:11:44,396 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda2870226bfb2abb4e8cdf'}'}
2020-06-05 18:11:44,398 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda2870226bfb2abb4e8cdf'}'}
2020-06-05 18:13:18,741 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] Received a new notification...
2020-06-05 18:13:18,744 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='PAYMENT_NOTIFICATION_REQUEST', destinationQueueName='PAYMENTGW.TELCO.REQUEST.VINAPHONE', channel='vinaphone', msg='MSG {msgType='PAYMENT_NOTIFICATION_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='DELTADIGITALVN', telco='null', service='null', service_code='TRUYENHINHFPTPLAY', service_id='null', package_code='TQCN', msisdn='0843052080', account='0843052080',cmd='null',trans_id='',price='2000',evenTime='2020-06-05 15:27:11',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda28ce226bfb2abb4e8ce4'}'}
2020-06-05 18:13:18,745 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [cpPaymentNotification] doing cp payment notification...
2020-06-05 18:13:18,758 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Starting to check request: 
2020-06-05 18:13:18,759 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [verifyParameter] Result: true
2020-06-05 18:13:18,761 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] start to process request:  [account=0843052080]
2020-06-05 18:13:18,761 INFO com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [CpId: ] Sending request [PaymentNotificationRequest {originalRequestId='', account='0843052080', price='2000', serviceCode='FPTPLAY', packageCode='TQCN', evenTime='2020-06-05 15:27:11', params='0', trans_id=''}] to https://payment-dev.fptplay.net/api/v1/partners/delta/notifyPaymentResult
2020-06-05 18:13:18,947 ERROR com.dz.apigw.services.PaymentNotificationServiceImpl [SimpleAsyncTaskExecutor-1] [processRequest] Exception: 403 Forbidden
2020-06-05 18:13:18,950 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Send msg = Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda28ce226bfb2abb4e8ce4'}'}
2020-06-05 18:13:18,955 INFO com.dz.apigw.msgqueue.AMQPProducer [SimpleAsyncTaskExecutor-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.REQUEST.VINAPHONE']= Notification {notificationType='PAYMENT_NOTIFICATION_RESPONSE', destinationQueueName='null', channel='null', msg='MSG {msgType='PAYMENT_NOTIFICATION_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', dbId='5eda28ce226bfb2abb4e8ce4'}'}
