2020-05-07 14:25:23,404 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-07 14:25:23,408 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU4OTQ0Mjk5OCwiaWF0IjoxNTg4NTc4OTk4fQ.q3Hd9znZtRLW0_I2mB5e5YrAhBp7FVaFdAD3dVmM2Lytc16iMuMoczipgiYKkYjtFkB8sC9IG8S_JUmBk6uAww
2020-05-07 14:25:23,408 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-07 14:25:23,408 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-07 14:25:23,408 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-07 14:25:23,408 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-07 14:25:23,408 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 4744bb3d-6780-44c0-afa0-9a7cc7fc8ee5
2020-05-07 14:25:23,409 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-07 14:25:23,409 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-07 14:25:23,409 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-07 14:25:23,409 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 202
2020-05-07 14:25:23,409 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-07 14:25:23,409 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-07 14:25:23,410 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-07 14:25:23,410 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-07 14:25:23,410 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU4OTQ0Mjk5OCwiaWF0IjoxNTg4NTc4OTk4fQ.q3Hd9znZtRLW0_I2mB5e5YrAhBp7FVaFdAD3dVmM2Lytc16iMuMoczipgiYKkYjtFkB8sC9IG8S_JUmBk6uAww'
2020-05-07 14:25:23,410 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-07 14:25:23,516 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-07 14:25:23,516 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-07 14:25:23,516 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-07 14:25:23,516 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-07 14:25:23,530 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-07 14:25:23,597 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "",
	"service_id": "",
	"package_code": "",
	"msisdn": "84919222400",
	"account": "",
	"cmd": "",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-07 14:25:23,612 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-07 14:25:23,646 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-07 14:25:23,653 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1234
2020-05-07 14:25:23,654 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-07 14:25:23,658 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1234
2020-05-07 14:25:23,663 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] Service Code [001] is not match
2020-05-07 14:25:23,663 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] Service ID [001] is not match
2020-05-07 14:25:23,663 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: false
2020-05-07 14:25:23,713 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-07 14:25:23,713 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-07 14:25:23,714 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-07 14:25:23,714 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "",
2020-05-07 14:25:23,714 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "",
2020-05-07 14:25:23,714 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "",
2020-05-07 14:25:23,714 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84919222400",
2020-05-07 14:25:23,714 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "",
2020-05-07 14:25:23,714 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "",
2020-05-07 14:25:23,715 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-07 14:25:23,715 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-07 14:25:23,715 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-07 14:25:23,715 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-07 14:25:23,715 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-07 14:25:23,716 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":"-1","trans_id":"1234"}
2020-05-07 14:27:59,818 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-07 14:27:59,819 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU4OTQ0Mjk5OCwiaWF0IjoxNTg4NTc4OTk4fQ.q3Hd9znZtRLW0_I2mB5e5YrAhBp7FVaFdAD3dVmM2Lytc16iMuMoczipgiYKkYjtFkB8sC9IG8S_JUmBk6uAww
2020-05-07 14:27:59,820 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-07 14:27:59,820 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-07 14:27:59,820 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-07 14:27:59,820 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-07 14:27:59,821 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: 590c4407-768b-449c-9ec8-56132a7e9db2
2020-05-07 14:27:59,821 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-07 14:27:59,821 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-07 14:27:59,821 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-07 14:27:59,822 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 218
2020-05-07 14:27:59,822 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-07 14:27:59,822 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-07 14:27:59,822 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-07 14:27:59,822 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-07 14:27:59,822 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU4OTQ0Mjk5OCwiaWF0IjoxNTg4NTc4OTk4fQ.q3Hd9znZtRLW0_I2mB5e5YrAhBp7FVaFdAD3dVmM2Lytc16iMuMoczipgiYKkYjtFkB8sC9IG8S_JUmBk6uAww'
2020-05-07 14:27:59,823 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-07 14:27:59,826 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-05-07 14:27:59,827 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-05-07 14:27:59,827 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-07 14:27:59,827 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-07 14:27:59,830 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-05-07 14:27:59,832 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "",
	"msisdn": "84919222400",
	"account": "",
	"cmd": "",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-07 14:27:59,833 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-05-07 14:27:59,833 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging...
2020-05-07 14:27:59,834 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 1234
2020-05-07 14:27:59,834 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-05-07 14:27:59,834 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 1234
2020-05-07 14:27:59,834 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-05-07 14:27:59,905 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result: true
2020-05-07 14:27:59,907 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> {
2020-05-07 14:27:59,907 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-07 14:27:59,907 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cp_code": "001",
2020-05-07 14:27:59,907 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-07 14:27:59,907 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-07 14:27:59,908 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"package_code": "",
2020-05-07 14:27:59,908 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"msisdn": "84919222400",
2020-05-07 14:27:59,908 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"account": "",
2020-05-07 14:27:59,908 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cmd": "",
2020-05-07 14:27:59,908 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"trans_id": "1234",
2020-05-07 14:27:59,908 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service": "charge"
2020-05-07 14:27:59,908 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> }
2020-05-07 14:27:59,909 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-05-07 14:27:59,909 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-07 14:27:59,909 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":"0","trans_id":"1234"}
