2020-12-10 10:47:28,364 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-12-10 10:47:28,499 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-12-10 10:52:43,935 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-12-10 10:52:43,974 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-12-10 10:53:27,982 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /login
2020-12-10 10:53:27,984 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-12-10 10:53:27,984 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 10:53:27,984 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-12-10 10:53:27,984 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-12-10 10:53:27,984 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 4ef2c573-00a5-484d-b697-f16dfd476800
2020-12-10 10:53:27,985 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 10:53:27,985 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 10:53:27,985 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-12-10 10:53:27,985 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 87
2020-12-10 10:53:27,985 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-12-10 10:53:27,986 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 10:53:27,986 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-12-10 10:53:27,986 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/login' ...
2020-12-10 10:53:27,986 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'null'
2020-12-10 10:53:27,986 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-12-10 10:53:27,987 WARN com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] couldn't find PGW string, will ignore the header
2020-12-10 10:53:28,174 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 10:53:28,174 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] No user found with username 'pgw_fptplay'
2020-12-10 10:53:28,328 ERROR com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doCreateAuthenticationToken] Exception Bad credentials : Bad credentials
2020-12-10 10:53:28,412 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-12-10 10:53:28,412 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"username": "pgw_fptplay",
2020-12-10 10:53:28,412 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"password": "F311P@ay2o201446!@#",
2020-12-10 10:53:28,413 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "login"
2020-12-10 10:53:28,418 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-12-10 10:53:28,420 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-12-10 10:53:28,421 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-12-10 10:53:28,423 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"session":null,"message":null}
2020-12-10 10:54:51,874 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] Routing file updated
2020-12-10 10:54:51,910 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] New routes created.
2020-12-10 10:54:55,624 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /login
2020-12-10 10:54:55,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-12-10 10:54:55,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 10:54:55,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-12-10 10:54:55,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-12-10 10:54:55,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: ba87bff9-b2d4-4001-8b0f-ac50f9a06d4a
2020-12-10 10:54:55,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 10:54:55,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 10:54:55,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-12-10 10:54:55,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 87
2020-12-10 10:54:55,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-12-10 10:54:55,628 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 10:54:55,628 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-12-10 10:54:55,629 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/login' ...
2020-12-10 10:54:55,629 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'null'
2020-12-10 10:54:55,629 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-12-10 10:54:55,630 WARN com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] couldn't find PGW string, will ignore the header
2020-12-10 10:54:55,640 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 10:54:55,641 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 10:54:55,817 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 10:54:55,818 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 10:54:55,939 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-12-10 10:54:55,940 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"username": "pgw_fptplay",
2020-12-10 10:54:55,947 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"password": "F311P@ay2o201446!@#",
2020-12-10 10:54:55,948 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "login"
2020-12-10 10:54:55,948 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-12-10 10:54:55,949 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-12-10 10:54:55,950 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-12-10 10:54:55,950 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":0,"session":"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA","message":"Login successfully , username=pgw_fptplay"}
2020-12-10 10:55:42,953 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-12-10 10:55:42,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 10:55:42,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-12-10 10:55:42,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 10:55:42,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-12-10 10:55:42,955 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-12-10 10:55:42,955 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: 9073f185-a060-4170-b6a1-0ff5a8996fed
2020-12-10 10:55:42,956 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 10:55:42,956 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 10:55:42,956 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-12-10 10:55:42,956 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 228
2020-12-10 10:55:42,956 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-12-10 10:55:42,956 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 10:55:42,957 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-12-10 10:55:42,957 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 10:55:42,957 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 10:55:42,958 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-12-10 10:55:42,982 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-12-10 10:55:42,983 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-12-10 10:55:42,983 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 10:55:42,983 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 10:55:42,987 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-12-10 10:55:42,989 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501234"}'
2020-12-10 10:55:42,993 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-12-10 10:55:43,000 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501234',datetime='null'}
2020-12-10 10:55:43,003 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 159013753118-117208501234
2020-12-10 10:55:43,004 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-12-10 10:55:43,004 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 159013753118-117208501234
2020-12-10 10:55:43,004 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-12-10 10:55:43,188 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5fd19c3f38b0764e6ae5edeb
2020-12-10 10:55:43,189 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 10:55:43 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19c3f38b0764e6ae5edeb'}'}
2020-12-10 10:55:43,190 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 10:55:43,190 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching keyword found
2020-12-10 10:55:43,190 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 10:55:43,191 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching telco found
2020-12-10 10:55:43,191 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 10:55:43,191 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 10:55:43,210 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 10:55:43 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19c3f38b0764e6ae5edeb'}'}
2020-12-10 10:55:43,210 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5fd19c3f38b0764e6ae5edeb] from db
2020-12-10 10:55:43,453 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 10:55:43,453 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19c3f38b0764e6ae5edeb'}'}
2020-12-10 10:55:43,465 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd19c3f38b0764e6ae5edeb]
2020-12-10 10:55:43,488 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd19c3f38b0764e6ae5edeb] Result: true
2020-12-10 10:55:44,215 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5fd19c3f38b0764e6ae5edeb] from db
2020-12-10 10:55:44,218 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] Found result of the request [5fd19c3f38b0764e6ae5edeb]
2020-12-10 10:55:44,246 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [deleteRecord] The request 5fd19c3f38b0764e6ae5edeb is deleted completely!
2020-12-10 10:55:44,249 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501234"}
2020-12-10 10:55:44,249 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-12-10 10:55:44,249 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-12-10 10:55:44,250 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-117208501234"}
2020-12-10 10:57:16,086 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-12-10 10:57:16,087 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 10:57:16,087 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-12-10 10:57:16,087 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 10:57:16,088 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-12-10 10:57:16,088 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-12-10 10:57:16,088 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: 75fc37ab-6370-44c1-bf51-c95938f24f4b
2020-12-10 10:57:16,088 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 10:57:16,088 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 10:57:16,089 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-12-10 10:57:16,089 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 228
2020-12-10 10:57:16,089 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-12-10 10:57:16,089 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 10:57:16,089 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-12-10 10:57:16,089 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 10:57:16,090 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 10:57:16,090 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-12-10 10:57:16,092 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-12-10 10:57:16,093 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-12-10 10:57:16,093 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 10:57:16,093 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 10:57:16,097 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-12-10 10:57:16,100 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501234"}'
2020-12-10 10:57:16,101 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'charge'
2020-12-10 10:57:16,102 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501234',datetime='null'}
2020-12-10 10:57:16,102 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 159013753118-117208501234
2020-12-10 10:57:16,102 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-12-10 10:57:16,103 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 159013753118-117208501234
2020-12-10 10:57:16,103 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-12-10 10:57:16,106 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [insertRequest][to DB] Result ID: 5fd19c9c38b0764e6ae5eded
2020-12-10 10:57:16,107 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 10:57:16 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19c9c38b0764e6ae5eded'}'}
2020-12-10 10:57:16,107 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 10:57:16,107 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] no matching keyword found
2020-12-10 10:57:16,107 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 10:57:16,108 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] no matching telco found
2020-12-10 10:57:16,108 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 10:57:16,108 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 10:57:16,109 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 10:57:16 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501234',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19c9c38b0764e6ae5eded'}'}
2020-12-10 10:57:16,109 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd19c9c38b0764e6ae5eded] from db
2020-12-10 10:57:17,114 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd19c9c38b0764e6ae5eded] from db
2020-12-10 10:57:18,120 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd19c9c38b0764e6ae5eded] from db
2020-12-10 10:57:19,125 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd19c9c38b0764e6ae5eded] from db
2020-12-10 10:57:19,127 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-12-10 10:57:19,135 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [deleteRecord] The request 5fd19c9c38b0764e6ae5eded is deleted completely!
2020-12-10 10:57:19,137 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501234"}
2020-12-10 10:57:19,138 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-12-10 10:57:19,138 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-12-10 10:57:19,138 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-117208501234"}
2020-12-10 10:57:36,549 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> POST /payment/apigw
2020-12-10 10:57:36,549 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 10:57:36,550 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-type: application/json
2020-12-10 10:57:36,550 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 10:57:36,550 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept: */*
2020-12-10 10:57:36,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> cache-control: no-cache
2020-12-10 10:57:36,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> postman-token: 9e9466a9-99be-4219-8e59-f751cb6ed3b8
2020-12-10 10:57:36,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 10:57:36,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 10:57:36,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> connection: keep-alive
2020-12-10 10:57:36,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-length: 228
2020-12-10 10:57:36,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>
2020-12-10 10:57:36,552 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 10:57:36,552 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Ip Adress '127.0.0.1' is valid
2020-12-10 10:57:36,552 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 10:57:36,553 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 10:57:36,553 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Looking for the header start with 'PGW'
2020-12-10 10:57:36,554 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] checking authentication for user 'pgw_fptplay'
2020-12-10 10:57:36,554 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] security context was null, so authorizating user
2020-12-10 10:57:36,555 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 10:57:36,555 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 10:57:36,559 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] authorizated user 'pgw_fptplay', setting security context
2020-12-10 10:57:36,561 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-6] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501235"}'
2020-12-10 10:57:36,563 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] Service from the request is 'charge'
2020-12-10 10:57:36,564 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',datetime='null'}
2020-12-10 10:57:36,565 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyParameter] Starting to check request: 159013753118-117208501235
2020-12-10 10:57:36,565 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyParameter] Result: true
2020-12-10 10:57:36,566 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Starting to check request: 159013753118-117208501235
2020-12-10 10:57:36,566 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Result: true
2020-12-10 10:57:36,568 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [insertRequest][to DB] Result ID: 5fd19cb038b0764e6ae5edef
2020-12-10 10:57:36,569 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-6] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 10:57:36 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19cb038b0764e6ae5edef'}'}
2020-12-10 10:57:36,569 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] msgKeyword = DOWNLOAD
2020-12-10 10:57:36,570 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] no matching keyword found
2020-12-10 10:57:36,570 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] msgKeyword = DOWNLOAD
2020-12-10 10:57:36,570 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] no matching telco found
2020-12-10 10:57:36,571 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] msgKeyword = DOWNLOAD
2020-12-10 10:57:36,571 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 10:57:36,572 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-6] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 10:57:36 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19cb038b0764e6ae5edef'}'}
2020-12-10 10:57:36,572 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5fd19cb038b0764e6ae5edef] from db
2020-12-10 10:57:37,577 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5fd19cb038b0764e6ae5edef] from db
2020-12-10 10:57:38,585 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5fd19cb038b0764e6ae5edef] from db
2020-12-10 10:57:39,591 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5fd19cb038b0764e6ae5edef] from db
2020-12-10 10:57:39,596 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-12-10 10:57:39,600 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [deleteRecord] The request 5fd19cb038b0764e6ae5edef is deleted completely!
2020-12-10 10:57:39,601 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501235"}
2020-12-10 10:57:39,602 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< 200 OK
2020-12-10 10:57:39,602 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|<
2020-12-10 10:57:39,602 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-117208501235"}
2020-12-10 10:58:31,775 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 10:58:31,779 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19c9c38b0764e6ae5eded'}'}
2020-12-10 10:58:31,789 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd19c9c38b0764e6ae5eded] Result: false
2020-12-10 10:59:47,094 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 10:59:47,094 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19cb038b0764e6ae5edef'}'}
2020-12-10 10:59:47,097 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd19cb038b0764e6ae5edef] Result: false
2020-12-10 11:09:36,519 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] Routing file updated
2020-12-10 11:09:36,610 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] New routes created.
2020-12-10 11:09:52,609 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-12-10 11:09:52,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 11:09:52,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-12-10 11:09:52,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 11:09:52,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-12-10 11:09:52,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-12-10 11:09:52,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 76c33611-8daf-42fa-ae0d-58a5ecd65c8c
2020-12-10 11:09:52,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 11:09:52,612 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 11:09:52,612 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-12-10 11:09:52,612 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 241
2020-12-10 11:09:52,612 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-12-10 11:09:52,612 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 11:09:52,612 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-12-10 11:09:52,613 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 11:09:52,613 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 11:09:52,613 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-12-10 11:09:52,617 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-12-10 11:09:52,618 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-12-10 11:09:52,618 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 11:09:52,618 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 11:09:52,624 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-12-10 11:09:52,626 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501235","price": 100}'
2020-12-10 11:09:52,636 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-12-10 11:09:52,637 ERROR com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doMainAction] Exception: 'Conflicting setter definitions for property "trans_id": com.dz.apigw.obj.TelcoChargeRequest#setTrans_id(1 params) vs com.dz.apigw.obj.TelcoChargeRequest#setTransId(1 params)
 at [Source: (String)" {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501235","price": 100}"; line: 1, column: 2]'
2020-12-10 11:09:52,641 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501235","price": 100}
2020-12-10 11:09:52,641 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-12-10 11:09:52,641 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-12-10 11:09:52,642 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":null,"message":null}
2020-12-10 11:10:15,497 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] Routing file updated
2020-12-10 11:10:15,542 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] New routes created.
2020-12-10 11:10:39,269 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] Routing file updated
2020-12-10 11:10:39,283 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] New routes created.
2020-12-10 11:10:42,432 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-12-10 11:10:42,434 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 11:10:42,434 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-12-10 11:10:42,434 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 11:10:42,434 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-12-10 11:10:42,435 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-12-10 11:10:42,435 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 05665b26-978e-441e-9762-c0165ce4c975
2020-12-10 11:10:42,435 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 11:10:42,435 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 11:10:42,435 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-12-10 11:10:42,435 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 241
2020-12-10 11:10:42,436 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-12-10 11:10:42,436 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 11:10:42,436 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-12-10 11:10:42,436 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 11:10:42,436 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 11:10:42,436 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-12-10 11:10:42,439 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-12-10 11:10:42,439 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-12-10 11:10:42,439 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 11:10:42,439 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 11:10:42,446 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-12-10 11:10:42,448 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501235","price": 100}'
2020-12-10 11:10:42,453 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-12-10 11:10:42,464 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',datetime='null',price='100'}
2020-12-10 11:10:42,477 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 159013753118-117208501235
2020-12-10 11:10:42,477 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-12-10 11:10:42,478 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 159013753118-117208501235
2020-12-10 11:10:42,478 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-12-10 11:10:42,583 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5fd19fc238b0764e6ae5edf4
2020-12-10 11:10:42,585 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 11:10:42 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19fc238b0764e6ae5edf4'}'}
2020-12-10 11:10:42,586 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 11:10:42,586 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching keyword found
2020-12-10 11:10:42,586 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 11:10:42,586 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching telco found
2020-12-10 11:10:42,587 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 11:10:42,587 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 11:10:42,662 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 11:10:42 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19fc238b0764e6ae5edf4'}'}
2020-12-10 11:10:42,664 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd19fc238b0764e6ae5edf4] from db
2020-12-10 11:10:43,728 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd19fc238b0764e6ae5edf4] from db
2020-12-10 11:10:44,733 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd19fc238b0764e6ae5edf4] from db
2020-12-10 11:10:45,738 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd19fc238b0764e6ae5edf4] from db
2020-12-10 11:10:45,742 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-12-10 11:10:45,754 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5fd19fc238b0764e6ae5edf4 is deleted completely!
2020-12-10 11:10:45,758 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501235","price": 100}
2020-12-10 11:10:45,759 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-12-10 11:10:45,760 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-12-10 11:10:45,760 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-117208501235"}
2020-12-10 11:11:58,266 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 11:11:58,271 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd19fc238b0764e6ae5edf4'}'}
2020-12-10 11:11:58,288 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd19fc238b0764e6ae5edf4] Result: false
2020-12-10 11:16:19,381 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] Routing file updated
2020-12-10 11:16:19,403 DEBUG com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] Deleting routes:
2020-12-10 11:16:19,605 DEBUG com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1]   closed: PAYMENTGW.TELCO.RENEW.REQUEST.VINAPHONE
2020-12-10 11:16:19,633 DEBUG com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1]   closed: PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE
2020-12-10 11:16:19,649 DEBUG com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1]   closed: PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS
2020-12-10 11:16:19,699 DEBUG com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1]   closed: PAYMENTGW.TELCO.OTPCONFIRM.REQUEST.VINAPHONE
2020-12-10 11:16:19,712 DEBUG com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1]   closed: PAYMENTGW.APIGW.FPTPLAY.ACCOUNT_CHECKING
2020-12-10 11:16:19,743 DEBUG com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1]   closed: PAYMENTGW.APIGW.FPTPLAY.PAYMENT_NOTIFICATION
2020-12-10 11:16:19,753 DEBUG com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1]   closed: PAYMENTGW.TELCO.MT.REQUEST.VINAPHONE
2020-12-10 11:16:19,753 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] Old routes deleted.
2020-12-10 11:16:19,830 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] New routes created.
2020-12-10 11:30:59,774 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-12-10 11:30:59,805 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-12-10 11:31:02,244 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-12-10 11:31:02,246 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 11:31:02,246 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-12-10 11:31:02,246 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 11:31:02,246 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-12-10 11:31:02,246 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-12-10 11:31:02,247 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: f8844133-d9d8-47be-b356-9246f5171a92
2020-12-10 11:31:02,247 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 11:31:02,247 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 11:31:02,247 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-12-10 11:31:02,247 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 234
2020-12-10 11:31:02,247 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-12-10 11:31:02,248 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 11:31:02,248 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-12-10 11:31:02,248 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 11:31:02,248 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 11:31:02,248 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-12-10 11:31:02,335 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-12-10 11:31:02,335 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-12-10 11:31:02,336 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 11:31:02,336 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 11:31:02,349 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-12-10 11:31:02,401 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "viettel",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "2",
	"service": "otp_confirm"
}'
2020-12-10 11:31:02,422 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'otp_confirm'
2020-12-10 11:31:02,469 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doOTPConfirm] doing otp confirm...
2020-12-10 11:31:02,471 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 2
2020-12-10 11:31:02,472 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-12-10 11:31:02,472 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 2
2020-12-10 11:31:02,472 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-12-10 11:31:02,649 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [findRecord] Found record: Id=5ebfab22226bfbf62efc7543
2020-12-10 11:31:02,652 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfab22226bfbf62efc7543] from db
2020-12-10 11:31:03,658 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfab22226bfbf62efc7543] from db
2020-12-10 11:31:04,665 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfab22226bfbf62efc7543] from db
2020-12-10 11:31:05,672 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfab22226bfbf62efc7543] from db
2020-12-10 11:31:05,681 WARN com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-12-10 11:31:05,723 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-12-10 11:31:05,723 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "viettel",
2020-12-10 11:31:05,723 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-12-10 11:31:05,724 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-12-10 11:31:05,724 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-12-10 11:31:05,724 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-12-10 11:31:05,724 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-12-10 11:31:05,724 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-12-10 11:31:05,724 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-12-10 11:31:05,724 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "2",
2020-12-10 11:31:05,724 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "otp_confirm"
2020-12-10 11:31:05,725 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-12-10 11:31:05,725 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-12-10 11:31:05,725 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-12-10 11:31:05,726 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"2","message":null}
2020-12-10 11:31:25,863 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-12-10 11:31:25,864 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 11:31:25,864 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-12-10 11:31:25,864 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 11:31:25,864 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-12-10 11:31:25,864 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-12-10 11:31:25,865 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: 947974aa-d3ad-4077-88f2-ff26d22682ad
2020-12-10 11:31:25,865 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 11:31:25,865 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 11:31:25,865 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-12-10 11:31:25,865 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 238
2020-12-10 11:31:25,865 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-12-10 11:31:25,866 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 11:31:25,866 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-12-10 11:31:25,866 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 11:31:25,866 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 11:31:25,866 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-12-10 11:31:25,871 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-12-10 11:31:25,871 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-12-10 11:31:25,872 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 11:31:25,872 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 11:31:25,877 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-12-10 11:31:25,880 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "viettel",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "10000",
	"service": "otp_confirm"
}'
2020-12-10 11:31:25,881 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'otp_confirm'
2020-12-10 11:31:25,882 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doOTPConfirm] doing otp confirm...
2020-12-10 11:31:25,883 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 10000
2020-12-10 11:31:25,883 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-12-10 11:31:25,883 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 10000
2020-12-10 11:31:25,883 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-12-10 11:31:25,925 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [insertRequest][to DB] Result ID: 5fd1a49d38b0766b11bb5eca
2020-12-10 11:31:25,926 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='OTP_CONFIRM_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='OTPCONFIRM_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='viettel', service='otp_confirm', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='null',trans_id='10000',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1a49d38b0766b11bb5eca'}'}
2020-12-10 11:31:25,928 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-12-10 11:31:25,928 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] no matching telco found
2020-12-10 11:31:25,929 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-12-10 11:31:25,930 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.OTPCONFIRM.REQUEST.VIETTEL.MPS, keyword = null
2020-12-10 11:31:25,958 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.OTPCONFIRM.REQUEST.VIETTEL.MPS']= Notification {notificationType='OTP_CONFIRM_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='OTPCONFIRM_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='viettel', service='otp_confirm', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='null',trans_id='10000',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1a49d38b0766b11bb5eca'}'}
2020-12-10 11:31:25,960 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5fd1a49d38b0766b11bb5eca] from db
2020-12-10 11:31:26,965 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5fd1a49d38b0766b11bb5eca] from db
2020-12-10 11:31:27,971 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5fd1a49d38b0766b11bb5eca] from db
2020-12-10 11:31:28,978 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5fd1a49d38b0766b11bb5eca] from db
2020-12-10 11:31:28,983 WARN com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-12-10 11:31:28,985 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-12-10 11:31:28,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "viettel",
2020-12-10 11:31:28,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-12-10 11:31:28,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-12-10 11:31:28,987 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-12-10 11:31:28,987 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-12-10 11:31:28,987 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-12-10 11:31:28,987 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-12-10 11:31:28,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-12-10 11:31:28,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "10000",
2020-12-10 11:31:28,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "otp_confirm"
2020-12-10 11:31:28,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-12-10 11:31:28,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-12-10 11:31:28,989 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-12-10 11:31:28,989 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":-1,"trans_id":"10000","message":null}
2020-12-10 11:32:41,444 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [OTP_CONFIRM_RESPONSE]...
2020-12-10 11:32:41,446 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='OTP_CONFIRM_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='OTPCONFIRM_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1a49d38b0766b11bb5eca'}'}
2020-12-10 11:32:41,462 INFO com.dz.apigw.services.OTPConfirmServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1a49d38b0766b11bb5eca]
2020-12-10 11:32:41,500 INFO com.dz.apigw.services.OTPConfirmServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1a49d38b0766b11bb5eca] Result: true
2020-12-10 16:33:56,565 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-12-10 16:33:56,646 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-12-10 16:34:16,698 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-12-10 16:34:16,744 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-12-10 16:35:10,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:35:10,287 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:35:10,287 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-12-10 16:35:10,289 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:35:10,289 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-12-10 16:35:10,290 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:35:10,290 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: eee43037-6aaf-4377-901b-88949ed9a525
2020-12-10 16:35:10,290 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:35:10,291 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:35:10,291 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-12-10 16:35:10,291 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 241
2020-12-10 16:35:10,292 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-12-10 16:35:10,292 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:35:10,293 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-12-10 16:35:10,294 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:35:10,295 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:35:10,295 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-12-10 16:35:10,488 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-12-10 16:35:10,488 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-12-10 16:35:10,489 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:35:10,489 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:35:10,507 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:35:10,640 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501235","price": 100}'
2020-12-10 16:35:10,718 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-12-10 16:35:10,773 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',datetime='null',price='100'}
2020-12-10 16:35:10,807 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 159013753118-117208501235
2020-12-10 16:35:10,807 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-12-10 16:35:10,808 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 159013753118-117208501235
2020-12-10 16:35:10,811 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-12-10 16:35:11,060 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5fd1ebce38b076b24c69a418
2020-12-10 16:35:11,062 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:35:10 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ebce38b076b24c69a418'}'}
2020-12-10 16:35:11,063 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 16:35:11,063 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching keyword found
2020-12-10 16:35:11,069 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 16:35:11,071 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching telco found
2020-12-10 16:35:11,072 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 16:35:11,072 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:35:11,160 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:35:10 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ebce38b076b24c69a418'}'}
2020-12-10 16:35:11,161 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd1ebce38b076b24c69a418] from db
2020-12-10 16:35:11,552 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:35:11,560 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ebce38b076b24c69a418'}'}
2020-12-10 16:35:11,586 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1ebce38b076b24c69a418]
2020-12-10 16:35:11,602 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1ebce38b076b24c69a418] Result: true
2020-12-10 16:35:12,179 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd1ebce38b076b24c69a418] from db
2020-12-10 16:35:12,189 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] Found result of the request [5fd1ebce38b076b24c69a418]
2020-12-10 16:35:12,215 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5fd1ebce38b076b24c69a418 is deleted completely!
2020-12-10 16:35:12,243 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501235","price": 100}
2020-12-10 16:35:12,243 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-12-10 16:35:12,244 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-12-10 16:35:12,244 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":0,"trans_id":"159013753118-117208501235"}
2020-12-10 16:36:13,512 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:36:13,513 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:36:13,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-12-10 16:36:13,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:36:13,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-12-10 16:36:13,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:36:13,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: edebd399-9dbb-4c3a-a583-c298d6e33794
2020-12-10 16:36:13,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:36:13,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:36:13,515 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-12-10 16:36:13,515 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 241
2020-12-10 16:36:13,515 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-12-10 16:36:13,515 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:36:13,515 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-12-10 16:36:13,515 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:36:13,516 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:36:13,516 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-12-10 16:36:13,519 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-12-10 16:36:13,519 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-12-10 16:36:13,519 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:36:13,520 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:36:13,525 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:36:13,528 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501235","price": 100}'
2020-12-10 16:36:13,530 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-12-10 16:36:13,531 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',datetime='null',price='100'}
2020-12-10 16:36:13,532 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 159013753118-117208501235
2020-12-10 16:36:13,532 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-12-10 16:36:13,532 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 159013753118-117208501235
2020-12-10 16:36:13,532 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-12-10 16:36:13,547 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5fd1ec0d38b076b24c69a41a
2020-12-10 16:36:13,548 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:36:13 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ec0d38b076b24c69a41a'}'}
2020-12-10 16:36:13,549 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 16:36:13,549 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching keyword found
2020-12-10 16:36:13,550 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 16:36:13,551 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching telco found
2020-12-10 16:36:13,551 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 16:36:13,552 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:36:13,554 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:36:13 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-117208501235',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ec0d38b076b24c69a41a'}'}
2020-12-10 16:36:13,556 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5fd1ec0d38b076b24c69a41a] from db
2020-12-10 16:36:13,617 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:36:13,618 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ec0d38b076b24c69a41a'}'}
2020-12-10 16:36:13,645 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1ec0d38b076b24c69a41a]
2020-12-10 16:36:13,648 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1ec0d38b076b24c69a41a] Result: true
2020-12-10 16:36:14,564 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5fd1ec0d38b076b24c69a41a] from db
2020-12-10 16:36:14,567 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] Found result of the request [5fd1ec0d38b076b24c69a41a]
2020-12-10 16:36:14,578 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [deleteRecord] The request 5fd1ec0d38b076b24c69a41a is deleted completely!
2020-12-10 16:36:14,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-117208501235","price": 100}
2020-12-10 16:36:14,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-12-10 16:36:14,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-12-10 16:36:14,582 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-117208501235"}
2020-12-10 16:37:43,690 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:37:43,691 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:37:43,691 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-12-10 16:37:43,692 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:37:43,692 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-12-10 16:37:43,692 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:37:43,692 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: 7e2c31d1-63b1-4f51-acc3-6b5a15aba5d7
2020-12-10 16:37:43,693 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:37:43,693 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:37:43,693 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-12-10 16:37:43,693 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 242
2020-12-10 16:37:43,694 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-12-10 16:37:43,694 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:37:43,694 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-12-10 16:37:43,694 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:37:43,694 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:37:43,694 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-12-10 16:37:43,696 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-12-10 16:37:43,696 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-12-10 16:37:43,696 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:37:43,697 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:37:43,701 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:37:43,703 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012315","price": 100}'
2020-12-10 16:37:43,705 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'charge'
2020-12-10 16:37:43,707 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012315',datetime='null',price='100'}
2020-12-10 16:37:43,707 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 159013753118-1172085012315
2020-12-10 16:37:43,707 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-12-10 16:37:43,708 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012315
2020-12-10 16:37:43,708 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-12-10 16:37:43,711 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [insertRequest][to DB] Result ID: 5fd1ec6738b076b24c69a41c
2020-12-10 16:37:43,712 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:37:43 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012315',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ec6738b076b24c69a41c'}'}
2020-12-10 16:37:43,712 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 16:37:43,712 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] no matching keyword found
2020-12-10 16:37:43,712 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 16:37:43,713 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] no matching telco found
2020-12-10 16:37:43,713 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 16:37:43,713 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:37:43,714 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:37:43 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012315',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ec6738b076b24c69a41c'}'}
2020-12-10 16:37:43,715 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd1ec6738b076b24c69a41c] from db
2020-12-10 16:37:43,770 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:37:43,771 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ec6738b076b24c69a41c'}'}
2020-12-10 16:37:43,775 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1ec6738b076b24c69a41c]
2020-12-10 16:37:43,787 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1ec6738b076b24c69a41c] Result: true
2020-12-10 16:37:44,730 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd1ec6738b076b24c69a41c] from db
2020-12-10 16:37:44,734 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] Found result of the request [5fd1ec6738b076b24c69a41c]
2020-12-10 16:37:44,740 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [deleteRecord] The request 5fd1ec6738b076b24c69a41c is deleted completely!
2020-12-10 16:37:44,742 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012315","price": 100}
2020-12-10 16:37:44,742 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-12-10 16:37:44,742 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-12-10 16:37:44,742 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012315"}
2020-12-10 16:38:21,271 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:38:21,272 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:38:21,272 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-type: application/json
2020-12-10 16:38:21,272 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:38:21,273 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept: */*
2020-12-10 16:38:21,273 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:38:21,273 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> postman-token: 0711b64c-df8f-4447-bc80-2250db2fbadf
2020-12-10 16:38:21,274 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:38:21,274 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:38:21,274 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> connection: keep-alive
2020-12-10 16:38:21,275 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-length: 242
2020-12-10 16:38:21,275 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>
2020-12-10 16:38:21,275 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:38:21,275 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Ip Adress '127.0.0.1' is valid
2020-12-10 16:38:21,275 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:38:21,276 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:38:21,276 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Looking for the header start with 'PGW'
2020-12-10 16:38:21,278 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] checking authentication for user 'pgw_fptplay'
2020-12-10 16:38:21,278 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] security context was null, so authorizating user
2020-12-10 16:38:21,279 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:38:21,279 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:38:21,285 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:38:21,287 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-7] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 16:38:21,289 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] Service from the request is 'charge'
2020-12-10 16:38:21,290 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 16:38:21,291 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 16:38:21,291 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Result: true
2020-12-10 16:38:21,292 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 16:38:21,292 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Result: true
2020-12-10 16:38:21,300 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [insertRequest][to DB] Result ID: 5fd1ec8d38b076b24c69a41e
2020-12-10 16:38:21,300 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:38:21 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ec8d38b076b24c69a41e'}'}
2020-12-10 16:38:21,301 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 16:38:21,301 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] no matching keyword found
2020-12-10 16:38:21,302 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 16:38:21,302 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] no matching telco found
2020-12-10 16:38:21,302 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 16:38:21,303 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:38:21,304 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:38:21 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ec8d38b076b24c69a41e'}'}
2020-12-10 16:38:21,304 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5fd1ec8d38b076b24c69a41e] from db
2020-12-10 16:38:21,367 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:38:21,367 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ec8d38b076b24c69a41e'}'}
2020-12-10 16:38:21,371 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1ec8d38b076b24c69a41e]
2020-12-10 16:38:21,384 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1ec8d38b076b24c69a41e] Result: true
2020-12-10 16:38:22,323 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5fd1ec8d38b076b24c69a41e] from db
2020-12-10 16:38:22,331 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] Found result of the request [5fd1ec8d38b076b24c69a41e]
2020-12-10 16:38:22,335 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [deleteRecord] The request 5fd1ec8d38b076b24c69a41e is deleted completely!
2020-12-10 16:38:22,337 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 16:38:22,338 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< 200 OK
2020-12-10 16:38:22,338 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|<
2020-12-10 16:38:22,338 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 16:43:25,260 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:43:25,264 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:43:25,265 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-type: application/json
2020-12-10 16:43:25,265 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:43:25,265 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept: */*
2020-12-10 16:43:25,266 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:43:25,266 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> postman-token: 6799aca5-daae-443c-882c-e2ed2b0677e8
2020-12-10 16:43:25,266 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:43:25,267 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:43:25,267 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> connection: keep-alive
2020-12-10 16:43:25,267 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-length: 242
2020-12-10 16:43:25,268 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>
2020-12-10 16:43:25,268 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:43:25,268 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Ip Adress '127.0.0.1' is valid
2020-12-10 16:43:25,269 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:43:25,269 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:43:25,269 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Looking for the header start with 'PGW'
2020-12-10 16:43:25,275 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] checking authentication for user 'pgw_fptplay'
2020-12-10 16:43:25,275 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] security context was null, so authorizating user
2020-12-10 16:43:25,275 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:43:25,276 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:43:25,279 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:43:25,292 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-9] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 16:43:25,295 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] Service from the request is 'charge'
2020-12-10 16:43:25,297 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 16:43:25,298 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 16:43:25,298 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Result: true
2020-12-10 16:43:25,299 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 16:43:25,299 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Result: true
2020-12-10 16:43:25,315 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [insertRequest][to DB] Result ID: 5fd1edbd38b076b24c69a420
2020-12-10 16:43:25,316 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:43:25 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1edbd38b076b24c69a420'}'}
2020-12-10 16:43:25,316 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 16:43:25,316 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] no matching keyword found
2020-12-10 16:43:25,316 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 16:43:25,316 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] no matching telco found
2020-12-10 16:43:25,317 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 16:43:25,317 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:43:25,318 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:43:25 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1edbd38b076b24c69a420'}'}
2020-12-10 16:43:25,319 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5fd1edbd38b076b24c69a420] from db
2020-12-10 16:43:25,437 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:43:25,439 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1edbd38b076b24c69a420'}'}
2020-12-10 16:43:25,494 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1edbd38b076b24c69a420]
2020-12-10 16:43:25,497 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1edbd38b076b24c69a420] Result: true
2020-12-10 16:43:26,329 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5fd1edbd38b076b24c69a420] from db
2020-12-10 16:43:26,451 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] Found result of the request [5fd1edbd38b076b24c69a420]
2020-12-10 16:43:26,461 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [deleteRecord] The request 5fd1edbd38b076b24c69a420 is deleted completely!
2020-12-10 16:43:26,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 16:43:26,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< 200 OK
2020-12-10 16:43:26,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|<
2020-12-10 16:43:26,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 16:45:23,839 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:45:23,925 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:45:23,925 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-12-10 16:45:23,925 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:45:23,926 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-12-10 16:45:23,926 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:45:23,926 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 5435575c-7552-4aeb-bdb3-de0089839655
2020-12-10 16:45:23,926 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:45:23,927 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:45:23,928 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-12-10 16:45:23,928 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 242
2020-12-10 16:45:23,928 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-12-10 16:45:23,928 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:45:23,928 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-12-10 16:45:23,929 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:45:23,929 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:45:23,929 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-12-10 16:45:23,933 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-12-10 16:45:23,934 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-12-10 16:45:23,934 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:45:23,935 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:45:23,939 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:45:23,940 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 16:45:23,950 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-12-10 16:45:23,951 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 16:45:23,951 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 16:45:23,952 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-12-10 16:45:23,952 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 16:45:23,953 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-12-10 16:45:23,959 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5fd1ee3338b076b24c69a422
2020-12-10 16:45:23,960 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:45:23 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ee3338b076b24c69a422'}'}
2020-12-10 16:45:23,960 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 16:45:23,961 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching keyword found
2020-12-10 16:45:23,961 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 16:45:23,962 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching telco found
2020-12-10 16:45:23,962 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 16:45:23,963 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:45:23,965 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:45:23 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ee3338b076b24c69a422'}'}
2020-12-10 16:45:23,965 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd1ee3338b076b24c69a422] from db
2020-12-10 16:45:24,021 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:45:24,022 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ee3338b076b24c69a422'}'}
2020-12-10 16:45:24,025 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1ee3338b076b24c69a422]
2020-12-10 16:45:24,035 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1ee3338b076b24c69a422] Result: true
2020-12-10 16:45:24,969 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd1ee3338b076b24c69a422] from db
2020-12-10 16:45:24,974 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] Found result of the request [5fd1ee3338b076b24c69a422]
2020-12-10 16:45:24,984 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5fd1ee3338b076b24c69a422 is deleted completely!
2020-12-10 16:45:24,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 16:45:24,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-12-10 16:45:24,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-12-10 16:45:24,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 16:48:12,026 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:48:12,028 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:48:12,028 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-12-10 16:48:12,028 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:48:12,028 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-12-10 16:48:12,029 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:48:12,029 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: ff7fa035-2ba3-4446-aad3-3f540eaeabb8
2020-12-10 16:48:12,029 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:48:12,029 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:48:12,029 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-12-10 16:48:12,029 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 242
2020-12-10 16:48:12,030 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-12-10 16:48:12,030 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:48:12,030 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-12-10 16:48:12,030 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:48:12,030 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:48:12,030 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-12-10 16:48:12,034 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-12-10 16:48:12,035 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-12-10 16:48:12,035 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:48:12,035 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:48:12,038 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:48:12,044 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 16:48:12,047 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-12-10 16:48:12,048 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 16:48:12,048 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 16:48:12,049 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-12-10 16:48:12,049 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 16:48:12,049 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-12-10 16:48:12,059 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5fd1eedc38b076b24c69a424
2020-12-10 16:48:12,062 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:48:12 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1eedc38b076b24c69a424'}'}
2020-12-10 16:48:12,063 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 16:48:12,064 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching keyword found
2020-12-10 16:48:12,064 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 16:48:12,065 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching telco found
2020-12-10 16:48:12,065 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 16:48:12,065 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:48:12,067 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:48:12 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1eedc38b076b24c69a424'}'}
2020-12-10 16:48:12,068 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5fd1eedc38b076b24c69a424] from db
2020-12-10 16:48:12,144 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:48:12,144 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1eedc38b076b24c69a424'}'}
2020-12-10 16:48:12,151 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1eedc38b076b24c69a424]
2020-12-10 16:48:12,153 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1eedc38b076b24c69a424] Result: true
2020-12-10 16:48:13,074 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5fd1eedc38b076b24c69a424] from db
2020-12-10 16:48:13,076 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] Found result of the request [5fd1eedc38b076b24c69a424]
2020-12-10 16:48:13,082 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [deleteRecord] The request 5fd1eedc38b076b24c69a424 is deleted completely!
2020-12-10 16:48:13,084 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 16:48:13,085 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-12-10 16:48:13,085 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-12-10 16:48:13,085 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 16:50:09,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:50:09,445 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:50:09,446 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-12-10 16:50:09,446 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:50:09,446 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-12-10 16:50:09,446 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:50:09,446 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: 97d9f41d-de50-4d81-a085-60adad91ba3a
2020-12-10 16:50:09,447 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:50:09,447 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:50:09,447 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-12-10 16:50:09,447 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 242
2020-12-10 16:50:09,447 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-12-10 16:50:09,447 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:50:09,447 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-12-10 16:50:09,448 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:50:09,448 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:50:09,448 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-12-10 16:50:09,450 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-12-10 16:50:09,451 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-12-10 16:50:09,451 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:50:09,452 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:50:09,457 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:50:09,458 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 16:50:09,462 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'charge'
2020-12-10 16:50:09,463 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 16:50:09,465 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 16:50:09,465 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-12-10 16:50:09,465 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 16:50:09,467 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-12-10 16:50:09,496 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [insertRequest][to DB] Result ID: 5fd1ef5138b076b24c69a426
2020-12-10 16:50:09,497 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:50:09 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ef5138b076b24c69a426'}'}
2020-12-10 16:50:09,497 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 16:50:09,498 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] no matching keyword found
2020-12-10 16:50:09,498 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 16:50:09,499 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] no matching telco found
2020-12-10 16:50:09,499 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 16:50:09,499 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:50:09,500 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:50:09 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ef5138b076b24c69a426'}'}
2020-12-10 16:50:09,501 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd1ef5138b076b24c69a426] from db
2020-12-10 16:50:09,615 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:50:09,617 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ef5138b076b24c69a426'}'}
2020-12-10 16:50:09,633 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1ef5138b076b24c69a426]
2020-12-10 16:50:09,644 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1ef5138b076b24c69a426] Result: true
2020-12-10 16:50:10,518 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd1ef5138b076b24c69a426] from db
2020-12-10 16:50:10,522 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] Found result of the request [5fd1ef5138b076b24c69a426]
2020-12-10 16:50:10,528 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [deleteRecord] The request 5fd1ef5138b076b24c69a426 is deleted completely!
2020-12-10 16:50:10,530 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 16:50:10,530 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-12-10 16:50:10,530 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-12-10 16:50:10,530 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 16:50:53,165 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:50:53,166 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:50:53,167 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-type: application/json
2020-12-10 16:50:53,167 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:50:53,167 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept: */*
2020-12-10 16:50:53,168 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:50:53,168 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> postman-token: 7cb7b800-ae5f-45a7-8002-ff83fb3dc829
2020-12-10 16:50:53,168 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:50:53,168 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:50:53,168 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> connection: keep-alive
2020-12-10 16:50:53,169 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-length: 242
2020-12-10 16:50:53,169 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>
2020-12-10 16:50:53,169 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:50:53,169 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Ip Adress '127.0.0.1' is valid
2020-12-10 16:50:53,169 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:50:53,169 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:50:53,170 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Looking for the header start with 'PGW'
2020-12-10 16:50:53,171 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] checking authentication for user 'pgw_fptplay'
2020-12-10 16:50:53,172 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] security context was null, so authorizating user
2020-12-10 16:50:53,172 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:50:53,172 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:50:53,176 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:50:53,179 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-7] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 16:50:53,180 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] Service from the request is 'charge'
2020-12-10 16:50:53,181 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 16:50:53,181 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 16:50:53,182 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Result: true
2020-12-10 16:50:53,182 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 16:50:53,182 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Result: true
2020-12-10 16:50:53,193 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [insertRequest][to DB] Result ID: 5fd1ef7d38b076b24c69a428
2020-12-10 16:50:53,193 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:50:53 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ef7d38b076b24c69a428'}'}
2020-12-10 16:50:53,194 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 16:50:53,194 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] no matching keyword found
2020-12-10 16:50:53,194 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 16:50:53,195 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] no matching telco found
2020-12-10 16:50:53,195 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 16:50:53,195 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:50:53,196 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:50:53 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ef7d38b076b24c69a428'}'}
2020-12-10 16:50:53,196 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5fd1ef7d38b076b24c69a428] from db
2020-12-10 16:50:53,265 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:50:53,265 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1ef7d38b076b24c69a428'}'}
2020-12-10 16:50:53,277 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1ef7d38b076b24c69a428]
2020-12-10 16:50:53,279 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1ef7d38b076b24c69a428] Result: true
2020-12-10 16:50:54,206 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5fd1ef7d38b076b24c69a428] from db
2020-12-10 16:50:54,208 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] Found result of the request [5fd1ef7d38b076b24c69a428]
2020-12-10 16:50:54,210 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [deleteRecord] The request 5fd1ef7d38b076b24c69a428 is deleted completely!
2020-12-10 16:50:54,214 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 16:50:54,214 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< 200 OK
2020-12-10 16:50:54,214 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|<
2020-12-10 16:50:54,215 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 16:53:25,295 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:53:25,296 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:53:25,296 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-type: application/json
2020-12-10 16:53:25,297 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:53:25,297 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept: */*
2020-12-10 16:53:25,298 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:53:25,298 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> postman-token: ff781278-6e5d-4a16-b064-5712c9f9fa98
2020-12-10 16:53:25,298 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:53:25,298 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:53:25,299 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> connection: keep-alive
2020-12-10 16:53:25,299 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-length: 242
2020-12-10 16:53:25,300 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>
2020-12-10 16:53:25,301 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:53:25,302 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Ip Adress '127.0.0.1' is valid
2020-12-10 16:53:25,302 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:53:25,302 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:53:25,303 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Looking for the header start with 'PGW'
2020-12-10 16:53:25,305 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] checking authentication for user 'pgw_fptplay'
2020-12-10 16:53:25,305 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] security context was null, so authorizating user
2020-12-10 16:53:25,305 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:53:25,305 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:53:25,308 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:53:25,309 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-9] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 16:53:25,312 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] Service from the request is 'charge'
2020-12-10 16:53:25,313 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 16:53:25,313 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 16:53:25,314 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Result: true
2020-12-10 16:53:25,314 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 16:53:25,314 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Result: true
2020-12-10 16:53:25,320 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [insertRequest][to DB] Result ID: 5fd1f01538b076b24c69a42a
2020-12-10 16:53:25,321 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:53:25 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f01538b076b24c69a42a'}'}
2020-12-10 16:53:25,321 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 16:53:25,321 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] no matching keyword found
2020-12-10 16:53:25,321 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 16:53:25,322 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] no matching telco found
2020-12-10 16:53:25,322 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 16:53:25,322 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:53:25,323 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:53:25 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f01538b076b24c69a42a'}'}
2020-12-10 16:53:25,324 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5fd1f01538b076b24c69a42a] from db
2020-12-10 16:53:25,605 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:53:25,609 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f01538b076b24c69a42a'}'}
2020-12-10 16:53:25,612 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f01538b076b24c69a42a]
2020-12-10 16:53:25,614 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f01538b076b24c69a42a] Result: true
2020-12-10 16:53:26,444 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5fd1f01538b076b24c69a42a] from db
2020-12-10 16:53:26,448 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] Found result of the request [5fd1f01538b076b24c69a42a]
2020-12-10 16:53:26,456 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [deleteRecord] The request 5fd1f01538b076b24c69a42a is deleted completely!
2020-12-10 16:53:26,458 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 16:53:26,458 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< 200 OK
2020-12-10 16:53:26,458 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|<
2020-12-10 16:53:26,459 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 16:55:58,305 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:55:58,311 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:55:58,312 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-12-10 16:55:58,312 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:55:58,312 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-12-10 16:55:58,313 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:55:58,313 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 0c7263fc-316e-43d3-8a2e-40a0976c6c9e
2020-12-10 16:55:58,314 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:55:58,314 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:55:58,314 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-12-10 16:55:58,315 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 242
2020-12-10 16:55:58,315 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-12-10 16:55:58,315 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:55:58,315 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-12-10 16:55:58,316 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:55:58,316 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:55:58,316 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-12-10 16:55:58,327 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-12-10 16:55:58,327 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-12-10 16:55:58,327 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:55:58,327 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:55:58,330 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:55:58,347 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 16:55:58,356 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-12-10 16:55:58,359 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 16:55:58,360 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 16:55:58,361 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-12-10 16:55:58,361 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 16:55:58,361 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-12-10 16:55:58,401 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5fd1f0ae38b076b24c69a42c
2020-12-10 16:55:58,403 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:55:58 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f0ae38b076b24c69a42c'}'}
2020-12-10 16:55:58,404 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 16:55:58,404 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching keyword found
2020-12-10 16:55:58,404 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 16:55:58,404 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching telco found
2020-12-10 16:55:58,406 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 16:55:58,407 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:55:58,462 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:55:58 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f0ae38b076b24c69a42c'}'}
2020-12-10 16:55:58,463 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd1f0ae38b076b24c69a42c] from db
2020-12-10 16:55:58,672 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:55:58,672 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f0ae38b076b24c69a42c'}'}
2020-12-10 16:55:58,682 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f0ae38b076b24c69a42c]
2020-12-10 16:55:58,688 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f0ae38b076b24c69a42c] Result: true
2020-12-10 16:55:59,483 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd1f0ae38b076b24c69a42c] from db
2020-12-10 16:55:59,486 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] Found result of the request [5fd1f0ae38b076b24c69a42c]
2020-12-10 16:55:59,489 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5fd1f0ae38b076b24c69a42c is deleted completely!
2020-12-10 16:55:59,497 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 16:55:59,498 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-12-10 16:55:59,498 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-12-10 16:55:59,499 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 16:57:08,937 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:57:08,939 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:57:08,939 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-12-10 16:57:08,939 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:57:08,939 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-12-10 16:57:08,940 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:57:08,940 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: 7c1fe4a7-9125-48d9-a556-f4b685c34e26
2020-12-10 16:57:08,941 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:57:08,941 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:57:08,941 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-12-10 16:57:08,941 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 242
2020-12-10 16:57:08,941 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-12-10 16:57:08,941 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:57:08,941 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-12-10 16:57:08,941 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:57:08,942 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:57:08,943 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-12-10 16:57:08,945 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-12-10 16:57:08,945 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-12-10 16:57:08,945 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:57:08,945 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:57:08,951 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:57:08,954 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 16:57:08,957 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-12-10 16:57:08,957 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 16:57:08,958 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 16:57:08,958 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-12-10 16:57:08,959 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 16:57:08,959 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-12-10 16:57:09,022 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5fd1f0f438b076b24c69a42e
2020-12-10 16:57:09,025 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:57:08 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f0f438b076b24c69a42e'}'}
2020-12-10 16:57:09,026 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 16:57:09,026 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching keyword found
2020-12-10 16:57:09,027 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 16:57:09,028 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching telco found
2020-12-10 16:57:09,028 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 16:57:09,028 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:57:09,029 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:57:08 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f0f438b076b24c69a42e'}'}
2020-12-10 16:57:09,030 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5fd1f0f438b076b24c69a42e] from db
2020-12-10 16:57:09,266 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:57:09,267 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f0f438b076b24c69a42e'}'}
2020-12-10 16:57:09,297 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f0f438b076b24c69a42e]
2020-12-10 16:57:09,327 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f0f438b076b24c69a42e] Result: true
2020-12-10 16:57:10,055 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5fd1f0f438b076b24c69a42e] from db
2020-12-10 16:57:10,060 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] Found result of the request [5fd1f0f438b076b24c69a42e]
2020-12-10 16:57:10,062 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [deleteRecord] The request 5fd1f0f438b076b24c69a42e is deleted completely!
2020-12-10 16:57:10,064 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 16:57:10,064 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-12-10 16:57:10,064 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-12-10 16:57:10,065 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 16:57:53,350 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-12-10 16:57:53,351 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 16:57:53,352 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-12-10 16:57:53,352 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 16:57:53,352 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-12-10 16:57:53,352 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-12-10 16:57:53,353 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: c8ae5d56-1b97-4b34-8615-e1971fe2cd8c
2020-12-10 16:57:53,353 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 16:57:53,354 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 16:57:53,354 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-12-10 16:57:53,354 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 242
2020-12-10 16:57:53,354 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-12-10 16:57:53,354 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 16:57:53,354 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-12-10 16:57:53,355 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 16:57:53,355 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 16:57:53,355 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-12-10 16:57:53,358 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-12-10 16:57:53,359 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-12-10 16:57:53,359 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 16:57:53,360 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 16:57:53,365 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-12-10 16:57:53,370 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 16:57:53,372 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'charge'
2020-12-10 16:57:53,373 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 16:57:53,375 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 16:57:53,376 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-12-10 16:57:53,377 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 16:57:53,378 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-12-10 16:57:53,388 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [insertRequest][to DB] Result ID: 5fd1f12138b076b24c69a430
2020-12-10 16:57:53,389 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:57:53 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f12138b076b24c69a430'}'}
2020-12-10 16:57:53,390 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 16:57:53,392 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] no matching keyword found
2020-12-10 16:57:53,392 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 16:57:53,393 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] no matching telco found
2020-12-10 16:57:53,394 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 16:57:53,395 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 16:57:53,397 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 16:57:53 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f12138b076b24c69a430'}'}
2020-12-10 16:57:53,397 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd1f12138b076b24c69a430] from db
2020-12-10 16:57:53,606 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 16:57:53,607 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f12138b076b24c69a430'}'}
2020-12-10 16:57:53,686 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f12138b076b24c69a430]
2020-12-10 16:57:53,723 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f12138b076b24c69a430] Result: true
2020-12-10 16:57:54,448 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd1f12138b076b24c69a430] from db
2020-12-10 16:57:54,456 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] Found result of the request [5fd1f12138b076b24c69a430]
2020-12-10 16:57:54,480 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [deleteRecord] The request 5fd1f12138b076b24c69a430 is deleted completely!
2020-12-10 16:57:54,481 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 16:57:54,482 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-12-10 16:57:54,482 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-12-10 16:57:54,482 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 17:03:16,795 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> POST /payment/apigw
2020-12-10 17:03:16,804 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 17:03:16,805 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-type: application/json
2020-12-10 17:03:16,805 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 17:03:16,805 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept: */*
2020-12-10 17:03:16,805 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> cache-control: no-cache
2020-12-10 17:03:16,805 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> postman-token: 68ecb4ee-febc-484f-9a73-e08f1dc5d9fc
2020-12-10 17:03:16,806 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 17:03:16,806 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 17:03:16,807 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> connection: keep-alive
2020-12-10 17:03:16,807 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-length: 242
2020-12-10 17:03:16,807 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>
2020-12-10 17:03:16,807 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 17:03:16,808 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Ip Adress '127.0.0.1' is valid
2020-12-10 17:03:16,808 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 17:03:16,809 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 17:03:16,809 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Looking for the header start with 'PGW'
2020-12-10 17:03:16,817 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] checking authentication for user 'pgw_fptplay'
2020-12-10 17:03:16,818 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] security context was null, so authorizating user
2020-12-10 17:03:16,818 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 17:03:16,818 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 17:03:16,826 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] authorizated user 'pgw_fptplay', setting security context
2020-12-10 17:03:16,842 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-7] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 17:03:16,848 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] Service from the request is 'charge'
2020-12-10 17:03:16,850 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 17:03:16,853 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 17:03:16,853 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Result: true
2020-12-10 17:03:16,854 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 17:03:16,854 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Result: true
2020-12-10 17:03:16,925 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [insertRequest][to DB] Result ID: 5fd1f26438b076b24c69a432
2020-12-10 17:03:16,926 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:03:16 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f26438b076b24c69a432'}'}
2020-12-10 17:03:16,927 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 17:03:16,927 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] no matching keyword found
2020-12-10 17:03:16,928 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 17:03:16,928 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] no matching telco found
2020-12-10 17:03:16,928 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 17:03:16,929 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 17:03:16,931 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:03:16 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f26438b076b24c69a432'}'}
2020-12-10 17:03:16,932 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5fd1f26438b076b24c69a432] from db
2020-12-10 17:03:17,446 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 17:03:17,447 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f26438b076b24c69a432'}'}
2020-12-10 17:03:17,453 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f26438b076b24c69a432]
2020-12-10 17:03:17,523 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f26438b076b24c69a432] Result: true
2020-12-10 17:03:18,147 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5fd1f26438b076b24c69a432] from db
2020-12-10 17:03:18,150 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] Found result of the request [5fd1f26438b076b24c69a432]
2020-12-10 17:03:18,154 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [deleteRecord] The request 5fd1f26438b076b24c69a432 is deleted completely!
2020-12-10 17:03:18,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 17:03:18,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< 200 OK
2020-12-10 17:03:18,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|<
2020-12-10 17:03:18,159 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 17:04:01,499 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> POST /payment/apigw
2020-12-10 17:04:01,500 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 17:04:01,501 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-type: application/json
2020-12-10 17:04:01,501 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 17:04:01,501 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept: */*
2020-12-10 17:04:01,502 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> cache-control: no-cache
2020-12-10 17:04:01,502 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> postman-token: 54fd73a6-2d3b-460e-9424-3aab541301fc
2020-12-10 17:04:01,502 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 17:04:01,502 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 17:04:01,502 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> connection: keep-alive
2020-12-10 17:04:01,502 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-length: 242
2020-12-10 17:04:01,503 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>
2020-12-10 17:04:01,503 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 17:04:01,504 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Ip Adress '127.0.0.1' is valid
2020-12-10 17:04:01,504 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 17:04:01,504 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 17:04:01,505 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Looking for the header start with 'PGW'
2020-12-10 17:04:01,508 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] checking authentication for user 'pgw_fptplay'
2020-12-10 17:04:01,508 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] security context was null, so authorizating user
2020-12-10 17:04:01,509 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 17:04:01,509 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 17:04:01,513 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] authorizated user 'pgw_fptplay', setting security context
2020-12-10 17:04:01,516 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-9] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 17:04:01,529 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] Service from the request is 'charge'
2020-12-10 17:04:01,530 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 17:04:01,531 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 17:04:01,531 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Result: true
2020-12-10 17:04:01,532 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 17:04:01,532 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Result: true
2020-12-10 17:04:01,590 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [insertRequest][to DB] Result ID: 5fd1f29138b076b24c69a434
2020-12-10 17:04:01,590 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:04:01 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f29138b076b24c69a434'}'}
2020-12-10 17:04:01,591 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 17:04:01,591 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] no matching keyword found
2020-12-10 17:04:01,591 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 17:04:01,591 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] no matching telco found
2020-12-10 17:04:01,591 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 17:04:01,592 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 17:04:01,592 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:04:01 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f29138b076b24c69a434'}'}
2020-12-10 17:04:01,592 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5fd1f29138b076b24c69a434] from db
2020-12-10 17:04:02,232 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 17:04:02,233 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f29138b076b24c69a434'}'}
2020-12-10 17:04:02,468 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f29138b076b24c69a434]
2020-12-10 17:04:02,518 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f29138b076b24c69a434] Result: true
2020-12-10 17:04:02,602 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5fd1f29138b076b24c69a434] from db
2020-12-10 17:04:02,611 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] Found result of the request [5fd1f29138b076b24c69a434]
2020-12-10 17:04:02,630 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [deleteRecord] The request 5fd1f29138b076b24c69a434 is deleted completely!
2020-12-10 17:04:02,632 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 17:04:02,632 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< 200 OK
2020-12-10 17:04:02,632 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|<
2020-12-10 17:04:02,633 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 17:04:45,841 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-12-10 17:04:45,842 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 17:04:45,843 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-12-10 17:04:45,843 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 17:04:45,844 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-12-10 17:04:45,844 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-12-10 17:04:45,845 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 6e28b611-6630-42ac-b315-2328ef951382
2020-12-10 17:04:45,845 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 17:04:45,845 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 17:04:45,845 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-12-10 17:04:45,845 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 242
2020-12-10 17:04:45,846 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-12-10 17:04:45,846 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 17:04:45,846 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-12-10 17:04:45,846 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 17:04:45,846 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 17:04:45,847 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-12-10 17:04:45,848 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-12-10 17:04:45,848 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-12-10 17:04:45,848 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 17:04:45,849 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 17:04:45,854 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-12-10 17:04:45,859 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 17:04:45,864 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-12-10 17:04:45,876 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 17:04:45,876 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 17:04:45,877 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-12-10 17:04:45,877 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 17:04:45,878 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-12-10 17:04:45,910 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5fd1f2bd38b076b24c69a436
2020-12-10 17:04:45,911 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:04:45 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f2bd38b076b24c69a436'}'}
2020-12-10 17:04:45,912 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 17:04:45,912 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching keyword found
2020-12-10 17:04:45,912 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 17:04:45,913 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching telco found
2020-12-10 17:04:45,913 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 17:04:45,913 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 17:04:45,926 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:04:45 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f2bd38b076b24c69a436'}'}
2020-12-10 17:04:45,929 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd1f2bd38b076b24c69a436] from db
2020-12-10 17:04:46,500 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 17:04:46,501 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f2bd38b076b24c69a436'}'}
2020-12-10 17:04:46,534 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f2bd38b076b24c69a436]
2020-12-10 17:04:46,541 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f2bd38b076b24c69a436] Result: true
2020-12-10 17:04:46,936 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd1f2bd38b076b24c69a436] from db
2020-12-10 17:04:46,952 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] Found result of the request [5fd1f2bd38b076b24c69a436]
2020-12-10 17:04:46,964 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5fd1f2bd38b076b24c69a436 is deleted completely!
2020-12-10 17:04:46,967 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 17:04:46,967 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-12-10 17:04:46,967 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-12-10 17:04:46,968 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 17:07:18,646 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-12-10 17:07:18,647 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 17:07:18,647 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-12-10 17:07:18,648 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 17:07:18,648 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-12-10 17:07:18,648 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-12-10 17:07:18,649 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: fb677f8c-94e9-4976-b454-fe725dda10a4
2020-12-10 17:07:18,649 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 17:07:18,649 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 17:07:18,649 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-12-10 17:07:18,649 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 242
2020-12-10 17:07:18,650 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-12-10 17:07:18,650 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 17:07:18,650 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-12-10 17:07:18,650 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 17:07:18,650 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 17:07:18,651 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-12-10 17:07:18,656 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-12-10 17:07:18,656 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-12-10 17:07:18,657 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 17:07:18,657 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 17:07:18,659 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-12-10 17:07:18,665 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 17:07:18,666 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-12-10 17:07:18,667 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 17:07:18,667 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 17:07:18,668 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-12-10 17:07:18,668 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 17:07:18,669 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-12-10 17:07:18,687 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5fd1f35638b076b24c69a438
2020-12-10 17:07:18,689 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:07:18 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f35638b076b24c69a438'}'}
2020-12-10 17:07:18,690 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 17:07:18,690 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching keyword found
2020-12-10 17:07:18,690 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 17:07:18,691 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] no matching telco found
2020-12-10 17:07:18,691 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = DOWNLOAD
2020-12-10 17:07:18,691 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 17:07:18,694 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:07:18 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='TQCN', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f35638b076b24c69a438'}'}
2020-12-10 17:07:18,695 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5fd1f35638b076b24c69a438] from db
2020-12-10 17:07:19,250 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 17:07:19,250 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f35638b076b24c69a438'}'}
2020-12-10 17:07:19,261 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f35638b076b24c69a438]
2020-12-10 17:07:19,264 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f35638b076b24c69a438] Result: true
2020-12-10 17:07:19,701 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5fd1f35638b076b24c69a438] from db
2020-12-10 17:07:19,750 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] Found result of the request [5fd1f35638b076b24c69a438]
2020-12-10 17:07:19,783 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [deleteRecord] The request 5fd1f35638b076b24c69a438 is deleted completely!
2020-12-10 17:07:19,789 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"TQCN","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 17:07:19,790 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-12-10 17:07:19,790 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-12-10 17:07:19,790 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 17:08:48,773 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-12-10 17:08:48,775 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 17:08:48,775 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-12-10 17:08:48,775 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 17:08:48,776 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-12-10 17:08:48,776 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-12-10 17:08:48,776 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: 25c7878c-a628-486d-85c9-4064f3a70fec
2020-12-10 17:08:48,776 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 17:08:48,776 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 17:08:48,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-12-10 17:08:48,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 241
2020-12-10 17:08:48,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-12-10 17:08:48,777 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 17:08:48,777 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-12-10 17:08:48,778 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 17:08:48,778 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 17:08:48,778 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-12-10 17:08:48,779 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-12-10 17:08:48,780 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-12-10 17:08:48,780 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 17:08:48,780 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 17:08:48,784 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-12-10 17:08:48,787 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}'
2020-12-10 17:08:48,788 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'charge'
2020-12-10 17:08:48,789 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='100'}
2020-12-10 17:08:48,789 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 17:08:48,790 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-12-10 17:08:48,790 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 17:08:48,791 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-12-10 17:08:48,813 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [insertRequest][to DB] Result ID: 5fd1f3b038b076b24c69a43a
2020-12-10 17:08:48,814 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:08:48 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f3b038b076b24c69a43a'}'}
2020-12-10 17:08:48,814 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 17:08:48,814 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] no matching keyword found
2020-12-10 17:08:48,815 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 17:08:48,815 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] no matching telco found
2020-12-10 17:08:48,815 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = DOWNLOAD
2020-12-10 17:08:48,815 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 17:08:48,817 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:08:48 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='100',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f3b038b076b24c69a43a'}'}
2020-12-10 17:08:48,817 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd1f3b038b076b24c69a43a] from db
2020-12-10 17:08:49,401 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 17:08:49,401 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f3b038b076b24c69a43a'}'}
2020-12-10 17:08:49,420 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f3b038b076b24c69a43a]
2020-12-10 17:08:49,451 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f3b038b076b24c69a43a] Result: true
2020-12-10 17:08:49,822 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5fd1f3b038b076b24c69a43a] from db
2020-12-10 17:08:49,825 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] Found result of the request [5fd1f3b038b076b24c69a43a]
2020-12-10 17:08:49,833 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [deleteRecord] The request 5fd1f3b038b076b24c69a43a is deleted completely!
2020-12-10 17:08:49,836 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 100}
2020-12-10 17:08:49,836 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-12-10 17:08:49,836 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-12-10 17:08:49,837 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 17:09:43,016 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> POST /payment/apigw
2020-12-10 17:09:43,018 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 17:09:43,018 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-type: application/json
2020-12-10 17:09:43,018 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 17:09:43,018 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept: */*
2020-12-10 17:09:43,019 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> cache-control: no-cache
2020-12-10 17:09:43,020 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> postman-token: 09972410-6b15-4216-8894-eeaac49d4873
2020-12-10 17:09:43,020 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 17:09:43,023 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 17:09:43,023 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> connection: keep-alive
2020-12-10 17:09:43,023 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-length: 242
2020-12-10 17:09:43,023 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>
2020-12-10 17:09:43,023 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 17:09:43,023 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Ip Adress '127.0.0.1' is valid
2020-12-10 17:09:43,023 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 17:09:43,024 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 17:09:43,024 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Looking for the header start with 'PGW'
2020-12-10 17:09:43,025 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] checking authentication for user 'pgw_fptplay'
2020-12-10 17:09:43,026 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] security context was null, so authorizating user
2020-12-10 17:09:43,026 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 17:09:43,026 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 17:09:43,028 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] authorizated user 'pgw_fptplay', setting security context
2020-12-10 17:09:43,114 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-7] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 1000}'
2020-12-10 17:09:43,117 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] Service from the request is 'charge'
2020-12-10 17:09:43,118 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='1000'}
2020-12-10 17:09:43,124 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 17:09:43,124 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Result: true
2020-12-10 17:09:43,126 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 17:09:43,127 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Result: true
2020-12-10 17:09:43,161 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [insertRequest][to DB] Result ID: 5fd1f3e738b076b24c69a43c
2020-12-10 17:09:43,162 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:09:43 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='1000',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f3e738b076b24c69a43c'}'}
2020-12-10 17:09:43,162 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 17:09:43,162 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] no matching keyword found
2020-12-10 17:09:43,163 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 17:09:43,163 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] no matching telco found
2020-12-10 17:09:43,163 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = DOWNLOAD
2020-12-10 17:09:43,163 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 17:09:43,164 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:09:43 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='1000',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f3e738b076b24c69a43c'}'}
2020-12-10 17:09:43,165 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5fd1f3e738b076b24c69a43c] from db
2020-12-10 17:09:43,861 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 17:09:43,863 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f3e738b076b24c69a43c'}'}
2020-12-10 17:09:43,869 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f3e738b076b24c69a43c]
2020-12-10 17:09:43,881 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f3e738b076b24c69a43c] Result: true
2020-12-10 17:09:44,187 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5fd1f3e738b076b24c69a43c] from db
2020-12-10 17:09:44,193 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] Found result of the request [5fd1f3e738b076b24c69a43c]
2020-12-10 17:09:44,196 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [deleteRecord] The request 5fd1f3e738b076b24c69a43c is deleted completely!
2020-12-10 17:09:44,198 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 1000}
2020-12-10 17:09:44,198 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< 200 OK
2020-12-10 17:09:44,199 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|<
2020-12-10 17:09:44,199 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 17:16:49,311 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> POST /payment/apigw
2020-12-10 17:16:49,318 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 17:16:49,318 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-type: application/json
2020-12-10 17:16:49,319 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 17:16:49,319 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept: */*
2020-12-10 17:16:49,320 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> cache-control: no-cache
2020-12-10 17:16:49,320 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> postman-token: 6b83ab3d-9748-4375-bb4e-29635bc98e34
2020-12-10 17:16:49,320 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 17:16:49,322 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 17:16:49,322 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> connection: keep-alive
2020-12-10 17:16:49,323 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-length: 242
2020-12-10 17:16:49,324 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>
2020-12-10 17:16:49,324 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 17:16:49,325 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Ip Adress '127.0.0.1' is valid
2020-12-10 17:16:49,326 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 17:16:49,333 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 17:16:49,334 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Looking for the header start with 'PGW'
2020-12-10 17:16:49,356 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] checking authentication for user 'pgw_fptplay'
2020-12-10 17:16:49,357 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] security context was null, so authorizating user
2020-12-10 17:16:49,359 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 17:16:49,360 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 17:16:49,368 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] authorizated user 'pgw_fptplay', setting security context
2020-12-10 17:16:49,399 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-9] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 1000}'
2020-12-10 17:16:49,411 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] Service from the request is 'charge'
2020-12-10 17:16:49,413 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='1000'}
2020-12-10 17:16:49,415 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 17:16:49,416 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Result: true
2020-12-10 17:16:49,416 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 17:16:49,416 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Result: true
2020-12-10 17:16:49,613 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [insertRequest][to DB] Result ID: 5fd1f59138b076b24c69a43e
2020-12-10 17:16:49,615 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:16:49 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='1000',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f59138b076b24c69a43e'}'}
2020-12-10 17:16:49,615 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 17:16:49,616 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] no matching keyword found
2020-12-10 17:16:49,616 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 17:16:49,616 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] no matching telco found
2020-12-10 17:16:49,617 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = DOWNLOAD
2020-12-10 17:16:49,617 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 17:16:49,625 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:16:49 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='1000',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f59138b076b24c69a43e'}'}
2020-12-10 17:16:49,626 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5fd1f59138b076b24c69a43e] from db
2020-12-10 17:16:50,405 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 17:16:50,409 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f59138b076b24c69a43e'}'}
2020-12-10 17:16:50,425 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f59138b076b24c69a43e]
2020-12-10 17:16:50,433 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f59138b076b24c69a43e] Result: true
2020-12-10 17:16:50,635 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5fd1f59138b076b24c69a43e] from db
2020-12-10 17:16:50,652 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] Found result of the request [5fd1f59138b076b24c69a43e]
2020-12-10 17:16:50,672 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [deleteRecord] The request 5fd1f59138b076b24c69a43e is deleted completely!
2020-12-10 17:16:50,677 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 1000}
2020-12-10 17:16:50,678 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< 200 OK
2020-12-10 17:16:50,678 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|<
2020-12-10 17:16:50,678 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< {"error_code":-1,"trans_id":"159013753118-1172085012316"}
2020-12-10 17:18:33,218 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-12-10 17:18:33,223 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA
2020-12-10 17:18:33,224 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-12-10 17:18:33,224 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.26.1
2020-12-10 17:18:33,225 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-12-10 17:18:33,225 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-12-10 17:18:33,225 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 22e5abba-b7ce-4b95-90b5-04130e245aa4
2020-12-10 17:18:33,226 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-12-10 17:18:33,226 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-12-10 17:18:33,226 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-12-10 17:18:33,226 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 242
2020-12-10 17:18:33,226 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-12-10 17:18:33,226 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-12-10 17:18:33,227 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-12-10 17:18:33,227 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-12-10 17:18:33,227 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTYwODQzNjQ5NSwiaWF0IjoxNjA3NTcyNDk1fQ.8eJf1Tgr_Saz75Nt-ht6xDHuZNipnLLLIW4Y8PlqwtvlmKtzgP27QUDJDqFlUREWxfEiGKgrnqQvyEzy5zM3SA'
2020-12-10 17:18:33,228 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-12-10 17:18:33,239 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-12-10 17:18:33,240 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-12-10 17:18:33,240 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-12-10 17:18:33,241 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-12-10 17:18:33,248 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-12-10 17:18:33,266 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is ' {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 1000}'
2020-12-10 17:18:33,271 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-12-10 17:18:33,272 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging. Msg = TelcoChargeRequest {cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',datetime='null',price='1000'}
2020-12-10 17:18:33,273 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 159013753118-1172085012316
2020-12-10 17:18:33,273 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-12-10 17:18:33,274 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 159013753118-1172085012316
2020-12-10 17:18:33,274 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-12-10 17:18:33,317 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5fd1f5f938b076b24c69a440
2020-12-10 17:18:33,319 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:18:33 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='1000',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f5f938b076b24c69a440'}'}
2020-12-10 17:18:33,320 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 17:18:33,321 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching keyword found
2020-12-10 17:18:33,321 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 17:18:33,321 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] no matching telco found
2020-12-10 17:18:33,322 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = DOWNLOAD
2020-12-10 17:18:33,322 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS, keyword = DOWNLOAD
2020-12-10 17:18:33,325 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VIETTEL.MPS']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', channel='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='DOWNLOAD', status_process='0', msgRxTime='null', msgRtTime='Thu Dec 10 17:18:33 ICT 2020', cp_code='001', telco='viettel', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='0982051117',cmd='DOWNLOAD',trans_id='159013753118-1172085012316',price='1000',evenTime='null',errorCode='0', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f5f938b076b24c69a440'}'}
2020-12-10 17:18:33,326 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd1f5f938b076b24c69a440] from db
2020-12-10 17:18:34,216 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-12-10 17:18:34,217 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', channel='viettel', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='4', packageExpiredTime='null', renewCycleDay='0', shortCode='null', content='null', mo_id='null', originalRequestId='null', cmdType='null', dbId='5fd1f5f938b076b24c69a440'}'}
2020-12-10 17:18:34,226 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5fd1f5f938b076b24c69a440]
2020-12-10 17:18:34,228 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5fd1f5f938b076b24c69a440] Result: true
2020-12-10 17:18:34,401 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5fd1f5f938b076b24c69a440] from db
2020-12-10 17:18:34,410 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] Found result of the request [5fd1f5f938b076b24c69a440]
2020-12-10 17:18:34,426 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5fd1f5f938b076b24c69a440 is deleted completely!
2020-12-10 17:18:34,431 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>  {"service":"charge","telco":"viettel","cp_code":"001","service_code":"FPTPLAY","service_id":"FPTPLAYID","package_code":"VIP","msisdn":"0982051117","account":"0982051117","cmd":"DOWNLOAD","trans_id":"159013753118-1172085012316","price": 1000}
2020-12-10 17:18:34,431 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-12-10 17:18:34,432 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-12-10 17:18:34,432 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":4,"trans_id":"159013753118-1172085012316"}
