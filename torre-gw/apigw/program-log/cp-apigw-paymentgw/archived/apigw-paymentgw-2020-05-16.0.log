2020-05-16 08:53:52,889 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] Routing file updated
2020-05-16 08:53:52,915 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] New routes created.
2020-05-16 08:53:57,819 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 08:53:57,821 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 08:53:57,821 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 08:53:57,821 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 08:53:57,821 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 08:53:57,821 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 08:53:57,821 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: e0afbcc1-37a0-4416-8de3-86069d878658
2020-05-16 08:53:57,822 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 08:53:57,822 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 08:53:57,822 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 08:53:57,822 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 08:53:57,822 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 08:53:57,822 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 08:53:57,822 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 08:53:57,823 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 08:53:57,823 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 08:53:57,823 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 08:53:57,828 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 08:53:57,829 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 08:53:57,829 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 08:53:57,830 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 08:53:57,836 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 08:53:57,840 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 08:53:57,847 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 08:53:57,851 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 08:53:57,855 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: null
2020-05-16 08:53:57,856 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 08:53:57,856 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: null
2020-05-16 08:53:57,856 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 08:53:57,857 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:53:57,857 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 08:53:57,857 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 08:53:57,861 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:53:57,861 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Exception: null
2020-05-16 08:53:57,862 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] Exception: null
2020-05-16 08:53:57,866 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 08:53:57,866 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 08:53:57,866 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 08:53:57,867 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 08:53:57,867 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 08:53:57,867 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 08:53:57,867 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 08:53:57,867 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 08:53:57,867 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 08:53:57,867 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 08:53:57,868 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 08:53:57,868 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 08:53:57,868 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 08:53:57,869 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 08:53:57,869 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":null}
2020-05-16 08:54:06,985 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-16 08:54:06,985 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 08:54:06,985 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-16 08:54:06,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 08:54:06,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-16 08:54:06,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-16 08:54:06,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: 1f67b85b-1bd7-49fe-80f9-4e61c6c74e44
2020-05-16 08:54:06,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 08:54:06,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 08:54:06,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-16 08:54:06,987 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 231
2020-05-16 08:54:06,987 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-16 08:54:06,987 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 08:54:06,987 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-16 08:54:06,987 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 08:54:06,987 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 08:54:06,988 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-16 08:54:06,989 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-16 08:54:06,989 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-16 08:54:06,989 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 08:54:06,994 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 08:54:07,001 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-16 08:54:07,004 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 08:54:07,005 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'charge'
2020-05-16 08:54:07,005 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doTelcoCharge] doing telco charging...
2020-05-16 08:54:07,005 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: null
2020-05-16 08:54:07,006 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-16 08:54:07,006 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: null
2020-05-16 08:54:07,006 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-16 08:54:07,006 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:54:07,006 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-05-16 08:54:07,007 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 08:54:07,007 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:54:07,007 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [findRecord] Exception: null
2020-05-16 08:54:07,008 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] Exception: null
2020-05-16 08:54:07,009 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-16 08:54:07,009 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 08:54:07,010 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 08:54:07,010 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 08:54:07,010 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 08:54:07,010 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 08:54:07,010 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 08:54:07,010 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-05-16 08:54:07,010 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cmd": "register",
2020-05-16 08:54:07,010 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 08:54:07,011 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "charge"
2020-05-16 08:54:07,011 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-16 08:54:07,011 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-16 08:54:07,011 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-16 08:54:07,011 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":-1,"trans_id":null}
2020-05-16 08:55:09,856 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] Routing file updated
2020-05-16 08:55:09,874 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] New routes created.
2020-05-16 08:55:15,298 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 08:55:15,300 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 08:55:15,300 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 08:55:15,301 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 08:55:15,301 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 08:55:15,301 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 08:55:15,301 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 061ec4b5-a286-4336-bc74-b64339141073
2020-05-16 08:55:15,302 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 08:55:15,302 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 08:55:15,302 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 08:55:15,302 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 08:55:15,302 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 08:55:15,302 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 08:55:15,302 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 08:55:15,303 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 08:55:15,303 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 08:55:15,303 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 08:55:15,305 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 08:55:15,305 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 08:55:15,306 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 08:55:15,306 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 08:55:15,309 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 08:55:15,310 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 08:55:15,315 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 08:55:15,319 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 08:55:15,325 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: null
2020-05-16 08:55:15,325 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 08:55:15,326 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: null
2020-05-16 08:55:15,326 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 08:55:15,326 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:55:15,327 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 08:55:15,327 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 08:55:15,330 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:55:15,344 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Exception: null
2020-05-16 08:55:15,346 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [processRequest] Exception: null
2020-05-16 08:55:15,350 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 08:55:15,351 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 08:55:15,351 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 08:55:15,351 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 08:55:15,351 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 08:55:15,351 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 08:55:15,351 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 08:55:15,352 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 08:55:15,352 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 08:55:15,352 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 08:55:15,352 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 08:55:15,352 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 08:55:15,352 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 08:55:15,353 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 08:55:15,353 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":null}
2020-05-16 08:55:27,257 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-16 08:55:27,258 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 08:55:27,258 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-16 08:55:27,258 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 08:55:27,258 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-16 08:55:27,258 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-16 08:55:27,258 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: a0bb4cbb-18d5-494b-88a9-8c0d2a54d000
2020-05-16 08:55:27,258 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 08:55:27,259 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 08:55:27,259 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-16 08:55:27,259 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 231
2020-05-16 08:55:27,259 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-16 08:55:27,259 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 08:55:27,259 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-16 08:55:27,259 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 08:55:27,259 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 08:55:27,260 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-16 08:55:27,261 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-16 08:55:27,261 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-16 08:55:27,261 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 08:55:27,262 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 08:55:27,267 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-16 08:55:27,269 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 08:55:27,270 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'charge'
2020-05-16 08:55:27,270 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doTelcoCharge] doing telco charging...
2020-05-16 08:55:27,271 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: null
2020-05-16 08:55:27,272 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-16 08:55:27,272 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: null
2020-05-16 08:55:27,273 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-16 08:55:27,273 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:55:27,273 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-05-16 08:55:27,274 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 08:55:27,274 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:55:27,275 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [findRecord] Exception: null
2020-05-16 08:55:27,275 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [processRequest] Exception: null
2020-05-16 08:55:27,276 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-16 08:55:27,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 08:55:27,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 08:55:27,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 08:55:27,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 08:55:27,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 08:55:27,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 08:55:27,278 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-05-16 08:55:27,278 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cmd": "register",
2020-05-16 08:55:27,278 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 08:55:27,278 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "charge"
2020-05-16 08:55:27,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-16 08:55:27,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-16 08:55:27,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-16 08:55:27,280 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":-1,"trans_id":null}
2020-05-16 08:55:34,896 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-16 08:55:34,897 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 08:55:34,897 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-16 08:55:34,897 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 08:55:34,897 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-16 08:55:34,898 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-16 08:55:34,898 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: 91467f52-2140-403e-811c-c4c59004b9aa
2020-05-16 08:55:34,898 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 08:55:34,898 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 08:55:34,899 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-16 08:55:34,899 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 231
2020-05-16 08:55:34,899 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-16 08:55:34,899 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 08:55:34,899 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-16 08:55:34,899 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 08:55:34,899 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 08:55:34,900 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-16 08:55:34,901 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-05-16 08:55:34,901 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-05-16 08:55:34,901 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 08:55:34,902 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 08:55:34,906 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-05-16 08:55:34,921 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 08:55:34,929 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-05-16 08:55:34,930 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging...
2020-05-16 08:55:34,931 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: null
2020-05-16 08:55:34,933 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-05-16 08:55:34,934 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: null
2020-05-16 08:55:34,935 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-05-16 08:55:34,936 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:55:34,937 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = null
2020-05-16 08:55:34,937 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 08:55:34,940 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:55:34,941 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [findRecord] Exception: null
2020-05-16 08:55:34,944 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [processRequest] Exception: null
2020-05-16 08:55:34,961 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> {
2020-05-16 08:55:34,961 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 08:55:34,962 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 08:55:34,962 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 08:55:34,962 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 08:55:34,962 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 08:55:34,963 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 08:55:34,963 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"account": "dz",
2020-05-16 08:55:34,969 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cmd": "register",
2020-05-16 08:55:34,969 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 08:55:34,969 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service": "charge"
2020-05-16 08:55:34,969 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> }
2020-05-16 08:55:34,969 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-05-16 08:55:34,969 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-16 08:55:34,970 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":null}
2020-05-16 08:56:14,478 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-05-16 08:56:14,478 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 08:56:14,478 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-05-16 08:56:14,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 08:56:14,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-05-16 08:56:14,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-05-16 08:56:14,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: ea94da2b-a366-40e7-9675-0ebed61366f0
2020-05-16 08:56:14,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 08:56:14,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 08:56:14,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-05-16 08:56:14,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 231
2020-05-16 08:56:14,480 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-05-16 08:56:14,480 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 08:56:14,480 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-05-16 08:56:14,481 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 08:56:14,481 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 08:56:14,481 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-05-16 08:56:14,483 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-05-16 08:56:14,483 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-05-16 08:56:14,484 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 08:56:14,484 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 08:56:14,489 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-05-16 08:56:14,490 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 08:56:14,491 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'charge'
2020-05-16 08:56:14,492 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doTelcoCharge] doing telco charging...
2020-05-16 08:56:14,492 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: null
2020-05-16 08:56:14,492 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-05-16 08:56:14,493 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: null
2020-05-16 08:56:14,493 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-05-16 08:56:14,494 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:56:14,494 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = null
2020-05-16 08:56:14,494 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 08:56:14,495 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:56:14,495 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [findRecord] Exception: null
2020-05-16 08:56:14,495 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [processRequest] Exception: null
2020-05-16 08:56:14,496 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> {
2020-05-16 08:56:14,497 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 08:56:14,497 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 08:56:14,497 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 08:56:14,497 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 08:56:14,498 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 08:56:14,498 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 08:56:14,498 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"account": "dz",
2020-05-16 08:56:14,498 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"cmd": "register",
2020-05-16 08:56:14,498 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 08:56:14,498 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service": "charge"
2020-05-16 08:56:14,499 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> }
2020-05-16 08:56:14,499 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-05-16 08:56:14,499 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-05-16 08:56:14,500 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":-1,"trans_id":null}
2020-05-16 08:56:35,774 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-05-16 08:56:35,800 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-05-16 08:56:38,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 08:56:38,987 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 08:56:38,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 08:56:38,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 08:56:38,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 08:56:38,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 08:56:38,989 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 23dcd16b-225d-486f-a428-e3d8b95f90bc
2020-05-16 08:56:38,989 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 08:56:38,989 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 08:56:38,989 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 08:56:38,989 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 08:56:38,989 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 08:56:38,990 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 08:56:38,990 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 08:56:38,990 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 08:56:38,990 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 08:56:38,990 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 08:56:39,122 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 08:56:39,123 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 08:56:39,123 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 08:56:39,123 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 08:56:39,140 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 08:56:39,206 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 08:56:39,244 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 08:56:39,291 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 08:56:39,298 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: null
2020-05-16 08:56:39,299 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 08:56:39,307 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: null
2020-05-16 08:56:39,308 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 08:56:39,313 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:56:39,321 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 08:56:39,322 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 08:56:39,361 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 08:56:39,362 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Exception: null
2020-05-16 08:56:39,363 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [processRequest] Exception: null
2020-05-16 08:56:39,392 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 08:56:39,392 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 08:56:39,392 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 08:56:39,393 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 08:56:39,393 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 08:56:39,393 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 08:56:39,393 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 08:56:39,393 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 08:56:39,393 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 08:56:39,394 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 08:56:39,394 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 08:56:39,394 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 08:56:39,394 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 08:56:39,394 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 08:56:39,395 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":null}
2020-05-16 09:17:23,192 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] Routing file updated
2020-05-16 09:17:23,208 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] New routes created.
2020-05-16 09:17:26,698 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:17:26,699 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:17:26,700 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 09:17:26,700 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:17:26,700 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 09:17:26,700 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:17:26,700 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 9075d052-7883-484f-b954-771aad5e18d5
2020-05-16 09:17:26,701 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:17:26,701 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:17:26,702 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 09:17:26,703 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 09:17:26,703 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 09:17:26,704 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:17:26,704 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 09:17:26,705 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:17:26,705 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:17:26,705 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 09:17:26,709 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 09:17:26,709 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 09:17:26,709 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:17:26,710 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:17:26,713 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:17:26,716 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 09:17:26,723 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 09:17:26,727 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 09:17:26,730 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: null
2020-05-16 09:17:26,730 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 09:17:26,731 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: null
2020-05-16 09:17:26,731 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 09:17:26,731 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 09:17:26,732 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 09:17:26,733 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:17:26,737 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 09:17:26,739 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Exception: null
2020-05-16 09:17:26,796 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebf4d36226bfb0281f16cb2
2020-05-16 09:17:26,796 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4d36226bfb0281f16cb2] from db
2020-05-16 09:17:27,849 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4d36226bfb0281f16cb2] from db
2020-05-16 09:17:28,856 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4d36226bfb0281f16cb2] from db
2020-05-16 09:17:29,863 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4d36226bfb0281f16cb2] from db
2020-05-16 09:17:29,870 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:17:29,876 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 09:17:29,876 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:17:29,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:17:29,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:17:29,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:17:29,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:17:29,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:17:29,877 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:17:29,878 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:17:29,878 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 09:17:29,878 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:17:29,878 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 09:17:29,878 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 09:17:29,879 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 09:17:29,879 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":null}
2020-05-16 09:18:41,192 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] Routing file updated
2020-05-16 09:18:41,228 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] New routes created.
2020-05-16 09:20:34,016 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] Routing file updated
2020-05-16 09:20:34,023 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] New routes created.
2020-05-16 09:20:40,476 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:20:40,478 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:20:40,478 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 09:20:40,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:20:40,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 09:20:40,480 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:20:40,480 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: d121cd34-4841-4065-884d-3c9b5a0ddd21
2020-05-16 09:20:40,480 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:20:40,481 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:20:40,481 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 09:20:40,482 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 09:20:40,482 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 09:20:40,482 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:20:40,483 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 09:20:40,483 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:20:40,483 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:20:40,483 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 09:20:40,486 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 09:20:40,486 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 09:20:40,487 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:20:40,487 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:20:40,492 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:20:40,494 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 09:20:40,500 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 09:20:40,503 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 09:20:40,506 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: null
2020-05-16 09:20:40,506 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 09:20:40,507 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: null
2020-05-16 09:20:40,507 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 09:20:40,508 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 09:20:40,508 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 09:20:40,509 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:20:40,511 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 09:20:40,512 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Exception: null
2020-05-16 09:20:40,519 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebf4df8226bfb0281f16cb5
2020-05-16 09:20:40,520 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4df8226bfb0281f16cb5] from db
2020-05-16 09:20:41,528 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4df8226bfb0281f16cb5] from db
2020-05-16 09:20:42,535 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4df8226bfb0281f16cb5] from db
2020-05-16 09:20:43,542 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4df8226bfb0281f16cb5] from db
2020-05-16 09:20:43,545 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:20:43,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 09:20:43,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:20:43,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:20:43,553 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:20:43,553 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:20:43,553 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:20:43,553 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:20:43,553 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:20:43,553 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:20:43,554 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 09:20:43,554 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:20:43,554 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 09:20:43,554 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 09:20:43,555 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 09:20:43,555 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":null}
2020-05-16 09:21:42,053 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] Routing file updated
2020-05-16 09:21:42,059 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] New routes created.
2020-05-16 09:21:45,608 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:21:45,610 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:21:45,610 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 09:21:45,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:21:45,612 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 09:21:45,612 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:21:45,612 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: ba3c8330-9739-453f-9c7a-819f96ad4dfa
2020-05-16 09:21:45,613 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:21:45,613 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:21:45,613 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 09:21:45,613 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 09:21:45,613 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 09:21:45,613 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:21:45,613 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 09:21:45,613 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:21:45,614 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:21:45,614 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 09:21:45,616 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 09:21:45,616 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 09:21:45,616 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:21:45,616 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:21:45,620 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:21:45,622 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 09:21:45,626 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 09:21:45,630 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 09:21:45,633 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: null
2020-05-16 09:21:45,634 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 09:21:45,634 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: null
2020-05-16 09:21:45,634 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 09:21:45,635 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 09:21:45,637 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 09:21:45,637 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:21:45,640 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 09:21:45,640 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Exception: null
2020-05-16 09:21:45,647 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebf4e39226bfb0281f16cb7
2020-05-16 09:21:45,647 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4e39226bfb0281f16cb7] from db
2020-05-16 09:21:46,653 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4e39226bfb0281f16cb7] from db
2020-05-16 09:21:47,658 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4e39226bfb0281f16cb7] from db
2020-05-16 09:21:48,662 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4e39226bfb0281f16cb7] from db
2020-05-16 09:21:48,665 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:21:48,672 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 09:21:48,672 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:21:48,672 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:21:48,673 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:21:48,673 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:21:48,673 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:21:48,673 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:21:48,673 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:21:48,673 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:21:48,674 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 09:21:48,674 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:21:48,674 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 09:21:48,674 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 09:21:48,675 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 09:21:48,675 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":null}
2020-05-16 09:22:21,854 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] Routing file updated
2020-05-16 09:22:21,866 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] New routes created.
2020-05-16 09:22:25,637 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:22:25,639 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:22:25,639 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 09:22:25,639 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:22:25,639 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 09:22:25,639 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:22:25,640 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 39f889fe-435f-4137-8613-e0729d01a847
2020-05-16 09:22:25,640 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:22:25,640 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:22:25,640 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 09:22:25,640 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 09:22:25,640 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 09:22:25,641 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:22:25,641 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 09:22:25,641 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:22:25,641 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:22:25,641 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 09:22:25,644 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 09:22:25,645 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 09:22:25,645 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:22:25,645 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:22:25,651 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:22:25,655 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 09:22:25,660 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 09:22:25,664 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 09:22:25,667 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: null
2020-05-16 09:22:25,668 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 09:22:25,669 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: null
2020-05-16 09:22:25,669 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 09:22:25,670 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 09:22:25,670 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 09:22:25,670 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:22:25,673 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='null'}'}
2020-05-16 09:22:25,673 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Exception: null
2020-05-16 09:22:25,681 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebf4e61226bfb0281f16cb9
2020-05-16 09:22:25,682 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4e61226bfb0281f16cb9] from db
2020-05-16 09:22:26,687 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4e61226bfb0281f16cb9] from db
2020-05-16 09:22:27,695 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4e61226bfb0281f16cb9] from db
2020-05-16 09:22:28,705 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf4e61226bfb0281f16cb9] from db
2020-05-16 09:22:28,707 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:22:28,712 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 09:22:28,713 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:22:28,713 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:22:28,713 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:22:28,714 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:22:28,714 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:22:28,714 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:22:28,714 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:22:28,715 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:22:28,715 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 09:22:28,715 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:22:28,716 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 09:22:28,716 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 09:22:28,717 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 09:22:28,717 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":null}
2020-05-16 09:30:51,360 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-05-16 09:30:51,376 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-05-16 09:30:55,740 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:30:55,742 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:30:55,742 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 09:30:55,742 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:30:55,743 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 09:30:55,743 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:30:55,743 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 2ef680df-2cec-40c5-97e0-e672aaa7e557
2020-05-16 09:30:55,744 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:30:55,744 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:30:55,744 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 09:30:55,745 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 09:30:55,745 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 09:30:55,746 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:30:55,746 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 09:30:55,747 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:30:55,747 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:30:55,747 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 09:30:55,859 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 09:30:55,860 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 09:30:55,860 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:30:55,860 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:30:55,868 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:30:55,949 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 09:30:55,965 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 09:30:56,007 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 09:30:56,018 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1234
2020-05-16 09:30:56,019 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 09:30:56,020 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1234
2020-05-16 09:30:56,021 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 09:30:56,025 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:30:56,027 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 09:30:56,027 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:30:56,101 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:30:56,104 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Exception: null
2020-05-16 09:30:56,164 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebf5060226bfb120812d9ad
2020-05-16 09:30:56,166 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5060226bfb120812d9ad] from db
2020-05-16 09:30:57,207 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5060226bfb120812d9ad] from db
2020-05-16 09:30:58,213 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5060226bfb120812d9ad] from db
2020-05-16 09:30:59,219 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5060226bfb120812d9ad] from db
2020-05-16 09:30:59,223 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:30:59,242 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 09:30:59,243 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:30:59,244 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:30:59,245 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:30:59,247 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:30:59,247 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:30:59,248 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:30:59,248 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:30:59,248 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:30:59,248 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 09:30:59,248 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:30:59,248 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 09:30:59,248 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 09:30:59,249 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 09:30:59,249 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1234"}
2020-05-16 09:31:22,913 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:31:22,914 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:31:22,914 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-16 09:31:22,915 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:31:22,915 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-16 09:31:22,915 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:31:22,915 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: 6494da20-bb7a-4012-b03a-679ed90c4e91
2020-05-16 09:31:22,915 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:31:22,916 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:31:22,916 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-16 09:31:22,916 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 231
2020-05-16 09:31:22,916 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-16 09:31:22,917 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:31:22,917 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-16 09:31:22,917 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:31:22,917 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:31:22,917 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-16 09:31:22,923 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-16 09:31:22,924 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-16 09:31:22,924 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:31:22,924 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:31:22,929 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:31:22,930 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 09:31:22,931 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'charge'
2020-05-16 09:31:22,931 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doTelcoCharge] doing telco charging...
2020-05-16 09:31:22,932 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 1234
2020-05-16 09:31:22,932 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-16 09:31:22,932 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 1234
2020-05-16 09:31:22,932 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-16 09:31:22,932 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:31:22,933 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-05-16 09:31:22,933 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:31:22,933 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:31:22,934 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [findRecord] Exception: null
2020-05-16 09:31:22,936 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [insertRequest][to DB] Result ID: 5ebf507a226bfb120812d9ae
2020-05-16 09:31:22,938 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebf507a226bfb120812d9ae] from db
2020-05-16 09:31:23,946 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebf507a226bfb120812d9ae] from db
2020-05-16 09:31:24,952 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebf507a226bfb120812d9ae] from db
2020-05-16 09:31:25,958 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebf507a226bfb120812d9ae] from db
2020-05-16 09:31:25,966 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:31:25,970 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-16 09:31:25,971 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:31:25,972 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:31:25,976 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:31:25,977 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:31:25,977 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:31:25,977 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:31:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:31:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:31:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 09:31:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:31:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-16 09:31:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-16 09:31:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-16 09:31:25,979 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":-1,"trans_id":"1234"}
2020-05-16 09:31:55,695 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] Routing file updated
2020-05-16 09:31:55,718 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] New routes created.
2020-05-16 09:31:58,998 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:31:59,000 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:31:59,001 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 09:31:59,002 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:31:59,002 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 09:31:59,002 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:31:59,003 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 6906e8d1-150f-41a0-bf34-b964d9c8b3bf
2020-05-16 09:31:59,003 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:31:59,004 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:31:59,004 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 09:31:59,004 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 09:31:59,004 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 09:31:59,004 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:31:59,004 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 09:31:59,005 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:31:59,005 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:31:59,005 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 09:31:59,008 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 09:31:59,008 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 09:31:59,008 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:31:59,008 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:31:59,014 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:31:59,017 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 09:31:59,023 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 09:31:59,027 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 09:31:59,032 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1234
2020-05-16 09:31:59,032 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 09:31:59,032 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1234
2020-05-16 09:31:59,033 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 09:31:59,033 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:31:59,034 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 09:31:59,034 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:31:59,039 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:31:59,039 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Exception: null
2020-05-16 09:31:59,049 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebf509f226bfb120812d9b0
2020-05-16 09:31:59,050 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf509f226bfb120812d9b0] from db
2020-05-16 09:32:00,056 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf509f226bfb120812d9b0] from db
2020-05-16 09:32:01,058 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf509f226bfb120812d9b0] from db
2020-05-16 09:32:02,063 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf509f226bfb120812d9b0] from db
2020-05-16 09:32:02,067 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:32:02,074 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 09:32:02,074 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:32:02,074 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:32:02,074 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:32:02,075 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:32:02,075 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:32:02,075 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:32:02,075 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:32:02,076 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:32:02,076 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 09:32:02,076 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:32:02,076 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 09:32:02,076 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 09:32:02,077 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 09:32:02,077 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1234"}
2020-05-16 09:32:18,418 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] Routing file updated
2020-05-16 09:32:18,427 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] New routes created.
2020-05-16 09:32:28,558 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:32:28,560 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:32:28,560 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 09:32:28,561 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:32:28,562 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 09:32:28,562 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:32:28,563 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: c2ac6f9e-d1c8-4e22-bc16-438621174fab
2020-05-16 09:32:28,563 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:32:28,563 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:32:28,564 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 09:32:28,564 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 09:32:28,564 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 09:32:28,565 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:32:28,565 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 09:32:28,566 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:32:28,567 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:32:28,567 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 09:32:28,571 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 09:32:28,571 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 09:32:28,572 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:32:28,572 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:32:28,579 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:32:28,583 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 09:32:28,590 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 09:32:28,593 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 09:32:28,599 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1234
2020-05-16 09:32:28,600 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 09:32:28,600 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1234
2020-05-16 09:32:28,600 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 09:32:28,601 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:32:28,602 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 09:32:28,603 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:32:28,606 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:32:28,606 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Exception: null
2020-05-16 09:32:28,622 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebf50bc226bfb120812d9b2
2020-05-16 09:32:28,623 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50bc226bfb120812d9b2] from db
2020-05-16 09:32:29,636 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50bc226bfb120812d9b2] from db
2020-05-16 09:32:30,641 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50bc226bfb120812d9b2] from db
2020-05-16 09:32:31,651 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50bc226bfb120812d9b2] from db
2020-05-16 09:32:31,655 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:32:31,660 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 09:32:31,660 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:32:31,660 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:32:31,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:32:31,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:32:31,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:32:31,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:32:31,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:32:31,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:32:31,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 09:32:31,661 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:32:31,662 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 09:32:31,662 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 09:32:31,662 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 09:32:31,662 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1234"}
2020-05-16 09:32:56,244 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] Routing file updated
2020-05-16 09:32:56,269 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] New routes created.
2020-05-16 09:33:07,822 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:33:07,823 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:33:07,823 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 09:33:07,824 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:33:07,824 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 09:33:07,824 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:33:07,824 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 20ca1219-945a-4975-981a-fc47aa733a3f
2020-05-16 09:33:07,824 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:33:07,824 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:33:07,825 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 09:33:07,825 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 09:33:07,825 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 09:33:07,825 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:33:07,825 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 09:33:07,825 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:33:07,825 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:33:07,826 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 09:33:07,829 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 09:33:07,830 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 09:33:07,830 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:33:07,830 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:33:07,835 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:33:07,837 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 09:33:07,842 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 09:33:07,845 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 09:33:07,849 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1234
2020-05-16 09:33:07,850 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 09:33:07,850 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1234
2020-05-16 09:33:07,850 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 09:33:07,851 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:33:07,852 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 09:33:07,852 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:33:07,854 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:33:07,863 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebf50e3226bfb120812d9b4
2020-05-16 09:33:07,864 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:33:08,868 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:33:09,873 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:33:10,881 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:33:10,884 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:33:10,887 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 09:33:10,888 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:33:10,888 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:33:10,888 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:33:10,888 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:33:10,888 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:33:10,888 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:33:10,888 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:33:10,889 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:33:10,889 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 09:33:10,889 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:33:10,889 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 09:33:10,889 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 09:33:10,889 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 09:33:10,890 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1234"}
2020-05-16 09:33:11,830 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:33:11,830 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:33:11,830 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-16 09:33:11,830 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:33:11,830 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-16 09:33:11,831 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:33:11,831 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: 47903d56-84e9-4b3d-8eb0-efb7d6a2e3c4
2020-05-16 09:33:11,831 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:33:11,831 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:33:11,831 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-16 09:33:11,831 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 231
2020-05-16 09:33:11,831 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-16 09:33:11,831 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:33:11,832 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-16 09:33:11,832 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:33:11,832 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:33:11,832 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-16 09:33:11,833 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-16 09:33:11,833 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-16 09:33:11,833 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:33:11,833 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:33:11,836 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:33:11,837 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 09:33:11,838 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'charge'
2020-05-16 09:33:11,838 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doTelcoCharge] doing telco charging...
2020-05-16 09:33:11,838 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 1234
2020-05-16 09:33:11,838 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-16 09:33:11,839 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 1234
2020-05-16 09:33:11,839 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-16 09:33:11,839 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:33:11,839 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-05-16 09:33:11,839 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:33:11,840 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:33:11,855 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:33:12,857 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:33:13,869 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:33:14,874 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:33:14,877 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:33:14,881 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-16 09:33:14,881 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:33:14,882 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:33:14,882 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:33:14,882 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:33:14,882 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:33:14,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:33:14,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:33:14,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:33:14,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 09:33:14,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:33:14,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-16 09:33:14,884 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-16 09:33:14,884 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-16 09:33:14,884 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":-1,"trans_id":"1234"}
2020-05-16 09:34:21,156 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] Routing file updated
2020-05-16 09:34:21,181 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] New routes created.
2020-05-16 09:34:30,458 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:34:30,461 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:34:30,461 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 09:34:30,461 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:34:30,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 09:34:30,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:34:30,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: b7430258-4a85-4dbb-a3eb-a051c31f7725
2020-05-16 09:34:30,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:34:30,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:34:30,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 09:34:30,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 231
2020-05-16 09:34:30,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 09:34:30,462 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:34:30,463 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 09:34:30,463 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:34:30,463 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:34:30,463 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 09:34:30,464 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 09:34:30,465 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 09:34:30,465 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:34:30,465 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:34:30,468 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:34:30,469 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1234",
	"service": "charge"
}'
2020-05-16 09:34:30,475 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 09:34:30,477 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 09:34:30,480 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1234
2020-05-16 09:34:30,481 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 09:34:30,481 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1234
2020-05-16 09:34:30,481 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 09:34:30,482 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:34:30,483 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 09:34:30,483 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:34:30,485 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1234'}'}
2020-05-16 09:34:30,491 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Found record: Id=5ebf50e3226bfb120812d9b4
2020-05-16 09:34:30,492 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:34:31,497 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:34:32,502 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:34:33,505 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf50e3226bfb120812d9b4] from db
2020-05-16 09:34:33,509 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:34:33,513 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 09:34:33,517 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:34:33,517 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:34:33,518 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:34:33,519 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:34:33,519 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:34:33,519 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:34:33,520 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:34:33,520 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:34:33,520 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1234",
2020-05-16 09:34:33,521 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:34:33,521 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 09:34:33,521 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 09:34:33,521 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 09:34:33,522 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1234"}
2020-05-16 09:39:30,861 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:39:30,861 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:39:30,861 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-16 09:39:30,862 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:39:30,862 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-16 09:39:30,862 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:39:30,862 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: 6af416f1-b2f7-4cfa-bb98-d7d5e22b559d
2020-05-16 09:39:30,862 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:39:30,862 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:39:30,862 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-16 09:39:30,862 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 236
2020-05-16 09:39:30,863 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-16 09:39:30,863 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:39:30,863 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-16 09:39:30,863 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:39:30,863 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:39:30,863 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-16 09:39:30,864 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-05-16 09:39:30,864 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-05-16 09:39:30,865 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:39:30,865 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:39:30,866 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:39:30,867 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 09:39:30,893 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-05-16 09:39:30,894 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging...
2020-05-16 09:39:30,894 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 123456789
2020-05-16 09:39:30,895 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-05-16 09:39:30,895 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 09:39:30,895 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-05-16 09:39:30,896 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:39:30,898 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = null
2020-05-16 09:39:30,898 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:39:30,899 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:39:30,916 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5ebf5262226bfb120812d9b6
2020-05-16 09:39:30,917 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:39:31,925 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:39:32,939 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:39:33,946 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:39:33,949 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:39:33,953 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> {
2020-05-16 09:39:33,953 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:39:33,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:39:33,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:39:33,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:39:33,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:39:33,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:39:33,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:39:33,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:39:33,954 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 09:39:33,955 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:39:33,955 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> }
2020-05-16 09:39:33,955 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-05-16 09:39:33,955 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-16 09:39:33,955 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 09:42:49,857 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:42:49,857 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:42:49,857 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-05-16 09:42:49,857 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:42:49,857 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-05-16 09:42:49,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:42:49,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: bccf3280-eb18-4668-9996-169b4659270c
2020-05-16 09:42:49,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:42:49,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:42:49,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-05-16 09:42:49,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 236
2020-05-16 09:42:49,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-05-16 09:42:49,858 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:42:49,858 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-05-16 09:42:49,858 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:42:49,858 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:42:49,859 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-05-16 09:42:49,860 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-05-16 09:42:49,860 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-05-16 09:42:49,860 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:42:49,860 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:42:49,862 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:42:49,863 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 09:42:49,865 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'charge'
2020-05-16 09:42:49,865 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doTelcoCharge] doing telco charging...
2020-05-16 09:42:49,866 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 123456789
2020-05-16 09:42:49,867 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-05-16 09:42:49,867 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 09:42:49,867 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-05-16 09:42:49,867 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:42:49,868 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = null
2020-05-16 09:42:49,868 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:42:49,869 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:42:49,872 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 09:42:49,873 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:42:50,879 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:42:51,884 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:42:52,889 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:42:52,892 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:42:52,895 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> {
2020-05-16 09:42:52,895 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:42:52,896 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:42:52,896 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:42:52,896 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:42:52,897 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:42:52,897 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:42:52,897 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:42:52,898 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:42:52,898 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 09:42:52,898 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:42:52,898 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> }
2020-05-16 09:42:52,899 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-05-16 09:42:52,899 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-05-16 09:42:52,899 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 09:43:15,184 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:43:15,184 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:43:15,184 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-type: application/json
2020-05-16 09:43:15,185 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:43:15,185 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept: */*
2020-05-16 09:43:15,185 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:43:15,186 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> postman-token: c653a79d-ee6c-4452-96e8-376db3f87a23
2020-05-16 09:43:15,187 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:43:15,187 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:43:15,187 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> connection: keep-alive
2020-05-16 09:43:15,187 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-length: 236
2020-05-16 09:43:15,188 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>
2020-05-16 09:43:15,188 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:43:15,188 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Ip Adress '127.0.0.1' is valid
2020-05-16 09:43:15,188 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:43:15,188 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:43:15,188 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Looking for the header start with 'PGW'
2020-05-16 09:43:15,190 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] checking authentication for user 'pgw_fptplay'
2020-05-16 09:43:15,190 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] security context was null, so authorizating user
2020-05-16 09:43:15,191 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:43:15,191 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:43:15,193 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:43:15,194 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-6] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 09:43:15,195 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] Service from the request is 'charge'
2020-05-16 09:43:15,196 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] [doTelcoCharge] doing telco charging...
2020-05-16 09:43:15,196 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyParameter] Starting to check request: 123456789
2020-05-16 09:43:15,196 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyParameter] Result: true
2020-05-16 09:43:15,197 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 09:43:15,197 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Result: true
2020-05-16 09:43:15,197 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-6] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:43:15,198 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] msgKeyword = null
2020-05-16 09:43:15,198 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:43:15,199 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-6] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:43:15,203 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 09:43:15,204 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:43:16,212 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:43:17,220 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:43:18,224 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:43:18,227 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:43:18,229 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> {
2020-05-16 09:43:18,230 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:43:18,230 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:43:18,230 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:43:18,230 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:43:18,230 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:43:18,230 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:43:18,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:43:18,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:43:18,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 09:43:18,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:43:18,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> }
2020-05-16 09:43:18,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< 200 OK
2020-05-16 09:43:18,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|<
2020-05-16 09:43:18,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 09:44:07,142 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] Routing file updated
2020-05-16 09:44:07,160 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] New routes created.
2020-05-16 09:44:16,575 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:44:16,577 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:44:16,578 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 09:44:16,578 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:44:16,578 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 09:44:16,578 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:44:16,578 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: b8ac7ff1-29f4-4737-b267-c9f4f3bf44e6
2020-05-16 09:44:16,578 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:44:16,578 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:44:16,579 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 09:44:16,579 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 236
2020-05-16 09:44:16,579 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 09:44:16,579 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:44:16,579 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 09:44:16,579 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:44:16,579 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:44:16,579 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 09:44:16,582 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 09:44:16,583 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 09:44:16,583 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:44:16,583 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:44:16,588 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:44:16,591 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 09:44:16,595 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 09:44:16,597 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 09:44:16,601 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 123456789
2020-05-16 09:44:16,602 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 09:44:16,602 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 09:44:16,603 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 09:44:16,603 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:44:16,604 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 09:44:16,604 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:44:16,606 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:44:16,615 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 09:44:16,617 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:44:17,622 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:44:18,629 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:44:19,635 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:44:19,641 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:44:19,647 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 09:44:19,647 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:44:19,647 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:44:19,647 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:44:19,648 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:44:19,648 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:44:19,648 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:44:19,648 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:44:19,648 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:44:19,648 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 09:44:19,649 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:44:19,649 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 09:44:19,649 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 09:44:19,650 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 09:44:19,650 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 09:48:09,697 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:48:09,700 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:48:09,700 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-16 09:48:09,700 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:48:09,700 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-16 09:48:09,701 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:48:09,701 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: 26431035-d8f4-40e9-be52-ee37459b494c
2020-05-16 09:48:09,701 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:48:09,702 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:48:09,702 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-16 09:48:09,702 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 236
2020-05-16 09:48:09,702 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-16 09:48:09,703 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:48:09,703 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-16 09:48:09,703 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:48:09,703 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:48:09,703 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-16 09:48:09,706 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-05-16 09:48:09,706 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-05-16 09:48:09,706 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:48:09,706 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:48:09,709 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:48:09,710 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 09:48:09,711 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-05-16 09:48:09,712 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging...
2020-05-16 09:48:09,713 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 123456789
2020-05-16 09:48:09,713 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-05-16 09:48:09,713 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 09:48:09,713 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-05-16 09:48:09,714 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:48:09,714 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = null
2020-05-16 09:48:09,715 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:48:09,716 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:48:09,718 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 09:48:09,719 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:48:10,724 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:48:11,728 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:48:12,733 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:48:12,736 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:48:12,739 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> {
2020-05-16 09:48:12,740 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:48:12,740 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:48:12,740 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:48:12,741 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:48:12,741 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:48:12,741 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:48:12,742 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:48:12,742 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:48:12,743 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 09:48:12,743 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:48:12,743 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> }
2020-05-16 09:48:12,744 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-05-16 09:48:12,744 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-16 09:48:12,744 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 09:50:50,936 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:50:50,936 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:50:50,936 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-05-16 09:50:50,936 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:50:50,936 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-05-16 09:50:50,936 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:50:50,936 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: a409fad5-f0a2-4796-8fa7-13465d92525a
2020-05-16 09:50:50,937 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:50:50,937 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:50:50,937 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-05-16 09:50:50,937 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 236
2020-05-16 09:50:50,937 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-05-16 09:50:50,937 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:50:50,937 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-05-16 09:50:50,937 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:50:50,937 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:50:50,937 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-05-16 09:50:50,939 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-05-16 09:50:50,939 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-05-16 09:50:50,939 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:50:50,939 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:50:50,943 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:50:50,945 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 09:50:50,946 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'charge'
2020-05-16 09:50:50,946 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doTelcoCharge] doing telco charging...
2020-05-16 09:50:50,946 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 123456789
2020-05-16 09:50:50,947 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-05-16 09:50:50,947 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 09:50:50,947 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-05-16 09:50:50,947 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:50:50,947 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = null
2020-05-16 09:50:50,948 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:50:50,948 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:50:50,950 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 09:50:50,950 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:50:51,956 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:50:52,963 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:50:53,968 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:50:53,972 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:50:53,974 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> {
2020-05-16 09:50:53,974 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:50:53,975 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:50:53,975 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:50:53,975 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:50:53,975 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:50:53,975 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:50:53,975 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:50:53,975 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:50:53,975 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 09:50:53,975 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:50:53,976 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> }
2020-05-16 09:50:53,976 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-05-16 09:50:53,976 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-05-16 09:50:53,976 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 09:51:39,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:51:39,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:51:39,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-type: application/json
2020-05-16 09:51:39,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:51:39,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept: */*
2020-05-16 09:51:39,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:51:39,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> postman-token: f4c05e81-e032-459f-8281-b56998119259
2020-05-16 09:51:39,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:51:39,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:51:39,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> connection: keep-alive
2020-05-16 09:51:39,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-length: 236
2020-05-16 09:51:39,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>
2020-05-16 09:51:39,747 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:51:39,747 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Ip Adress '127.0.0.1' is valid
2020-05-16 09:51:39,747 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:51:39,747 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:51:39,747 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Looking for the header start with 'PGW'
2020-05-16 09:51:39,748 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] checking authentication for user 'pgw_fptplay'
2020-05-16 09:51:39,748 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] security context was null, so authorizating user
2020-05-16 09:51:39,748 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:51:39,749 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:51:39,750 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:51:39,751 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-7] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 09:51:39,752 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] Service from the request is 'charge'
2020-05-16 09:51:39,752 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] [doTelcoCharge] doing telco charging...
2020-05-16 09:51:39,752 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Starting to check request: 123456789
2020-05-16 09:51:39,752 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Result: true
2020-05-16 09:51:39,753 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 09:51:39,753 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Result: true
2020-05-16 09:51:39,753 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:51:39,753 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] msgKeyword = null
2020-05-16 09:51:39,753 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-7] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:51:39,754 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-7] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:51:39,756 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 09:51:39,757 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:51:40,759 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:51:41,765 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:51:42,771 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:51:42,775 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:51:42,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> {
2020-05-16 09:51:42,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:51:42,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:51:42,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:51:42,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:51:42,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:51:42,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:51:42,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:51:42,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:51:42,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 09:51:42,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:51:42,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> }
2020-05-16 09:51:42,779 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< 200 OK
2020-05-16 09:51:42,779 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|<
2020-05-16 09:51:42,779 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 09:54:29,531 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:54:29,532 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:54:29,532 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-type: application/json
2020-05-16 09:54:29,532 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:54:29,532 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept: */*
2020-05-16 09:54:29,533 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:54:29,533 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> postman-token: 90d185c9-3640-4cb6-8874-900d28b33d39
2020-05-16 09:54:29,533 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:54:29,533 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:54:29,533 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> connection: keep-alive
2020-05-16 09:54:29,533 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-length: 236
2020-05-16 09:54:29,533 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>
2020-05-16 09:54:29,534 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:54:29,534 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Ip Adress '127.0.0.1' is valid
2020-05-16 09:54:29,534 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:54:29,535 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:54:29,535 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Looking for the header start with 'PGW'
2020-05-16 09:54:29,537 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] checking authentication for user 'pgw_fptplay'
2020-05-16 09:54:29,537 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] security context was null, so authorizating user
2020-05-16 09:54:29,537 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:54:29,538 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:54:29,539 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:54:29,540 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-9] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 09:54:29,541 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] Service from the request is 'charge'
2020-05-16 09:54:29,542 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] [doTelcoCharge] doing telco charging...
2020-05-16 09:54:29,542 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Starting to check request: 123456789
2020-05-16 09:54:29,542 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyParameter] Result: true
2020-05-16 09:54:29,542 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 09:54:29,542 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [verifyRequestCredentials] Result: true
2020-05-16 09:54:29,543 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:54:29,543 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] msgKeyword = null
2020-05-16 09:54:29,543 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-9] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:54:29,543 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-9] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:54:29,545 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 09:54:29,546 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:54:30,553 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:54:31,563 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:54:32,571 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:54:32,574 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-9] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:54:32,577 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> {
2020-05-16 09:54:32,578 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:54:32,578 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:54:32,578 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:54:32,579 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:54:32,579 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:54:32,579 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:54:32,579 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:54:32,580 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:54:32,580 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 09:54:32,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:54:32,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> }
2020-05-16 09:54:32,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< 200 OK
2020-05-16 09:54:32,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|<
2020-05-16 09:54:32,581 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 09:57:22,134 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 09:57:22,135 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 09:57:22,135 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 09:57:22,135 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 09:57:22,135 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 09:57:22,135 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 09:57:22,135 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 03122360-9ae0-4dc9-947a-de0133c3d469
2020-05-16 09:57:22,135 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 09:57:22,135 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 09:57:22,135 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 09:57:22,135 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 236
2020-05-16 09:57:22,136 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 09:57:22,136 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 09:57:22,136 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 09:57:22,136 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 09:57:22,136 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 09:57:22,136 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 09:57:22,137 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 09:57:22,137 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 09:57:22,137 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 09:57:22,137 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 09:57:22,139 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 09:57:22,142 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 09:57:22,143 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 09:57:22,143 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 09:57:22,143 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 123456789
2020-05-16 09:57:22,143 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 09:57:22,144 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 09:57:22,144 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 09:57:22,144 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:57:22,144 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 09:57:22,144 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 09:57:22,149 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 09:57:22,153 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 09:57:22,153 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:57:23,160 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:57:24,167 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:57:25,174 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 09:57:25,177 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 09:57:25,180 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 09:57:25,180 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 09:57:25,181 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 09:57:25,181 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 09:57:25,181 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 09:57:25,182 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 09:57:25,182 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 09:57:25,182 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 09:57:25,182 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 09:57:25,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 09:57:25,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 09:57:25,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 09:57:25,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 09:57:25,183 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 09:57:25,184 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 10:20:12,051 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-16 10:20:12,052 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU4OTQ0Mjk5OCwiaWF0IjoxNTg4NTc4OTk4fQ.q3Hd9znZtRLW0_I2mB5e5YrAhBp7FVaFdAD3dVmM2Lytc16iMuMoczipgiYKkYjtFkB8sC9IG8S_JUmBk6uAww
2020-05-16 10:20:12,052 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-16 10:20:12,052 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 10:20:12,052 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-16 10:20:12,052 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-16 10:20:12,052 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: 3febce2a-d154-40bf-8594-afc0f08b7dac
2020-05-16 10:20:12,053 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 10:20:12,054 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 10:20:12,054 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-16 10:20:12,055 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 244
2020-05-16 10:20:12,055 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-16 10:20:12,055 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 10:20:12,055 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-16 10:20:12,056 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 10:20:12,056 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU4OTQ0Mjk5OCwiaWF0IjoxNTg4NTc4OTk4fQ.q3Hd9znZtRLW0_I2mB5e5YrAhBp7FVaFdAD3dVmM2Lytc16iMuMoczipgiYKkYjtFkB8sC9IG8S_JUmBk6uAww'
2020-05-16 10:20:12,056 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-16 10:20:12,058 WARN com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] the token is expired and not valid anymore
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2020-05-14T14:56:38Z. Current time: 2020-05-16T10:20:12Z, a difference of 156214057 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:385)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:481)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:541)
	at com.dz.apigw.security.JwtTokenUtil.getAllClaimsFromToken(JwtTokenUtil.java:56)
	at com.dz.apigw.security.JwtTokenUtil.getClaimFromToken(JwtTokenUtil.java:49)
	at com.dz.apigw.security.JwtTokenUtil.getUsernameFromToken(JwtTokenUtil.java:37)
	at com.dz.apigw.security.JwtAuthorizationTokenFilter.doFilterInternal(JwtAuthorizationTokenFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at com.dz.apigw.security.AuthorizationIPAddressFilter.doFilterWrapped(AuthorizationIPAddressFilter.java:83)
	at com.dz.apigw.security.AuthorizationIPAddressFilter.doFilterInternal(AuthorizationIPAddressFilter.java:67)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:806)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
2020-05-16 10:20:12,064 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 401 Unauthorized
2020-05-16 10:20:12,065 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< X-Content-Type-Options: nosniff
2020-05-16 10:20:12,066 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< X-XSS-Protection: 1; mode=block
2020-05-16 10:20:12,066 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< Cache-Control: no-cache, no-store, max-age=0, must-revalidate
2020-05-16 10:20:12,066 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< Pragma: no-cache
2020-05-16 10:20:12,067 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< Expires: 0
2020-05-16 10:20:12,067 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< X-Frame-Options: SAMEORIGIN
2020-05-16 10:20:12,067 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-16 10:20:30,079 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> POST /payment/apigw
2020-05-16 10:20:30,080 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 10:20:30,080 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-type: application/json
2020-05-16 10:20:30,080 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 10:20:30,081 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept: */*
2020-05-16 10:20:30,081 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> cache-control: no-cache
2020-05-16 10:20:30,081 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> postman-token: 4bf8bfd8-b6bf-47f1-9cd4-5bd44b918c64
2020-05-16 10:20:30,081 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 10:20:30,084 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 10:20:30,085 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> connection: keep-alive
2020-05-16 10:20:30,085 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-length: 244
2020-05-16 10:20:30,085 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>
2020-05-16 10:20:30,085 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 10:20:30,085 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Ip Adress '127.0.0.1' is valid
2020-05-16 10:20:30,086 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 10:20:30,086 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 10:20:30,086 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Looking for the header start with 'PGW'
2020-05-16 10:20:30,087 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] checking authentication for user 'pgw_fptplay'
2020-05-16 10:20:30,088 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] security context was null, so authorizating user
2020-05-16 10:20:30,088 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 10:20:30,088 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 10:20:30,092 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] authorizated user 'pgw_fptplay', setting security context
2020-05-16 10:20:30,094 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-4] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "123499999",
	"service": "otp_confirm"
}'
2020-05-16 10:20:30,127 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] Service from the request is 'otp_confirm'
2020-05-16 10:20:30,131 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] [doOTPConfirm] doing otp confirm...
2020-05-16 10:20:30,137 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-4] [verifyParameter] Starting to check request: 123499999
2020-05-16 10:20:30,137 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-4] [verifyParameter] Result: true
2020-05-16 10:20:30,137 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Starting to check request: 123499999
2020-05-16 10:20:30,138 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Result: true
2020-05-16 10:20:30,139 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-4] Send msg = Notification {notificationType='OTP_CONFIRM_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='OTPCONFIRM_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='otp_confirm', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='null',trans_id='123499999'}'}
2020-05-16 10:20:30,139 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-4] msgKeyword = null
2020-05-16 10:20:30,140 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-4] Destination found: name = PAYMENTGW.TELCO.OTPCONFIRM.REQUEST.VINAPHONE, keyword = null
2020-05-16 10:20:30,141 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-4] Msg sent to queue[queue:'PAYMENTGW.TELCO.OTPCONFIRM.REQUEST.VINAPHONE']= Notification {notificationType='OTP_CONFIRM_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='OTPCONFIRM_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='otp_confirm', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='null',trans_id='123499999'}'}
2020-05-16 10:20:30,345 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-4] [insertRequest][to DB] Result ID: 5ebf5bfe226bfb120812d9b9
2020-05-16 10:20:30,346 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebf5bfe226bfb120812d9b9] from db
2020-05-16 10:20:31,359 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebf5bfe226bfb120812d9b9] from db
2020-05-16 10:20:32,368 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebf5bfe226bfb120812d9b9] from db
2020-05-16 10:20:33,375 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebf5bfe226bfb120812d9b9] from db
2020-05-16 10:20:33,381 WARN com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 10:20:33,385 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> {
2020-05-16 10:20:33,386 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 10:20:33,386 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 10:20:33,386 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 10:20:33,386 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 10:20:33,386 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 10:20:33,386 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 10:20:33,386 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"account": "dz",
2020-05-16 10:20:33,386 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-05-16 10:20:33,387 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"trans_id": "123499999",
2020-05-16 10:20:33,387 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service": "otp_confirm"
2020-05-16 10:20:33,387 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> }
2020-05-16 10:20:33,388 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< 200 OK
2020-05-16 10:20:33,388 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|<
2020-05-16 10:20:33,388 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< {"error_code":-1,"trans_id":"123499999","message":null}
2020-05-16 10:23:53,657 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-21-thread-1] Routing file updated
2020-05-16 10:23:53,667 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-21-thread-1] New routes created.
2020-05-16 10:24:00,441 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 10:24:00,443 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 10:24:00,443 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 10:24:00,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 10:24:00,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 10:24:00,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 10:24:00,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: a90f57fc-5cf1-433c-95f2-a54e02b48a05
2020-05-16 10:24:00,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 10:24:00,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 10:24:00,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 10:24:00,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 244
2020-05-16 10:24:00,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 10:24:00,445 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 10:24:00,445 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 10:24:00,445 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 10:24:00,445 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 10:24:00,446 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 10:24:00,447 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 10:24:00,447 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 10:24:00,448 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 10:24:00,448 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 10:24:00,452 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 10:24:00,454 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "123499999",
	"service": "otp_confirm"
}'
2020-05-16 10:24:00,460 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'otp_confirm'
2020-05-16 10:24:00,461 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doOTPConfirm] doing otp confirm...
2020-05-16 10:24:00,463 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 123499999
2020-05-16 10:24:00,464 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 10:24:00,464 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 123499999
2020-05-16 10:24:00,464 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 10:24:00,464 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='OTP_CONFIRM_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='OTPCONFIRM_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='otp_confirm', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='null',trans_id='123499999'}'}
2020-05-16 10:24:00,465 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 10:24:00,465 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.OTPCONFIRM.REQUEST.VINAPHONE, keyword = null
2020-05-16 10:24:00,469 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.OTPCONFIRM.REQUEST.VINAPHONE']= Notification {notificationType='OTP_CONFIRM_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='OTPCONFIRM_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='otp_confirm', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='null',trans_id='123499999'}'}
2020-05-16 10:24:00,478 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebf5cd0226bfb120812d9bc
2020-05-16 10:24:00,478 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5cd0226bfb120812d9bc] from db
2020-05-16 10:24:01,484 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5cd0226bfb120812d9bc] from db
2020-05-16 10:24:02,490 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5cd0226bfb120812d9bc] from db
2020-05-16 10:24:03,495 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5cd0226bfb120812d9bc] from db
2020-05-16 10:24:03,498 WARN com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 10:24:03,504 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 10:24:03,504 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 10:24:03,504 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 10:24:03,505 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 10:24:03,505 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 10:24:03,505 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 10:24:03,505 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 10:24:03,505 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 10:24:03,506 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-05-16 10:24:03,506 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "123499999",
2020-05-16 10:24:03,506 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "otp_confirm"
2020-05-16 10:24:03,506 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 10:24:03,506 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 10:24:03,507 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 10:24:03,507 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"123499999","message":null}
2020-05-16 11:04:51,490 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-16 11:04:51,491 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 11:04:51,491 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-16 11:04:51,492 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 11:04:51,492 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-16 11:04:51,492 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-16 11:04:51,492 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: 3a569bab-d40f-4824-b5b9-7b12351e54ab
2020-05-16 11:04:51,492 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 11:04:51,492 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 11:04:51,492 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-16 11:04:51,493 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 236
2020-05-16 11:04:51,493 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-16 11:04:51,493 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 11:04:51,493 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-16 11:04:51,493 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 11:04:51,493 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 11:04:51,493 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-16 11:04:51,495 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-05-16 11:04:51,496 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-05-16 11:04:51,496 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 11:04:51,496 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 11:04:51,500 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-05-16 11:04:51,502 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 11:04:51,522 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-05-16 11:04:51,524 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging...
2020-05-16 11:04:51,530 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 123456789
2020-05-16 11:04:51,530 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-05-16 11:04:51,531 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 11:04:51,531 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-05-16 11:04:51,532 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 11:04:51,533 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = null
2020-05-16 11:04:51,533 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 11:04:51,534 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 11:04:51,558 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 11:04:51,559 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 11:04:52,575 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 11:04:53,582 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 11:04:54,585 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 11:04:54,589 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 11:04:54,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> {
2020-05-16 11:04:54,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 11:04:54,592 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 11:04:54,592 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 11:04:54,592 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 11:04:54,592 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 11:04:54,592 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 11:04:54,592 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"account": "dz",
2020-05-16 11:04:54,593 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cmd": "register",
2020-05-16 11:04:54,593 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 11:04:54,594 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service": "charge"
2020-05-16 11:04:54,594 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> }
2020-05-16 11:04:54,594 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-05-16 11:04:54,594 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-16 11:04:54,594 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 11:07:27,718 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-24-thread-1] Routing file updated
2020-05-16 11:07:27,723 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-24-thread-1] New routes created.
2020-05-16 11:07:38,780 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 11:07:38,782 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 11:07:38,782 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 11:07:38,782 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 11:07:38,782 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 11:07:38,782 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 11:07:38,782 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 6e075220-6f24-4650-bf1a-4ee4b8b14d73
2020-05-16 11:07:38,782 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 11:07:38,783 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 11:07:38,783 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 11:07:38,783 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 236
2020-05-16 11:07:38,783 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 11:07:38,783 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 11:07:38,783 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 11:07:38,783 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 11:07:38,783 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 11:07:38,784 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 11:07:38,785 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 11:07:38,785 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 11:07:38,785 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 11:07:38,785 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 11:07:38,788 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 11:07:38,789 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 11:07:38,798 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 11:07:38,800 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 11:07:38,802 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 123456789
2020-05-16 11:07:38,802 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 11:07:38,803 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 11:07:38,803 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 11:07:38,803 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 11:07:38,804 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 11:07:38,804 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 11:07:38,806 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 11:07:38,819 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 11:07:38,819 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 11:07:39,824 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 11:07:40,840 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 11:07:41,847 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebf5262226bfb120812d9b6] from db
2020-05-16 11:07:41,851 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 11:07:41,857 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 11:07:41,857 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 11:07:41,857 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 11:07:41,857 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 11:07:41,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 11:07:41,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 11:07:41,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 11:07:41,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 11:07:41,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 11:07:41,858 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 11:07:41,859 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 11:07:41,859 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 11:07:41,859 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 11:07:41,860 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 11:07:41,860 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 11:08:10,802 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-16 11:08:10,803 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 11:08:10,803 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-16 11:08:10,803 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 11:08:10,803 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-16 11:08:10,803 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-16 11:08:10,803 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: 84f248c1-8707-4a5c-b35e-905ba738d9ce
2020-05-16 11:08:10,804 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 11:08:10,804 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 11:08:10,804 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-16 11:08:10,804 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 236
2020-05-16 11:08:10,804 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-16 11:08:10,804 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 11:08:10,804 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-16 11:08:10,804 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 11:08:10,805 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 11:08:10,805 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-16 11:08:10,806 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-16 11:08:10,806 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-16 11:08:10,807 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 11:08:10,807 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 11:08:10,810 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-16 11:08:10,811 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 11:08:10,812 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'charge'
2020-05-16 11:08:10,813 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doTelcoCharge] doing telco charging...
2020-05-16 11:08:10,813 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 123456789
2020-05-16 11:08:10,813 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-16 11:08:10,813 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 11:08:10,813 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-16 11:08:10,814 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 11:08:10,814 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-05-16 11:08:10,814 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 11:08:10,814 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 11:08:10,816 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 11:08:10,818 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-16 11:08:10,818 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 11:08:10,818 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 11:08:10,818 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 11:08:10,818 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 11:08:10,818 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 11:08:10,819 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 11:08:10,819 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-05-16 11:08:10,819 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cmd": "register",
2020-05-16 11:08:10,819 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 11:08:10,819 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "charge"
2020-05-16 11:08:10,819 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-16 11:08:10,819 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-16 11:08:10,820 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-16 11:08:10,820 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":0,"trans_id":"123456789"}
2020-05-16 11:08:30,851 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-16 11:08:30,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 11:08:30,852 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-16 11:08:30,854 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 11:08:30,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-16 11:08:30,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-16 11:08:30,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: ab236300-49b1-469a-90a0-51fb5241342a
2020-05-16 11:08:30,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 11:08:30,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 11:08:30,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-16 11:08:30,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 236
2020-05-16 11:08:30,856 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-16 11:08:30,856 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 11:08:30,856 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-16 11:08:30,856 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 11:08:30,856 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 11:08:30,856 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-16 11:08:30,857 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-05-16 11:08:30,857 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-05-16 11:08:30,858 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 11:08:30,858 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 11:08:30,861 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-05-16 11:08:30,862 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 11:08:30,863 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-05-16 11:08:30,864 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging...
2020-05-16 11:08:30,865 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 123456789
2020-05-16 11:08:30,865 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-05-16 11:08:30,866 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 11:08:30,866 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-05-16 11:08:30,867 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 11:08:30,867 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = null
2020-05-16 11:08:30,867 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 11:08:30,868 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='123456789'}'}
2020-05-16 11:08:30,945 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 11:08:30,947 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> {
2020-05-16 11:08:30,947 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 11:08:30,947 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 11:08:30,947 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 11:08:30,948 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 11:08:30,948 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 11:08:30,948 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 11:08:30,948 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"account": "dz",
2020-05-16 11:08:30,948 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cmd": "register",
2020-05-16 11:08:30,948 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 11:08:30,949 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service": "charge"
2020-05-16 11:08:30,949 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> }
2020-05-16 11:08:30,949 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-05-16 11:08:30,949 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-16 11:08:30,949 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":0,"trans_id":"123456789"}
2020-05-16 11:10:14,981 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-27-thread-1] Routing file updated
2020-05-16 11:10:14,988 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-27-thread-1] New routes created.
2020-05-16 11:10:18,479 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 11:10:18,481 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 11:10:18,482 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 11:10:18,482 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 11:10:18,482 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 11:10:18,482 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 11:10:18,483 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 03531c97-d8bb-4d1b-82d5-4a2c6fb43386
2020-05-16 11:10:18,483 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 11:10:18,483 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 11:10:18,483 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 11:10:18,484 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 236
2020-05-16 11:10:18,484 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 11:10:18,484 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 11:10:18,484 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 11:10:18,485 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 11:10:18,485 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 11:10:18,485 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 11:10:18,487 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 11:10:18,488 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 11:10:18,488 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 11:10:18,488 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 11:10:18,493 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 11:10:18,494 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 11:10:18,498 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 11:10:18,500 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 11:10:18,502 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 123456789
2020-05-16 11:10:18,503 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 11:10:18,503 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 11:10:18,504 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 11:10:18,511 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 11:10:18,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 11:10:18,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 11:10:18,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 11:10:18,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 11:10:18,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 11:10:18,515 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 11:10:18,515 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 11:10:18,515 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 11:10:18,515 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 11:10:18,515 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 11:10:18,515 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 11:10:18,515 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 11:10:18,516 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 11:10:18,516 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 11:10:18,516 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":0,"trans_id":"123456789"}
2020-05-16 11:10:33,760 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-16 11:10:33,760 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 11:10:33,760 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-16 11:10:33,760 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 11:10:33,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-16 11:10:33,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-16 11:10:33,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: f4860306-0687-45d5-9c62-ecc52f5d7a6c
2020-05-16 11:10:33,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 11:10:33,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 11:10:33,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-16 11:10:33,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 236
2020-05-16 11:10:33,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-16 11:10:33,761 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 11:10:33,761 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-16 11:10:33,762 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 11:10:33,762 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 11:10:33,762 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-16 11:10:33,763 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-16 11:10:33,763 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-16 11:10:33,763 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 11:10:33,763 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 11:10:33,766 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-16 11:10:33,767 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "123456789",
	"service": "charge"
}'
2020-05-16 11:10:33,769 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'charge'
2020-05-16 11:10:33,769 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doTelcoCharge] doing telco charging...
2020-05-16 11:10:33,770 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 123456789
2020-05-16 11:10:33,770 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-16 11:10:33,770 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 123456789
2020-05-16 11:10:33,771 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-16 11:10:33,774 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [findRecord] Found record: Id=5ebf5262226bfb120812d9b6
2020-05-16 11:10:33,774 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 11:10:34,784 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 11:10:35,789 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 11:10:36,797 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 11:10:36,800 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 11:10:36,803 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-16 11:10:36,803 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 11:10:36,804 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 11:10:36,804 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 11:10:36,804 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 11:10:36,804 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 11:10:36,805 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 11:10:36,805 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-05-16 11:10:36,805 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cmd": "register",
2020-05-16 11:10:36,806 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "123456789",
2020-05-16 11:10:36,806 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "charge"
2020-05-16 11:10:36,806 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-16 11:10:36,806 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-16 11:10:36,807 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-16 11:10:36,807 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":-1,"trans_id":"123456789"}
2020-05-16 11:36:22,970 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-30-thread-1] Routing file updated
2020-05-16 11:36:22,987 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-30-thread-1] New routes created.
2020-05-16 11:40:38,440 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-33-thread-1] Routing file updated
2020-05-16 11:40:38,455 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-33-thread-1] New routes created.
2020-05-16 15:51:00,771 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-05-16 15:51:00,787 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-05-16 15:51:22,013 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /login
2020-05-16 15:51:22,016 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 15:51:22,016 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:51:22,017 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 15:51:22,017 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:51:22,017 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 18059a4f-6a1a-4af4-9c25-d0c6b5dd565a
2020-05-16 15:51:22,018 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:51:22,018 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:51:22,018 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 15:51:22,018 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 87
2020-05-16 15:51:22,019 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 15:51:22,019 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:51:22,019 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 15:51:22,020 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/login' ...
2020-05-16 15:51:22,020 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'null'
2020-05-16 15:51:22,021 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 15:51:22,021 WARN com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] couldn't find PGW string, will ignore the header
2020-05-16 15:51:22,208 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:51:22,209 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:51:22,517 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:51:22,519 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:51:22,688 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 15:51:22,688 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"username": "pgw_fptplay",
2020-05-16 15:51:22,688 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"password": "F311P@ay2o201446!@#",
2020-05-16 15:51:22,688 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "login"
2020-05-16 15:51:22,689 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 15:51:22,689 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 15:51:22,691 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 15:51:22,692 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":0,"session":"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQ4MzA4MiwiaWF0IjoxNTg5NjE5MDgyfQ.PopeBz8Cz1VkY66UdGey3ksB11OdbanM--R_vs-3gIm0HMU3Ifso_Iqd4_mRHJgsurrcNWJZTHmep0fL_c1KzA","message":"Login successfully , username=pgw_fptplay"}
2020-05-16 15:51:36,918 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:51:36,920 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:51:36,920 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-16 15:51:36,921 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:51:36,924 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-16 15:51:36,925 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:51:36,926 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: c772a273-50bd-43cb-9a45-77de749e2c32
2020-05-16 15:51:36,926 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:51:36,927 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:51:36,927 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-16 15:51:36,927 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 228
2020-05-16 15:51:36,927 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-16 15:51:36,928 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:51:36,928 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-16 15:51:36,928 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:51:36,928 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:51:36,928 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-16 15:51:36,960 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-16 15:51:36,960 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-16 15:51:36,961 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:51:36,961 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:51:36,968 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:51:36,971 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1",
	"service": "charge"
}'
2020-05-16 15:51:36,978 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'charge'
2020-05-16 15:51:36,983 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doTelcoCharge] doing telco charging...
2020-05-16 15:51:36,993 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 1
2020-05-16 15:51:36,995 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-16 15:51:36,995 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 1
2020-05-16 15:51:36,996 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-16 15:51:37,160 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1',price='0',evenTime='null',errorCode='0'}'}
2020-05-16 15:51:37,162 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-05-16 15:51:37,163 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 15:51:37,215 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1',price='0',evenTime='null',errorCode='0'}'}
2020-05-16 15:51:37,434 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [insertRequest][to DB] Result ID: 5ebfa999226bfbf62efc7539
2020-05-16 15:51:37,436 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfa999226bfbf62efc7539] from db
2020-05-16 15:51:38,449 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfa999226bfbf62efc7539] from db
2020-05-16 15:51:39,453 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfa999226bfbf62efc7539] from db
2020-05-16 15:51:40,464 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfa999226bfbf62efc7539] from db
2020-05-16 15:51:40,466 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 15:51:40,470 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-16 15:51:40,471 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:51:40,472 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:51:40,473 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:51:40,473 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:51:40,473 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:51:40,474 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:51:40,474 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:51:40,474 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cmd": "register",
2020-05-16 15:51:40,475 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "1",
2020-05-16 15:51:40,476 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "charge"
2020-05-16 15:51:40,476 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-16 15:51:40,477 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-16 15:51:40,477 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-16 15:51:40,477 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":-1,"trans_id":"1"}
2020-05-16 15:52:16,144 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:52:16,145 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:52:16,146 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-type: application/json
2020-05-16 15:52:16,146 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:52:16,146 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept: */*
2020-05-16 15:52:16,147 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:52:16,147 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> postman-token: b31f4dba-9fee-4809-bba8-38b74a66798b
2020-05-16 15:52:16,147 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:52:16,147 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:52:16,147 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> connection: keep-alive
2020-05-16 15:52:16,147 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-length: 228
2020-05-16 15:52:16,147 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>
2020-05-16 15:52:16,148 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:52:16,148 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Ip Adress '127.0.0.1' is valid
2020-05-16 15:52:16,148 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:52:16,148 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:52:16,148 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Looking for the header start with 'PGW'
2020-05-16 15:52:16,150 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] checking authentication for user 'pgw_fptplay'
2020-05-16 15:52:16,152 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] security context was null, so authorizating user
2020-05-16 15:52:16,152 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:52:16,152 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:52:16,156 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:52:16,158 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-4] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1",
	"service": "charge"
}'
2020-05-16 15:52:16,160 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] Service from the request is 'charge'
2020-05-16 15:52:16,161 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] [doTelcoCharge] doing telco charging...
2020-05-16 15:52:16,161 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyParameter] Starting to check request: 1
2020-05-16 15:52:16,162 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyParameter] Result: true
2020-05-16 15:52:16,162 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Starting to check request: 1
2020-05-16 15:52:16,162 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Result: true
2020-05-16 15:52:16,173 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [findRecord] Found record: Id=5ebfa999226bfbf62efc7539
2020-05-16 15:52:16,174 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:17,178 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:18,184 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:19,196 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:19,200 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 15:52:19,204 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> {
2020-05-16 15:52:19,204 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:52:19,205 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:52:19,205 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:52:19,205 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:52:19,206 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:52:19,206 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:52:19,206 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:52:19,206 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"cmd": "register",
2020-05-16 15:52:19,207 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"trans_id": "1",
2020-05-16 15:52:19,207 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service": "charge"
2020-05-16 15:52:19,207 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> }
2020-05-16 15:52:19,207 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< 200 OK
2020-05-16 15:52:19,207 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|<
2020-05-16 15:52:19,208 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< {"error_code":-1,"trans_id":"1"}
2020-05-16 15:52:21,589 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:52:21,590 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:52:21,590 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-05-16 15:52:21,590 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:52:21,590 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-05-16 15:52:21,590 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:52:21,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: 70aabe57-a5ce-4b36-bd90-8df20b002641
2020-05-16 15:52:21,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:52:21,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:52:21,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-05-16 15:52:21,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 228
2020-05-16 15:52:21,591 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-05-16 15:52:21,591 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:52:21,592 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-05-16 15:52:21,592 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:52:21,592 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:52:21,592 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-05-16 15:52:21,594 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-05-16 15:52:21,595 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-05-16 15:52:21,595 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:52:21,595 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:52:21,601 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:52:21,605 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1",
	"service": "charge"
}'
2020-05-16 15:52:21,623 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'charge'
2020-05-16 15:52:21,624 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doTelcoCharge] doing telco charging...
2020-05-16 15:52:21,625 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 1
2020-05-16 15:52:21,626 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-05-16 15:52:21,626 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 1
2020-05-16 15:52:21,627 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-05-16 15:52:21,629 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [findRecord] Found record: Id=5ebfa999226bfbf62efc7539
2020-05-16 15:52:21,630 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:22,635 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:23,643 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:24,650 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:24,655 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 15:52:24,657 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> {
2020-05-16 15:52:24,657 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:52:24,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:52:24,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:52:24,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:52:24,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:52:24,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:52:24,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:52:24,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"cmd": "register",
2020-05-16 15:52:24,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"trans_id": "1",
2020-05-16 15:52:24,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service": "charge"
2020-05-16 15:52:24,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> }
2020-05-16 15:52:24,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-05-16 15:52:24,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-05-16 15:52:24,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":-1,"trans_id":"1"}
2020-05-16 15:52:27,564 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:52:27,565 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:52:27,565 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-type: application/json
2020-05-16 15:52:27,565 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:52:27,565 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept: */*
2020-05-16 15:52:27,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:52:27,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> postman-token: deeee164-2aed-444a-b091-a6a9dd2afad2
2020-05-16 15:52:27,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:52:27,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:52:27,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> connection: keep-alive
2020-05-16 15:52:27,567 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-length: 228
2020-05-16 15:52:27,567 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>
2020-05-16 15:52:27,567 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:52:27,567 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Ip Adress '127.0.0.1' is valid
2020-05-16 15:52:27,567 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:52:27,567 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:52:27,567 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Looking for the header start with 'PGW'
2020-05-16 15:52:27,569 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] checking authentication for user 'pgw_fptplay'
2020-05-16 15:52:27,569 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] security context was null, so authorizating user
2020-05-16 15:52:27,570 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:52:27,570 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:52:27,577 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:52:27,580 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-6] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1",
	"service": "charge"
}'
2020-05-16 15:52:27,581 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] Service from the request is 'charge'
2020-05-16 15:52:27,582 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] [doTelcoCharge] doing telco charging...
2020-05-16 15:52:27,583 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyParameter] Starting to check request: 1
2020-05-16 15:52:27,584 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyParameter] Result: true
2020-05-16 15:52:27,584 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Starting to check request: 1
2020-05-16 15:52:27,585 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Result: true
2020-05-16 15:52:27,587 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [findRecord] Found record: Id=5ebfa999226bfbf62efc7539
2020-05-16 15:52:27,588 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:28,595 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:29,602 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:30,610 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:52:30,614 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 15:52:30,618 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> {
2020-05-16 15:52:30,619 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:52:30,619 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:52:30,619 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:52:30,620 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:52:30,620 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:52:30,621 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:52:30,621 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:52:30,621 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"cmd": "register",
2020-05-16 15:52:30,621 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"trans_id": "1",
2020-05-16 15:52:30,622 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service": "charge"
2020-05-16 15:52:30,622 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> }
2020-05-16 15:52:30,623 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< 200 OK
2020-05-16 15:52:30,623 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|<
2020-05-16 15:52:30,624 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< {"error_code":-1,"trans_id":"1"}
2020-05-16 15:52:43,267 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:52:43,268 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:52:43,268 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-type: application/json
2020-05-16 15:52:43,269 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:52:43,269 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept: */*
2020-05-16 15:52:43,269 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:52:43,270 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> postman-token: 39216846-8603-4719-9913-e451f87dec30
2020-05-16 15:52:43,270 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:52:43,270 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:52:43,270 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> connection: keep-alive
2020-05-16 15:52:43,270 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> content-length: 228
2020-05-16 15:52:43,270 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|>
2020-05-16 15:52:43,271 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:52:43,273 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] Ip Adress '127.0.0.1' is valid
2020-05-16 15:52:43,274 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:52:43,274 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:52:43,275 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] Looking for the header start with 'PGW'
2020-05-16 15:52:43,276 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] checking authentication for user 'pgw_fptplay'
2020-05-16 15:52:43,277 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] security context was null, so authorizating user
2020-05-16 15:52:43,277 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:52:43,286 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-7] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:52:43,294 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-7] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:52:43,296 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-7] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1",
	"service": "charge"
}'
2020-05-16 15:52:43,305 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] Service from the request is 'charge'
2020-05-16 15:52:43,306 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-7] [doTelcoCharge] doing telco charging...
2020-05-16 15:52:43,307 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Starting to check request: 1
2020-05-16 15:52:43,307 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyParameter] Result: true
2020-05-16 15:52:43,308 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Starting to check request: 1
2020-05-16 15:52:43,309 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [verifyRequestCredentials] Result: true
2020-05-16 15:52:43,311 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [findRecord] Found record: Id=5ebfa999226bfbf62efc7539
2020-05-16 15:52:43,352 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-7] [deleteRecord] The request 5ebfa999226bfbf62efc7539 is deleted completely!
2020-05-16 15:52:43,355 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> {
2020-05-16 15:52:43,356 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:52:43,357 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:52:43,357 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:52:43,357 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:52:43,357 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:52:43,357 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:52:43,357 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:52:43,358 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"cmd": "register",
2020-05-16 15:52:43,358 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"trans_id": "1",
2020-05-16 15:52:43,358 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> 	"service": "charge"
2020-05-16 15:52:43,358 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|> }
2020-05-16 15:52:43,358 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< 200 OK
2020-05-16 15:52:43,359 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|<
2020-05-16 15:52:43,359 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-7] 127.0.0.1|< {"error_code":0,"trans_id":"1"}
2020-05-16 15:53:34,435 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:53:34,436 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:53:34,437 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-type: application/json
2020-05-16 15:53:34,437 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:53:34,438 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept: */*
2020-05-16 15:53:34,439 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:53:34,439 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> postman-token: 8e71b4d7-97a5-4d31-a08c-57d0a03444ff
2020-05-16 15:53:34,439 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:53:34,440 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:53:34,440 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> connection: keep-alive
2020-05-16 15:53:34,440 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> content-length: 236
2020-05-16 15:53:34,441 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|>
2020-05-16 15:53:34,441 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:53:34,441 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] Ip Adress '127.0.0.1' is valid
2020-05-16 15:53:34,442 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:53:34,442 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:53:34,443 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] Looking for the header start with 'PGW'
2020-05-16 15:53:34,445 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] checking authentication for user 'pgw_fptplay'
2020-05-16 15:53:34,445 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] security context was null, so authorizating user
2020-05-16 15:53:34,446 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:53:34,446 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-9] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:53:34,449 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-9] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:53:34,451 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-9] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "2",
	"service": "otp_confirm"
}'
2020-05-16 15:53:34,452 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-9] Service from the request is 'otp_confirm'
2020-05-16 15:53:34,461 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> {
2020-05-16 15:53:34,461 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:53:34,461 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:53:34,461 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:53:34,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:53:34,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:53:34,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:53:34,462 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:53:34,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-05-16 15:53:34,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"trans_id": "2",
2020-05-16 15:53:34,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> 	"service": "otp_confirm"
2020-05-16 15:53:34,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|> }
2020-05-16 15:53:34,463 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|< 200 OK
2020-05-16 15:53:34,464 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-9] 127.0.0.1|<
2020-05-16 15:53:57,957 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:53:57,958 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:53:57,958 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> content-type: application/json
2020-05-16 15:53:57,959 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:53:57,960 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> accept: */*
2020-05-16 15:53:57,961 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:53:57,961 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> postman-token: 7e4e186a-1827-4293-b0b8-148af8a43553
2020-05-16 15:53:57,961 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:53:57,962 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:53:57,962 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> connection: keep-alive
2020-05-16 15:53:57,963 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> content-length: 236
2020-05-16 15:53:57,964 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|>
2020-05-16 15:53:57,964 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:53:57,964 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] Ip Adress '127.0.0.1' is valid
2020-05-16 15:53:57,964 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:53:57,964 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:53:57,964 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] Looking for the header start with 'PGW'
2020-05-16 15:53:57,965 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] checking authentication for user 'pgw_fptplay'
2020-05-16 15:53:57,965 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] security context was null, so authorizating user
2020-05-16 15:53:57,966 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-10] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:53:57,966 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-10] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:53:57,968 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-10] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:53:57,971 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-10] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "2",
	"service": "otp_confirm"
}'
2020-05-16 15:53:57,974 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-10] Service from the request is 'otp_confirm'
2020-05-16 15:53:57,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> {
2020-05-16 15:53:57,986 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:53:57,987 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:53:57,987 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:53:57,987 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:53:57,987 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:53:57,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:53:57,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:53:57,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-05-16 15:53:57,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> 	"trans_id": "2",
2020-05-16 15:53:57,988 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> 	"service": "otp_confirm"
2020-05-16 15:53:57,989 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|> }
2020-05-16 15:53:57,989 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|< 200 OK
2020-05-16 15:53:57,989 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-10] 127.0.0.1|<
2020-05-16 15:54:34,512 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] Routing file updated
2020-05-16 15:54:34,518 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] New routes created.
2020-05-16 15:55:06,245 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] Routing file updated
2020-05-16 15:55:06,265 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] New routes created.
2020-05-16 15:55:09,040 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:55:09,042 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:55:09,043 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 15:55:09,043 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:55:09,043 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 15:55:09,043 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:55:09,044 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 7c624e57-4186-4333-b9ad-e1e5cde7d840
2020-05-16 15:55:09,044 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:55:09,044 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:55:09,044 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 15:55:09,044 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 236
2020-05-16 15:55:09,044 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 15:55:09,045 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:55:09,045 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 15:55:09,045 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:55:09,046 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:55:09,046 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 15:55:09,048 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 15:55:09,049 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 15:55:09,049 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:55:09,049 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:55:09,056 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:55:09,059 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "2",
	"service": "otp_confirm"
}'
2020-05-16 15:55:09,068 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'otp_confirm'
2020-05-16 15:55:09,074 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doOTPConfirm] doing otp confirm...
2020-05-16 15:55:09,078 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 2
2020-05-16 15:55:09,078 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 15:55:09,079 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 2
2020-05-16 15:55:09,079 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 15:55:09,119 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='OTP_CONFIRM_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='OTPCONFIRM_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='otp_confirm', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='null',trans_id='2',price='0',evenTime='null',errorCode='0'}'}
2020-05-16 15:55:09,120 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 15:55:09,120 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.OTPCONFIRM.REQUEST.VINAPHONE, keyword = null
2020-05-16 15:55:09,123 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.OTPCONFIRM.REQUEST.VINAPHONE']= Notification {notificationType='OTP_CONFIRM_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='OTPCONFIRM_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='otp_confirm', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='null',trans_id='2',price='0',evenTime='null',errorCode='0'}'}
2020-05-16 15:55:09,182 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfaa6d226bfbf62efc753e
2020-05-16 15:55:09,183 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfaa6d226bfbf62efc753e] from db
2020-05-16 15:55:10,191 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfaa6d226bfbf62efc753e] from db
2020-05-16 15:55:11,198 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfaa6d226bfbf62efc753e] from db
2020-05-16 15:55:12,206 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfaa6d226bfbf62efc753e] from db
2020-05-16 15:55:12,210 WARN com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 15:55:12,216 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 15:55:12,217 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:55:12,217 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:55:12,218 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:55:12,218 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:55:12,218 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:55:12,218 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:55:12,218 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:55:12,218 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-05-16 15:55:12,219 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "2",
2020-05-16 15:55:12,219 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "otp_confirm"
2020-05-16 15:55:12,219 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 15:55:12,219 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 15:55:12,219 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 15:55:12,220 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"2","message":null}
2020-05-16 15:55:24,217 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:55:24,219 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:55:24,220 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-16 15:55:24,220 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:55:24,221 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-16 15:55:24,221 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:55:24,221 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: df3b0ad7-3390-468e-b19d-8fefa1456543
2020-05-16 15:55:24,221 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:55:24,221 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:55:24,222 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-16 15:55:24,222 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 236
2020-05-16 15:55:24,222 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-16 15:55:24,222 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:55:24,222 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-16 15:55:24,222 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:55:24,222 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:55:24,222 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-16 15:55:24,224 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-16 15:55:24,224 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-16 15:55:24,224 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:55:24,224 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:55:24,227 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:55:24,227 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "2",
	"service": "otp_confirm"
}'
2020-05-16 15:55:24,228 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'otp_confirm'
2020-05-16 15:55:24,229 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doOTPConfirm] doing otp confirm...
2020-05-16 15:55:24,229 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 2
2020-05-16 15:55:24,229 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-16 15:55:24,230 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 2
2020-05-16 15:55:24,230 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-16 15:55:24,233 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [findRecord] Found record: Id=5ebfaa6d226bfbf62efc753e
2020-05-16 15:55:24,233 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:55:25,236 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:55:26,244 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:55:27,248 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 15:55:27,251 WARN com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 15:55:27,254 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-16 15:55:27,255 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:55:27,255 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:55:27,255 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:55:27,256 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:55:27,256 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:55:27,256 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:55:27,257 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:55:27,257 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-05-16 15:55:27,257 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "2",
2020-05-16 15:55:27,257 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "otp_confirm"
2020-05-16 15:55:27,258 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-16 15:55:27,258 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-16 15:55:27,258 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-16 15:55:27,258 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":-1,"trans_id":"2","message":null}
2020-05-16 15:55:43,609 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:55:43,610 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:55:43,610 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-16 15:55:43,610 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:55:43,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-16 15:55:43,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:55:43,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: 2a21db6e-491a-4453-83c1-f7971eae5e79
2020-05-16 15:55:43,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:55:43,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:55:43,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-16 15:55:43,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 236
2020-05-16 15:55:43,611 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-16 15:55:43,611 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:55:43,612 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-16 15:55:43,612 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:55:43,612 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:55:43,612 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-16 15:55:43,613 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-05-16 15:55:43,613 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-05-16 15:55:43,613 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:55:43,613 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:55:43,616 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:55:43,617 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "2",
	"service": "otp_confirm"
}'
2020-05-16 15:55:43,618 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'otp_confirm'
2020-05-16 15:55:43,619 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doOTPConfirm] doing otp confirm...
2020-05-16 15:55:43,620 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 2
2020-05-16 15:55:43,621 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-05-16 15:55:43,621 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 2
2020-05-16 15:55:43,622 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-05-16 15:55:43,624 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-3] [findRecord] Found record: Id=5ebfaa6d226bfbf62efc753e
2020-05-16 15:55:43,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> {
2020-05-16 15:55:43,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:55:43,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:55:43,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:55:43,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:55:43,626 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:55:43,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:55:43,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:55:43,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-05-16 15:55:43,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"trans_id": "2",
2020-05-16 15:55:43,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service": "otp_confirm"
2020-05-16 15:55:43,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> }
2020-05-16 15:55:43,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-05-16 15:55:43,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-16 15:55:43,628 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":2001,"trans_id":"2","message":null}
2020-05-16 15:56:36,261 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:56:36,262 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:56:36,262 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-05-16 15:56:36,262 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:56:36,262 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-05-16 15:56:36,262 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:56:36,263 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: 951a23bd-891d-42c9-b894-29165d3a1f0a
2020-05-16 15:56:36,263 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:56:36,263 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:56:36,263 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-05-16 15:56:36,263 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 236
2020-05-16 15:56:36,263 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-05-16 15:56:36,263 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:56:36,263 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-05-16 15:56:36,263 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:56:36,263 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:56:36,263 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-05-16 15:56:36,264 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-05-16 15:56:36,265 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-05-16 15:56:36,265 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:56:36,265 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:56:36,268 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:56:36,269 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "2",
	"service": "otp_confirm"
}'
2020-05-16 15:56:36,271 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'otp_confirm'
2020-05-16 15:56:36,271 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doOTPConfirm] doing otp confirm...
2020-05-16 15:56:36,271 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 2
2020-05-16 15:56:36,272 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-05-16 15:56:36,272 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 2
2020-05-16 15:56:36,272 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-05-16 15:56:36,274 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-5] [findRecord] Found record: Id=5ebfaa6d226bfbf62efc753e
2020-05-16 15:56:36,275 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> {
2020-05-16 15:56:36,275 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:56:36,276 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:56:36,276 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:56:36,276 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:56:36,276 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:56:36,276 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:56:36,276 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:56:36,276 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-05-16 15:56:36,276 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"trans_id": "2",
2020-05-16 15:56:36,276 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service": "otp_confirm"
2020-05-16 15:56:36,276 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> }
2020-05-16 15:56:36,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-05-16 15:56:36,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-05-16 15:56:36,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":2001,"trans_id":"2","message":null}
2020-05-16 15:56:37,198 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:56:37,199 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:56:37,199 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-type: application/json
2020-05-16 15:56:37,199 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:56:37,199 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept: */*
2020-05-16 15:56:37,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:56:37,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> postman-token: 93c523f7-72dc-4bbf-875f-dde938bc740e
2020-05-16 15:56:37,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:56:37,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:56:37,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> connection: keep-alive
2020-05-16 15:56:37,200 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-length: 236
2020-05-16 15:56:37,201 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>
2020-05-16 15:56:37,201 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:56:37,201 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Ip Adress '127.0.0.1' is valid
2020-05-16 15:56:37,201 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:56:37,201 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:56:37,201 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Looking for the header start with 'PGW'
2020-05-16 15:56:37,203 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] checking authentication for user 'pgw_fptplay'
2020-05-16 15:56:37,203 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] security context was null, so authorizating user
2020-05-16 15:56:37,203 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:56:37,203 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:56:37,206 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:56:37,207 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-6] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "2",
	"service": "otp_confirm"
}'
2020-05-16 15:56:37,208 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] Service from the request is 'otp_confirm'
2020-05-16 15:56:37,208 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] [doOTPConfirm] doing otp confirm...
2020-05-16 15:56:37,208 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-6] [verifyParameter] Starting to check request: 2
2020-05-16 15:56:37,209 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-6] [verifyParameter] Result: true
2020-05-16 15:56:37,210 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Starting to check request: 2
2020-05-16 15:56:37,210 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Result: true
2020-05-16 15:56:37,212 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-6] [findRecord] Found record: Id=5ebfaa6d226bfbf62efc753e
2020-05-16 15:56:37,214 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> {
2020-05-16 15:56:37,214 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:56:37,214 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:56:37,214 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:56:37,214 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:56:37,214 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:56:37,214 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:56:37,214 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:56:37,215 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-05-16 15:56:37,215 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"trans_id": "2",
2020-05-16 15:56:37,215 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service": "otp_confirm"
2020-05-16 15:56:37,215 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> }
2020-05-16 15:56:37,215 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< 200 OK
2020-05-16 15:56:37,215 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|<
2020-05-16 15:56:37,215 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< {"error_code":2001,"trans_id":"2","message":null}
2020-05-16 15:57:21,622 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] Routing file updated
2020-05-16 15:57:21,642 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] New routes created.
2020-05-16 15:57:25,902 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:57:25,903 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:57:25,903 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 15:57:25,904 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:57:25,904 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 15:57:25,904 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:57:25,904 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 12f8a3dc-1659-4c3d-b672-131ea6632d8e
2020-05-16 15:57:25,904 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:57:25,904 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:57:25,904 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 15:57:25,904 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 236
2020-05-16 15:57:25,904 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 15:57:25,904 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:57:25,904 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 15:57:25,905 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:57:25,905 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:57:25,905 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 15:57:25,906 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 15:57:25,906 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 15:57:25,906 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:57:25,907 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:57:25,911 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:57:25,914 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "2",
	"service": "otp_confirm"
}'
2020-05-16 15:57:25,921 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'otp_confirm'
2020-05-16 15:57:25,923 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doOTPConfirm] doing otp confirm...
2020-05-16 15:57:25,925 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 2
2020-05-16 15:57:25,926 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 15:57:25,926 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 2
2020-05-16 15:57:25,926 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 15:57:25,961 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [findRecord] Found record: Id=5ebfaa6d226bfbf62efc753e
2020-05-16 15:57:25,974 ERROR com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [deleteRecord] The request 5ebfaa6d226bfbf62efc753e is deleted completely!
2020-05-16 15:57:25,977 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 15:57:25,977 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:57:25,977 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:57:25,977 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:57:25,977 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:57:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:57:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:57:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:57:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-05-16 15:57:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "2",
2020-05-16 15:57:25,978 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "otp_confirm"
2020-05-16 15:57:25,979 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 15:57:25,979 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 15:57:25,980 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 15:57:25,980 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":2001,"trans_id":"2","message":null}
2020-05-16 15:57:52,241 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] Routing file updated
2020-05-16 15:57:52,269 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] New routes created.
2020-05-16 15:58:10,303 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 15:58:10,305 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 15:58:10,305 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 15:58:10,305 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 15:58:10,305 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 15:58:10,305 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 15:58:10,305 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 2905553d-55b3-443e-90c5-2fe3d1abc132
2020-05-16 15:58:10,305 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 15:58:10,306 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 15:58:10,306 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 15:58:10,306 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 236
2020-05-16 15:58:10,306 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 15:58:10,306 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 15:58:10,306 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 15:58:10,306 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 15:58:10,306 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 15:58:10,307 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 15:58:10,308 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 15:58:10,308 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 15:58:10,308 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 15:58:10,308 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 15:58:10,311 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 15:58:10,313 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"otp_msg": "otp1244",
	"trans_id": "2",
	"service": "otp_confirm"
}'
2020-05-16 15:58:10,320 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'otp_confirm'
2020-05-16 15:58:10,322 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doOTPConfirm] doing otp confirm...
2020-05-16 15:58:10,325 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 2
2020-05-16 15:58:10,326 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 15:58:10,326 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 2
2020-05-16 15:58:10,326 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 15:58:10,360 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='OTP_CONFIRM_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='OTPCONFIRM_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='otp_confirm', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='null',trans_id='2',price='0',evenTime='null',errorCode='0'}'}
2020-05-16 15:58:10,360 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 15:58:10,361 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.OTPCONFIRM.REQUEST.VINAPHONE, keyword = null
2020-05-16 15:58:10,363 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.OTPCONFIRM.REQUEST.VINAPHONE']= Notification {notificationType='OTP_CONFIRM_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='OTPCONFIRM_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='otp_confirm', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='null',trans_id='2',price='0',evenTime='null',errorCode='0'}'}
2020-05-16 15:58:10,373 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfab22226bfbf62efc7543
2020-05-16 15:58:10,374 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfab22226bfbf62efc7543] from db
2020-05-16 15:58:11,385 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfab22226bfbf62efc7543] from db
2020-05-16 15:58:12,394 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfab22226bfbf62efc7543] from db
2020-05-16 15:58:13,401 INFO com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfab22226bfbf62efc7543] from db
2020-05-16 15:58:13,404 WARN com.dz.apigw.services.OTPConfirmServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 15:58:13,411 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 15:58:13,411 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 15:58:13,411 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 15:58:13,411 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 15:58:13,412 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 15:58:13,412 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 15:58:13,412 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 15:58:13,412 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 15:58:13,412 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"otp_msg": "otp1244",
2020-05-16 15:58:13,412 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "2",
2020-05-16 15:58:13,412 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "otp_confirm"
2020-05-16 15:58:13,413 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 15:58:13,413 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 15:58:13,413 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 15:58:13,414 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"2","message":null}
2020-05-16 18:37:11,353 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] Routing file updated
2020-05-16 18:37:11,365 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] New routes created.
2020-05-16 18:37:52,897 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-21-thread-1] Routing file updated
2020-05-16 18:37:52,906 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-21-thread-1] New routes created.
2020-05-16 18:38:21,509 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-24-thread-1] Routing file updated
2020-05-16 18:38:21,516 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-24-thread-1] New routes created.
2020-05-16 18:38:50,485 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-27-thread-1] Routing file updated
2020-05-16 18:38:50,496 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-27-thread-1] New routes created.
2020-05-16 18:45:55,449 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-30-thread-1] Routing file updated
2020-05-16 18:45:55,459 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-30-thread-1] New routes created.
2020-05-16 18:46:38,040 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-33-thread-1] Routing file updated
2020-05-16 18:46:38,061 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-33-thread-1] New routes created.
2020-05-16 18:46:52,508 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-36-thread-1] Routing file updated
2020-05-16 18:46:52,516 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-36-thread-1] New routes created.
2020-05-16 19:05:44,904 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-05-16 19:05:44,923 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-05-16 19:06:02,814 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:06:02,815 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:06:02,816 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:06:02,816 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:06:02,816 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:06:02,817 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:06:02,817 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 422685cd-ab21-4816-a1a9-3f8c8d4f10fb
2020-05-16 19:06:02,817 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:06:02,817 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:06:02,817 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:06:02,819 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-05-16 19:06:02,819 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:06:02,820 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:06:02,820 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:06:02,821 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:06:02,821 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:06:02,822 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:06:02,915 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:06:02,915 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:06:02,916 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:06:02,916 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:06:02,925 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:06:02,976 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1",
	"service": "charge"
}'
2020-05-16 19:06:03,005 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:06:03,061 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:06:03,067 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1
2020-05-16 19:06:03,068 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:06:03,068 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1
2020-05-16 19:06:03,069 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:06:03,188 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1',price='0',evenTime='null',errorCode='0'}'}
2020-05-16 19:06:03,193 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:06:03,194 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:06:03,232 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1',price='0',evenTime='null',errorCode='0'}'}
2020-05-16 19:06:03,424 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfd72b226bfb20ab81c014
2020-05-16 19:06:03,425 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd72b226bfb20ab81c014] from db
2020-05-16 19:06:04,432 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd72b226bfb20ab81c014] from db
2020-05-16 19:06:05,442 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd72b226bfb20ab81c014] from db
2020-05-16 19:06:06,451 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd72b226bfb20ab81c014] from db
2020-05-16 19:06:06,455 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:06:06,498 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:06:06,498 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:06:06,499 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:06:06,499 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:06:06,500 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:06:06,501 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:06:06,503 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:06:06,503 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:06:06,504 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:06:06,505 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1",
2020-05-16 19:06:06,510 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:06:06,511 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:06:06,512 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:06:06,515 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:06:06,516 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1"}
2020-05-16 19:08:56,351 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] Routing file updated
2020-05-16 19:08:56,361 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] New routes created.
2020-05-16 19:09:24,006 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:09:24,007 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:09:24,007 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:09:24,008 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:09:24,008 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:09:24,008 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:09:24,008 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 7e426394-4900-4dc1-afef-364e52ecb2aa
2020-05-16 19:09:24,008 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:09:24,009 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:09:24,009 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:09:24,009 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-05-16 19:09:24,009 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:09:24,009 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:09:24,009 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:09:24,009 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:09:24,010 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:09:24,010 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:09:24,011 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:09:24,012 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:09:24,012 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:09:24,012 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:09:24,017 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:09:24,022 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1",
	"service": "charge"
}'
2020-05-16 19:09:24,030 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:09:24,032 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:09:24,037 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1
2020-05-16 19:09:24,038 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:09:24,039 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1
2020-05-16 19:09:24,039 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:09:24,096 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [findRecord] Found record: Id=5ebfd72b226bfb20ab81c014
2020-05-16 19:09:24,097 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 19:09:25,102 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 19:09:26,110 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 19:09:27,117 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [null] from db
2020-05-16 19:09:27,119 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:09:27,122 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:09:27,122 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:09:27,122 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:09:27,123 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:09:27,123 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:09:27,123 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:09:27,123 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:09:27,123 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:09:27,123 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:09:27,124 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1",
2020-05-16 19:09:27,124 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:09:27,124 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:09:27,124 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:09:27,125 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:09:27,125 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1"}
2020-05-16 19:09:55,173 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:09:55,175 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:09:55,176 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-16 19:09:55,176 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:09:55,176 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-16 19:09:55,176 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:09:55,176 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: 25c99d1b-07ce-4739-a1a9-5d07f9fafa02
2020-05-16 19:09:55,176 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:09:55,177 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:09:55,177 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-16 19:09:55,177 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 228
2020-05-16 19:09:55,177 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-16 19:09:55,177 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:09:55,177 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-16 19:09:55,177 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:09:55,177 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:09:55,177 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-16 19:09:55,179 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-16 19:09:55,179 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-16 19:09:55,179 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:09:55,179 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:09:55,181 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:09:55,183 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1",
	"service": "charge"
}'
2020-05-16 19:09:55,184 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'charge'
2020-05-16 19:09:55,184 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doTelcoCharge] doing telco charging...
2020-05-16 19:09:55,185 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 1
2020-05-16 19:09:55,185 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-16 19:09:55,186 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 1
2020-05-16 19:09:55,186 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-16 19:09:55,188 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1',price='0',evenTime='null',errorCode='0'}'}
2020-05-16 19:09:55,189 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-05-16 19:09:55,190 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:09:55,193 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='APIGWLogDocument {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1',price='0',evenTime='null',errorCode='0'}'}
2020-05-16 19:09:55,199 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [insertRequest][to DB] Result ID: 5ebfd813226bfb20ab81c016
2020-05-16 19:09:55,200 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfd813226bfb20ab81c016] from db
2020-05-16 19:09:56,211 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfd813226bfb20ab81c016] from db
2020-05-16 19:09:57,218 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfd813226bfb20ab81c016] from db
2020-05-16 19:09:58,222 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfd813226bfb20ab81c016] from db
2020-05-16 19:09:58,226 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:09:58,229 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-16 19:09:58,230 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:09:58,230 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:09:58,230 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:09:58,230 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:09:58,230 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:09:58,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:09:58,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:09:58,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:09:58,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "1",
2020-05-16 19:09:58,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:09:58,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-16 19:09:58,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-16 19:09:58,231 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-16 19:09:58,232 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":-1,"trans_id":"1"}
2020-05-16 19:11:42,161 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-05-16 19:11:42,187 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-05-16 19:12:07,400 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:12:07,402 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:12:07,403 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:12:07,403 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:12:07,404 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:12:07,405 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:12:07,406 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: fc1f33f7-6657-46d6-a876-aa014fa006d0
2020-05-16 19:12:07,406 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:12:07,406 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:12:07,406 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:12:07,407 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-05-16 19:12:07,407 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:12:07,407 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:12:07,408 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:12:07,412 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:12:07,412 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:12:07,412 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:12:07,527 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:12:07,528 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:12:07,528 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:12:07,528 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:12:07,549 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:12:07,653 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1",
	"service": "charge"
}'
2020-05-16 19:12:07,679 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:12:07,727 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:12:07,737 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1
2020-05-16 19:12:07,739 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:12:07,739 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1
2020-05-16 19:12:07,740 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:12:07,967 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1',price='0',evenTime='null',errorCode='0', dbId='null'}'}
2020-05-16 19:12:07,968 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:12:07,968 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:12:07,999 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1',price='0',evenTime='null',errorCode='0', dbId='null'}'}
2020-05-16 19:12:08,051 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfd898226bfb277facbc5a
2020-05-16 19:12:08,052 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd898226bfb277facbc5a] from db
2020-05-16 19:12:09,058 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd898226bfb277facbc5a] from db
2020-05-16 19:12:10,065 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd898226bfb277facbc5a] from db
2020-05-16 19:12:11,069 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd898226bfb277facbc5a] from db
2020-05-16 19:12:11,071 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:12:11,092 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:12:11,092 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:12:11,092 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:12:11,092 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:12:11,093 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:12:11,093 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:12:11,093 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:12:11,093 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:12:11,094 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:12:11,094 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1",
2020-05-16 19:12:11,094 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:12:11,094 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:12:11,094 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:12:11,095 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:12:11,095 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1"}
2020-05-16 19:14:50,598 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] Routing file updated
2020-05-16 19:14:50,620 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-6-thread-1] New routes created.
2020-05-16 19:15:36,339 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] Routing file updated
2020-05-16 19:15:36,355 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] New routes created.
2020-05-16 19:15:49,649 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:15:49,650 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:15:49,651 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:15:49,651 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:15:49,651 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:15:49,651 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:15:49,651 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: e3f5801c-1211-4782-9793-64f79fe8a5fa
2020-05-16 19:15:49,652 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:15:49,652 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:15:49,652 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:15:49,652 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-05-16 19:15:49,653 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:15:49,653 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:15:49,653 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:15:49,654 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:15:49,654 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:15:49,655 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:15:49,657 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:15:49,657 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:15:49,657 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:15:49,657 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:15:49,664 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:15:49,666 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "1",
	"service": "charge"
}'
2020-05-16 19:15:49,673 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:15:49,677 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:15:49,682 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 1
2020-05-16 19:15:49,682 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:15:49,682 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 1
2020-05-16 19:15:49,682 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:15:49,726 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfd975226bfb277facbc5d
2020-05-16 19:15:49,728 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1',price='0',evenTime='null',errorCode='0', dbId='5ebfd975226bfb277facbc5d'}'}
2020-05-16 19:15:49,729 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:15:49,729 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:15:49,732 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='1',price='0',evenTime='null',errorCode='0', dbId='5ebfd975226bfb277facbc5d'}'}
2020-05-16 19:15:49,733 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd975226bfb277facbc5d] from db
2020-05-16 19:15:50,736 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd975226bfb277facbc5d] from db
2020-05-16 19:15:51,741 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd975226bfb277facbc5d] from db
2020-05-16 19:15:52,747 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfd975226bfb277facbc5d] from db
2020-05-16 19:15:52,750 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:15:52,755 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:15:52,755 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:15:52,755 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:15:52,755 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:15:52,756 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:15:52,756 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:15:52,756 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:15:52,756 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:15:52,757 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:15:52,757 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "1",
2020-05-16 19:15:52,757 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:15:52,757 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:15:52,758 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:15:52,758 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:15:52,759 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"1"}
2020-05-16 19:24:15,116 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:24:15,116 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:24:15,116 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-16 19:24:15,117 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:24:15,117 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-16 19:24:15,117 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:24:15,117 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: a45b23ff-90bd-451b-8c04-0c51987a9443
2020-05-16 19:24:15,117 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:24:15,117 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:24:15,118 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-16 19:24:15,118 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 228
2020-05-16 19:24:15,118 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-16 19:24:15,118 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:24:15,118 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-16 19:24:15,118 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:24:15,118 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:24:15,118 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-16 19:24:15,120 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-05-16 19:24:15,120 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-05-16 19:24:15,120 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:24:15,120 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:24:15,122 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:24:15,123 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "2",
	"service": "charge"
}'
2020-05-16 19:24:15,124 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-05-16 19:24:15,125 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging...
2020-05-16 19:24:15,125 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 2
2020-05-16 19:24:15,125 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-05-16 19:24:15,125 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 2
2020-05-16 19:24:15,125 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-05-16 19:24:15,128 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5ebfdb6f226bfb277facbc5e
2020-05-16 19:24:15,128 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='2',price='0',evenTime='null',errorCode='0', dbId='5ebfdb6f226bfb277facbc5e'}'}
2020-05-16 19:24:15,128 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = null
2020-05-16 19:24:15,128 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:24:15,129 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='2',price='0',evenTime='null',errorCode='0', dbId='5ebfdb6f226bfb277facbc5e'}'}
2020-05-16 19:24:15,129 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebfdb6f226bfb277facbc5e] from db
2020-05-16 19:24:15,147 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] [listenOnCPQueue] Received a new notification [TELCO_CHARGE_RESPONSE]...
2020-05-16 19:24:15,147 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='null'}'}
2020-05-16 19:24:15,156 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: null] Result: false
2020-05-16 19:24:16,135 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebfdb6f226bfb277facbc5e] from db
2020-05-16 19:24:17,142 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebfdb6f226bfb277facbc5e] from db
2020-05-16 19:24:18,150 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebfdb6f226bfb277facbc5e] from db
2020-05-16 19:24:18,153 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:24:18,156 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> {
2020-05-16 19:24:18,156 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:24:18,156 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:24:18,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:24:18,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:24:18,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:24:18,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:24:18,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:24:18,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:24:18,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"trans_id": "2",
2020-05-16 19:24:18,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:24:18,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> }
2020-05-16 19:24:18,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-05-16 19:24:18,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-16 19:24:18,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"2"}
2020-05-16 19:26:05,743 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:26:05,745 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:26:05,745 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-type: application/json
2020-05-16 19:26:05,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:26:05,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept: */*
2020-05-16 19:26:05,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:26:05,746 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> postman-token: 8535bd80-989a-490c-9e8f-af4ff05f5816
2020-05-16 19:26:05,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:26:05,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:26:05,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> connection: keep-alive
2020-05-16 19:26:05,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> content-length: 228
2020-05-16 19:26:05,747 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|>
2020-05-16 19:26:05,747 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:26:05,747 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] Ip Adress '127.0.0.1' is valid
2020-05-16 19:26:05,747 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:26:05,748 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:26:05,748 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] Looking for the header start with 'PGW'
2020-05-16 19:26:05,749 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] checking authentication for user 'pgw_fptplay'
2020-05-16 19:26:05,750 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] security context was null, so authorizating user
2020-05-16 19:26:05,750 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:26:05,750 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-5] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:26:05,753 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-5] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:26:05,754 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-5] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "3",
	"service": "charge"
}'
2020-05-16 19:26:05,755 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] Service from the request is 'charge'
2020-05-16 19:26:05,756 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-5] [doTelcoCharge] doing telco charging...
2020-05-16 19:26:05,756 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Starting to check request: 3
2020-05-16 19:26:05,756 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyParameter] Result: true
2020-05-16 19:26:05,756 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Starting to check request: 3
2020-05-16 19:26:05,757 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [verifyRequestCredentials] Result: true
2020-05-16 19:26:05,759 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [insertRequest][to DB] Result ID: 5ebfdbdd226bfb277facbc5f
2020-05-16 19:26:05,760 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='3',price='0',evenTime='null',errorCode='0', dbId='5ebfdbdd226bfb277facbc5f'}'}
2020-05-16 19:26:05,760 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] msgKeyword = null
2020-05-16 19:26:05,761 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-5] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:26:05,761 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-5] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='3',price='0',evenTime='null',errorCode='0', dbId='5ebfdbdd226bfb277facbc5f'}'}
2020-05-16 19:26:05,762 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebfdbdd226bfb277facbc5f] from db
2020-05-16 19:26:06,766 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebfdbdd226bfb277facbc5f] from db
2020-05-16 19:26:07,772 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebfdbdd226bfb277facbc5f] from db
2020-05-16 19:26:08,781 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] starting to select result of the request [5ebfdbdd226bfb277facbc5f] from db
2020-05-16 19:26:08,783 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-5] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:26:08,785 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> {
2020-05-16 19:26:08,786 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:26:08,786 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:26:08,786 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:26:08,786 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:26:08,786 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:26:08,787 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:26:08,787 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:26:08,787 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:26:08,787 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"trans_id": "3",
2020-05-16 19:26:08,787 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:26:08,787 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|> }
2020-05-16 19:26:08,787 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< 200 OK
2020-05-16 19:26:08,788 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|<
2020-05-16 19:26:08,788 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-5] 127.0.0.1|< {"error_code":-1,"trans_id":"3"}
2020-05-16 19:26:47,269 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] Routing file updated
2020-05-16 19:26:47,284 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] New routes created.
2020-05-16 19:26:52,689 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] Routing file updated
2020-05-16 19:26:52,696 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] New routes created.
2020-05-16 19:27:01,996 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] Routing file updated
2020-05-16 19:27:02,004 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] New routes created.
2020-05-16 19:27:17,604 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:27:17,606 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:27:17,607 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:27:17,607 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:27:17,607 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:27:17,608 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:27:17,608 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 4b0b8e8f-1f1d-4966-b40e-51ee872b5a15
2020-05-16 19:27:17,608 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:27:17,608 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:27:17,608 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:27:17,608 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-05-16 19:27:17,609 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:27:17,609 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:27:17,609 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:27:17,609 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:27:17,609 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:27:17,609 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:27:17,612 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:27:17,613 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:27:17,613 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:27:17,614 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:27:17,620 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:27:17,621 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "4",
	"service": "charge"
}'
2020-05-16 19:27:17,626 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:27:17,629 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:27:17,633 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 4
2020-05-16 19:27:17,633 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:27:17,634 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 4
2020-05-16 19:27:17,634 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:27:17,690 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfdc25226bfb277facbc63
2020-05-16 19:27:17,691 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='4',price='0',evenTime='null',errorCode='0', dbId='5ebfdc25226bfb277facbc63'}'}
2020-05-16 19:27:17,692 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:27:17,693 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:27:17,698 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='4',price='0',evenTime='null',errorCode='0', dbId='5ebfdc25226bfb277facbc63'}'}
2020-05-16 19:27:17,700 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:18,705 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:19,711 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:20,716 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:21,724 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:22,729 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:23,736 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:24,741 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:25,746 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:26,755 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:27,763 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:28,772 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:29,775 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:30,782 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:31,811 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:32,821 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:33,826 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:34,831 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:35,836 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:36,845 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:37,854 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:38,857 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:39,863 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:40,872 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:41,877 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:42,883 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:43,890 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:44,896 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:45,903 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:46,907 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:47,913 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdc25226bfb277facbc63] from db
2020-05-16 19:27:47,917 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:27:47,923 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:27:47,923 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:27:47,924 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:27:47,924 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:27:47,924 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:27:47,924 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:27:47,924 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:27:47,924 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:27:47,925 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:27:47,925 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "4",
2020-05-16 19:27:47,925 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:27:47,925 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:27:47,926 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:27:47,926 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:27:47,926 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"4"}
2020-05-16 19:29:29,128 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-21-thread-1] Routing file updated
2020-05-16 19:29:29,152 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-21-thread-1] New routes created.
2020-05-16 19:29:35,569 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:29:35,570 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:29:35,570 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:29:35,571 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:29:35,571 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:29:35,571 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:29:35,571 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: e916f0d9-a33e-430f-933b-d2f3dd6646f6
2020-05-16 19:29:35,571 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:29:35,571 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:29:35,571 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:29:35,572 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-05-16 19:29:35,572 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:29:35,572 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:29:35,572 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:29:35,572 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:29:35,573 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:29:35,573 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:29:35,577 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:29:35,578 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:29:35,578 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:29:35,579 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:29:35,585 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:29:35,588 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "5",
	"service": "charge"
}'
2020-05-16 19:29:35,594 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:29:35,597 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:29:35,600 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 5
2020-05-16 19:29:35,600 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:29:35,601 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 5
2020-05-16 19:29:35,601 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:29:35,643 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfdcaf226bfb277facbc65
2020-05-16 19:29:35,644 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='5',price='0',evenTime='null',errorCode='0', dbId='5ebfdcaf226bfb277facbc65'}'}
2020-05-16 19:29:35,646 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:29:35,646 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:29:35,649 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='5',price='0',evenTime='null',errorCode='0', dbId='5ebfdcaf226bfb277facbc65'}'}
2020-05-16 19:29:35,650 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:36,657 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:37,666 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:38,674 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:39,678 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:40,685 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:41,689 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:42,697 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:43,704 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:44,709 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:45,716 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:46,722 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:47,729 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:48,734 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:49,738 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:50,742 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:51,745 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:52,757 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:53,763 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:54,770 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:55,778 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:56,786 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:57,793 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:58,797 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:29:59,801 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:30:00,809 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:30:01,817 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:30:02,824 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:30:03,828 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:30:04,836 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:30:05,845 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdcaf226bfb277facbc65] from db
2020-05-16 19:30:05,848 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:30:05,854 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:30:05,854 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:30:05,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:30:05,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:30:05,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:30:05,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:30:05,855 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:30:05,856 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:30:05,856 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:30:05,856 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "5",
2020-05-16 19:30:05,856 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:30:05,856 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:30:05,856 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:30:05,857 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:30:05,857 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"5"}
2020-05-16 19:35:39,160 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-24-thread-1] Routing file updated
2020-05-16 19:35:39,174 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-24-thread-1] New routes created.
2020-05-16 19:35:48,282 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:35:48,285 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:35:48,285 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:35:48,285 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:35:48,286 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:35:48,286 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:35:48,287 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: e68149da-0cd0-40d6-a519-4d157ec3b000
2020-05-16 19:35:48,287 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:35:48,287 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:35:48,287 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:35:48,287 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-05-16 19:35:48,288 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:35:48,288 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:35:48,288 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:35:48,288 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:35:48,288 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:35:48,289 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:35:48,293 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:35:48,293 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:35:48,293 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:35:48,293 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:35:48,300 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:35:48,303 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "6",
	"service": "charge"
}'
2020-05-16 19:35:48,313 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:35:48,316 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:35:48,322 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 6
2020-05-16 19:35:48,323 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:35:48,323 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 6
2020-05-16 19:35:48,323 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:35:48,389 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfde24226bfb277facbc67
2020-05-16 19:35:48,390 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='6',price='0',evenTime='null',errorCode='0', dbId='5ebfde24226bfb277facbc67'}'}
2020-05-16 19:35:48,390 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:35:48,391 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:35:48,400 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='6',price='0',evenTime='null',errorCode='0', dbId='5ebfde24226bfb277facbc67'}'}
2020-05-16 19:35:48,401 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:35:49,525 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:35:50,532 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:35:51,538 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:35:52,546 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:35:53,554 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:35:54,562 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:35:55,569 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:35:56,574 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:35:57,579 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:35:58,586 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:35:59,591 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:36:00,596 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:36:01,602 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:36:02,608 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:36:03,616 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:36:04,624 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:36:05,633 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:36:06,639 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde24226bfb277facbc67] from db
2020-05-16 19:36:06,698 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] Exception: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'entityManagerFactory' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.AutoConfigurationPackages': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'metaDataSourceAdvisor': Cannot resolve reference to bean 'methodSecurityMetadataSource' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration': Initialization of bean failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry' available
2020-05-16 19:36:06,754 ERROR com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] [doMainURLAction] Exception: 'Session/EntityManager is closed'
2020-05-16 19:36:06,762 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:36:06,762 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:36:06,762 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:36:06,762 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:36:06,763 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:36:06,763 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:36:06,763 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:36:06,763 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:36:06,763 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:36:06,770 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "6",
2020-05-16 19:36:06,771 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:36:06,771 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:36:06,771 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:36:06,772 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:36:08,805 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-27-thread-1] Routing file updated
2020-05-16 19:36:08,818 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-27-thread-1] New routes created.
2020-05-16 19:36:22,509 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-30-thread-1] Routing file updated
2020-05-16 19:36:22,531 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-30-thread-1] New routes created.
2020-05-16 19:36:28,443 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:36:28,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:36:28,444 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:36:28,445 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:36:28,445 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:36:28,445 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:36:28,445 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: b1c6d069-4cba-46a8-b0b9-9877bd34e9f9
2020-05-16 19:36:28,446 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:36:28,446 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:36:28,447 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:36:28,448 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-05-16 19:36:28,448 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:36:28,448 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:36:28,448 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:36:28,449 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:36:28,449 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:36:28,449 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:36:28,451 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:36:28,451 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:36:28,451 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:36:28,451 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:36:28,458 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:36:28,461 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "7",
	"service": "charge"
}'
2020-05-16 19:36:28,466 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:36:28,468 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:36:28,471 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 7
2020-05-16 19:36:28,471 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:36:28,471 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 7
2020-05-16 19:36:28,472 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:36:28,525 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfde4c226bfb277facbc6a
2020-05-16 19:36:28,526 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='7',price='0',evenTime='null',errorCode='0', dbId='5ebfde4c226bfb277facbc6a'}'}
2020-05-16 19:36:28,527 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:36:28,528 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:36:28,530 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='7',price='0',evenTime='null',errorCode='0', dbId='5ebfde4c226bfb277facbc6a'}'}
2020-05-16 19:36:28,531 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde4c226bfb277facbc6a] from db
2020-05-16 19:36:29,542 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde4c226bfb277facbc6a] from db
2020-05-16 19:36:30,550 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde4c226bfb277facbc6a] from db
2020-05-16 19:36:31,558 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfde4c226bfb277facbc6a] from db
2020-05-16 19:36:31,561 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:36:31,567 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:36:31,568 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:36:31,568 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:36:31,569 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:36:31,569 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:36:31,569 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:36:31,569 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:36:31,569 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:36:31,570 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:36:31,570 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "7",
2020-05-16 19:36:31,570 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:36:31,570 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:36:31,570 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:36:31,571 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:36:31,571 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"7"}
2020-05-16 19:37:48,521 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-33-thread-1] Routing file updated
2020-05-16 19:37:48,531 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-33-thread-1] New routes created.
2020-05-16 19:37:54,565 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:37:54,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:37:54,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:37:54,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:37:54,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:37:54,567 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:37:54,567 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: dbc86dfc-12bb-4a6c-9a6b-d95f02a2711a
2020-05-16 19:37:54,567 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:37:54,567 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:37:54,567 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:37:54,567 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-05-16 19:37:54,567 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:37:54,568 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:37:54,568 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:37:54,568 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:37:54,568 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:37:54,568 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:37:54,570 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:37:54,570 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:37:54,570 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:37:54,570 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:37:54,574 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:37:54,577 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "8",
	"service": "charge"
}'
2020-05-16 19:37:54,583 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:37:54,586 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:37:54,589 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 8
2020-05-16 19:37:54,589 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:37:54,590 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 8
2020-05-16 19:37:54,590 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:37:54,620 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfdea2226bfb277facbc6c
2020-05-16 19:37:54,620 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='8',price='0',evenTime='null',errorCode='0', dbId='5ebfdea2226bfb277facbc6c'}'}
2020-05-16 19:37:54,621 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:37:54,621 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:37:54,623 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='8',price='0',evenTime='null',errorCode='0', dbId='5ebfdea2226bfb277facbc6c'}'}
2020-05-16 19:37:54,625 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdea2226bfb277facbc6c] from db
2020-05-16 19:37:55,630 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdea2226bfb277facbc6c] from db
2020-05-16 19:37:56,638 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdea2226bfb277facbc6c] from db
2020-05-16 19:37:57,644 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdea2226bfb277facbc6c] from db
2020-05-16 19:37:57,649 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:37:57,655 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:37:57,655 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:37:57,656 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:37:57,656 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:37:57,657 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:37:57,657 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:37:57,657 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:37:57,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:37:57,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:37:57,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "8",
2020-05-16 19:37:57,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:37:57,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:37:57,658 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:37:57,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:37:57,659 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"8"}
2020-05-16 19:38:15,967 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-36-thread-1] Routing file updated
2020-05-16 19:38:15,977 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-36-thread-1] New routes created.
2020-05-16 19:38:55,760 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:38:55,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:38:55,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:38:55,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:38:55,761 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:38:55,762 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:38:55,762 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: e5e967cd-92c9-4e22-abb6-9a98ba63e7a9
2020-05-16 19:38:55,762 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:38:55,762 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:38:55,763 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:38:55,763 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 228
2020-05-16 19:38:55,763 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:38:55,764 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:38:55,764 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:38:55,764 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:38:55,764 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:38:55,764 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:38:55,766 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:38:55,767 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:38:55,767 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:38:55,767 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:38:55,770 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:38:55,772 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "9",
	"service": "charge"
}'
2020-05-16 19:38:55,777 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:38:55,779 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:38:55,783 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 9
2020-05-16 19:38:55,783 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:38:55,783 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 9
2020-05-16 19:38:55,783 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:38:55,844 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfdedf226bfb277facbc6e
2020-05-16 19:38:55,846 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='9',price='0',evenTime='null',errorCode='0', dbId='5ebfdedf226bfb277facbc6e'}'}
2020-05-16 19:38:55,847 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:38:55,854 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:38:55,857 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='9',price='0',evenTime='null',errorCode='0', dbId='5ebfdedf226bfb277facbc6e'}'}
2020-05-16 19:38:55,859 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdedf226bfb277facbc6e] from db
2020-05-16 19:38:56,866 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdedf226bfb277facbc6e] from db
2020-05-16 19:38:57,875 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdedf226bfb277facbc6e] from db
2020-05-16 19:38:58,884 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdedf226bfb277facbc6e] from db
2020-05-16 19:38:58,887 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:38:58,893 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:38:58,893 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:38:58,894 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:38:58,894 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:38:58,894 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:38:58,894 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:38:58,894 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:38:58,895 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:38:58,895 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:38:58,895 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "9",
2020-05-16 19:38:58,895 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:38:58,896 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:38:58,896 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:38:58,896 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:38:58,897 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"9"}
2020-05-16 19:41:33,345 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-39-thread-1] Routing file updated
2020-05-16 19:41:33,351 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-39-thread-1] New routes created.
2020-05-16 19:41:54,625 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:41:54,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:41:54,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:41:54,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:41:54,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:41:54,627 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:41:54,628 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: c04a78ab-ff25-4633-9b58-f9f86e6664ac
2020-05-16 19:41:54,628 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:41:54,628 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:41:54,628 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:41:54,628 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 229
2020-05-16 19:41:54,628 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:41:54,629 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:41:54,629 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:41:54,629 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:41:54,629 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:41:54,629 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:41:54,632 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:41:54,632 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:41:54,632 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:41:54,633 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:41:54,638 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:41:54,640 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "10",
	"service": "charge"
}'
2020-05-16 19:41:54,647 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:41:54,649 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:41:54,652 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 10
2020-05-16 19:41:54,652 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:41:54,652 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 10
2020-05-16 19:41:54,653 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:41:54,703 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfdf92226bfb277facbc70
2020-05-16 19:41:54,704 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='10',price='0',evenTime='null',errorCode='0', dbId='5ebfdf92226bfb277facbc70'}'}
2020-05-16 19:41:54,705 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:41:54,705 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:41:54,708 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='10',price='0',evenTime='null',errorCode='0', dbId='5ebfdf92226bfb277facbc70'}'}
2020-05-16 19:41:54,709 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdf92226bfb277facbc70] from db
2020-05-16 19:41:55,710 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdf92226bfb277facbc70] from db
2020-05-16 19:41:56,712 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdf92226bfb277facbc70] from db
2020-05-16 19:41:57,718 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdf92226bfb277facbc70] from db
2020-05-16 19:41:57,721 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:41:57,727 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:41:57,728 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:41:57,728 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:41:57,728 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:41:57,728 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:41:57,728 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:41:57,729 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:41:57,729 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:41:57,729 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:41:57,729 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "10",
2020-05-16 19:41:57,729 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:41:57,729 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:41:57,730 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:41:57,730 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:41:57,730 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"10"}
2020-05-16 19:42:43,232 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: [Ljava.lang.Byte;@4a5771e7
2020-05-16 19:43:39,026 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-42-thread-1] Routing file updated
2020-05-16 19:43:39,040 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-42-thread-1] New routes created.
2020-05-16 19:43:43,156 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:43:43,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:43:43,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:43:43,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:43:43,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:43:43,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:43:43,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: dd50d795-3a86-4504-8fcb-ec9cf213d4dc
2020-05-16 19:43:43,159 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:43:43,159 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:43:43,159 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:43:43,159 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 229
2020-05-16 19:43:43,159 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:43:43,159 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:43:43,160 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:43:43,160 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:43:43,160 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:43:43,160 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:43:43,163 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:43:43,163 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:43:43,163 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:43:43,163 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:43:43,166 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:43:43,169 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "11",
	"service": "charge"
}'
2020-05-16 19:43:43,175 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:43:43,176 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:43:43,179 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 11
2020-05-16 19:43:43,179 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:43:43,179 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 11
2020-05-16 19:43:43,179 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:43:43,258 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfdfff226bfb277facbc72
2020-05-16 19:43:43,259 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='11',price='0',evenTime='null',errorCode='0', dbId='5ebfdfff226bfb277facbc72'}'}
2020-05-16 19:43:43,262 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:43:43,264 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:43:43,267 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='11',price='0',evenTime='null',errorCode='0', dbId='5ebfdfff226bfb277facbc72'}'}
2020-05-16 19:43:43,267 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdfff226bfb277facbc72] from db
2020-05-16 19:43:44,282 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdfff226bfb277facbc72] from db
2020-05-16 19:43:45,291 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdfff226bfb277facbc72] from db
2020-05-16 19:43:46,297 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfdfff226bfb277facbc72] from db
2020-05-16 19:43:46,300 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:43:46,306 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:43:46,307 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:43:46,307 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:43:46,307 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:43:46,307 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:43:46,307 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:43:46,307 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:43:46,308 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:43:46,308 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:43:46,308 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "11",
2020-05-16 19:43:46,308 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:43:46,308 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:43:46,308 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:43:46,309 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:43:46,310 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"11"}
2020-05-16 19:45:28,889 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-45-thread-1] Routing file updated
2020-05-16 19:45:28,908 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-45-thread-1] New routes created.
2020-05-16 19:45:38,930 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:45:38,934 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:45:38,934 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:45:38,935 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:45:38,935 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:45:38,935 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:45:38,935 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: b08b82a5-1744-456b-8b82-267fa3023fc9
2020-05-16 19:45:38,935 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:45:38,936 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:45:38,936 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:45:38,936 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 229
2020-05-16 19:45:38,936 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:45:38,936 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:45:38,937 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:45:38,937 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:45:38,937 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:45:38,938 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:45:38,940 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:45:38,940 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:45:38,940 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:45:38,940 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:45:38,942 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:45:38,944 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "12",
	"service": "charge"
}'
2020-05-16 19:45:38,950 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:45:38,953 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:45:38,957 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 12
2020-05-16 19:45:38,957 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:45:38,957 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 12
2020-05-16 19:45:38,958 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:45:39,000 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfe072226bfb277facbc74
2020-05-16 19:45:39,001 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='12',price='0',evenTime='null',errorCode='0', dbId='5ebfe072226bfb277facbc74'}'}
2020-05-16 19:45:39,002 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:45:39,002 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:45:39,005 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='12',price='0',evenTime='null',errorCode='0', dbId='5ebfe072226bfb277facbc74'}'}
2020-05-16 19:45:39,006 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:40,011 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:41,016 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:42,021 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:43,029 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:44,035 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:45,041 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:46,047 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:47,051 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:48,056 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:49,063 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:50,071 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:51,079 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:52,087 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:53,097 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:54,105 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:55,112 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:56,117 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:57,123 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:58,130 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:45:59,135 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:46:00,139 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:46:01,146 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:46:02,155 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:46:03,163 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:46:04,209 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:46:05,216 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:46:06,223 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:46:07,230 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:46:08,236 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:46:09,243 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe072226bfb277facbc74] from db
2020-05-16 19:46:09,246 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:46:09,252 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:46:09,253 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:46:09,253 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:46:09,253 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:46:09,253 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:46:09,254 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:46:09,254 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:46:09,254 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:46:09,254 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:46:09,254 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "12",
2020-05-16 19:46:09,254 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:46:09,255 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:46:09,255 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:46:09,255 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:46:09,256 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"12"}
2020-05-16 19:48:10,077 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-48-thread-1] Routing file updated
2020-05-16 19:48:10,103 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-48-thread-1] New routes created.
2020-05-16 19:48:16,222 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:48:16,223 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:48:16,223 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:48:16,223 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:48:16,224 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:48:16,224 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:48:16,224 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: df487ed3-3dd1-401e-bc29-52f96bb8a81c
2020-05-16 19:48:16,224 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:48:16,224 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:48:16,224 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:48:16,224 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 229
2020-05-16 19:48:16,224 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:48:16,224 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:48:16,225 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:48:16,225 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:48:16,225 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:48:16,225 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:48:16,227 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:48:16,227 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:48:16,228 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:48:16,228 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:48:16,234 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:48:16,236 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "13",
	"service": "charge"
}'
2020-05-16 19:48:16,240 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:48:16,241 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:48:16,244 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 13
2020-05-16 19:48:16,244 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:48:16,245 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 13
2020-05-16 19:48:16,246 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:48:16,277 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfe110226bfb277facbc76
2020-05-16 19:48:16,278 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='13',price='0',evenTime='null',errorCode='0', dbId='5ebfe110226bfb277facbc76'}'}
2020-05-16 19:48:16,282 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:48:16,282 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:48:16,285 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='13',price='0',evenTime='null',errorCode='0', dbId='5ebfe110226bfb277facbc76'}'}
2020-05-16 19:48:16,286 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:17,295 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:18,302 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:19,308 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:20,315 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:21,319 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:22,328 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:23,333 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:24,340 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:25,343 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:26,350 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:27,355 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:28,360 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:29,368 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:30,374 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:31,382 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:32,412 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:33,437 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:34,443 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:35,450 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:36,458 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:37,461 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:38,468 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:39,474 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:40,479 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:41,485 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:42,490 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:43,495 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:44,501 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:45,505 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:46,512 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe110226bfb277facbc76] from db
2020-05-16 19:48:46,515 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:48:46,520 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:48:46,521 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:48:46,521 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:48:46,522 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:48:46,522 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:48:46,522 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:48:46,523 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:48:46,523 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:48:46,523 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:48:46,524 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "13",
2020-05-16 19:48:46,524 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:48:46,524 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:48:46,524 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:48:46,525 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:48:46,525 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"13"}
2020-05-16 19:49:17,076 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] Routing file updated
2020-05-16 19:49:17,106 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-3-thread-1] New routes created.
2020-05-16 19:51:18,434 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-5-thread-1] Routing file updated
2020-05-16 19:51:18,491 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-5-thread-1] New routes created.
2020-05-16 19:52:08,448 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] Routing file updated
2020-05-16 19:52:08,467 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-9-thread-1] New routes created.
2020-05-16 19:52:34,294 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] Routing file updated
2020-05-16 19:52:34,303 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-12-thread-1] New routes created.
2020-05-16 19:52:46,687 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:52:46,691 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:52:46,692 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:52:46,692 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:52:46,692 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:52:46,693 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:52:46,694 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 4fe75544-098f-4b0c-87a5-c4bf4ab3da3c
2020-05-16 19:52:46,694 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:52:46,694 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:52:46,695 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:52:46,696 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 229
2020-05-16 19:52:46,696 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:52:46,696 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:52:46,696 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:52:46,697 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:52:46,697 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:52:46,697 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:52:46,850 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:52:46,850 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:52:46,850 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:52:46,850 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:52:46,867 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:52:46,975 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "14",
	"service": "charge"
}'
2020-05-16 19:52:47,016 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:52:47,079 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:52:47,083 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 14
2020-05-16 19:52:47,083 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:52:47,083 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 14
2020-05-16 19:52:47,084 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:52:47,694 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfe21f226bfb525de2e277
2020-05-16 19:52:47,697 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='14',price='0',evenTime='null',errorCode='0', dbId='5ebfe21f226bfb525de2e277'}'}
2020-05-16 19:52:47,698 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:52:47,698 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:52:47,842 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='14',price='0',evenTime='null',errorCode='0', dbId='5ebfe21f226bfb525de2e277'}'}
2020-05-16 19:52:47,843 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:47,930 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ebfe21f226bfb525de2e277'}'}
2020-05-16 19:52:48,851 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:49,860 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:50,868 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:51,875 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:52,882 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:53,889 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:54,895 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:55,900 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:56,903 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:57,911 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:58,919 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:52:59,924 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:53:00,929 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:53:01,937 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:53:02,946 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:53:03,952 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:53:04,959 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:53:05,969 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:53:06,976 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:53:07,986 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:53:08,994 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe21f226bfb525de2e277] from db
2020-05-16 19:53:09,040 ERROR com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] Exception: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'entityManagerFactory' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.AutoConfigurationPackages': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'metaDataSourceAdvisor': Cannot resolve reference to bean 'methodSecurityMetadataSource' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration': Initialization of bean failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry' available
2020-05-16 19:53:09,052 ERROR com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] [doMainURLAction] Exception: 'Session/EntityManager is closed'
2020-05-16 19:53:09,066 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:53:09,066 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:53:09,067 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:53:09,067 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:53:09,067 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:53:09,067 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:53:09,067 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:53:09,068 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:53:09,068 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:53:09,068 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "14",
2020-05-16 19:53:09,068 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:53:09,068 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:53:09,069 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:53:09,069 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:53:11,283 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] Routing file updated
2020-05-16 19:53:11,301 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-15-thread-1] New routes created.
2020-05-16 19:53:14,166 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:53:14,168 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:53:14,169 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:53:14,169 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:53:14,170 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:53:14,170 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:53:14,171 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: b76371f5-aea8-44ae-a915-f0d9e2c5818f
2020-05-16 19:53:14,171 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:53:14,171 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:53:14,171 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:53:14,172 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 229
2020-05-16 19:53:14,173 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:53:14,173 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:53:14,173 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:53:14,174 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:53:14,174 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:53:14,174 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:53:14,177 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:53:14,178 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:53:14,178 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:53:14,178 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:53:14,185 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:53:14,189 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "15",
	"service": "charge"
}'
2020-05-16 19:53:14,195 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:53:14,197 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:53:14,199 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 15
2020-05-16 19:53:14,200 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:53:14,200 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 15
2020-05-16 19:53:14,200 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:53:14,258 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfe23a226bfb525de2e279
2020-05-16 19:53:14,259 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='15',price='0',evenTime='null',errorCode='0', dbId='5ebfe23a226bfb525de2e279'}'}
2020-05-16 19:53:14,260 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:53:14,260 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:53:14,265 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='15',price='0',evenTime='null',errorCode='0', dbId='5ebfe23a226bfb525de2e279'}'}
2020-05-16 19:53:14,265 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe23a226bfb525de2e279] from db
2020-05-16 19:53:15,291 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe23a226bfb525de2e279] from db
2020-05-16 19:53:16,300 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe23a226bfb525de2e279] from db
2020-05-16 19:53:17,304 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe23a226bfb525de2e279] from db
2020-05-16 19:53:17,307 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:53:17,324 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:53:17,324 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:53:17,324 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:53:17,325 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:53:17,325 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:53:17,325 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:53:17,325 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:53:17,325 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:53:17,326 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:53:17,326 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "15",
2020-05-16 19:53:17,326 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:53:17,326 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:53:17,326 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:53:17,327 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:53:17,328 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"15"}
2020-05-16 19:54:40,271 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:54:40,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:54:40,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-type: application/json
2020-05-16 19:54:40,277 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:54:40,278 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept: */*
2020-05-16 19:54:40,278 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:54:40,278 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> postman-token: 565b61dc-0514-4ed8-945b-da1025dc7110
2020-05-16 19:54:40,278 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:54:40,278 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:54:40,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> connection: keep-alive
2020-05-16 19:54:40,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> content-length: 229
2020-05-16 19:54:40,279 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|>
2020-05-16 19:54:40,279 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:54:40,280 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] Ip Adress '127.0.0.1' is valid
2020-05-16 19:54:40,280 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:54:40,280 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:54:40,281 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] Looking for the header start with 'PGW'
2020-05-16 19:54:40,294 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] checking authentication for user 'pgw_fptplay'
2020-05-16 19:54:40,294 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] security context was null, so authorizating user
2020-05-16 19:54:40,294 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:54:40,294 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-3] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:54:40,299 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-3] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:54:40,312 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-3] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "16",
	"service": "charge"
}'
2020-05-16 19:54:40,318 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] Service from the request is 'charge'
2020-05-16 19:54:40,319 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-3] [doTelcoCharge] doing telco charging...
2020-05-16 19:54:40,320 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Starting to check request: 16
2020-05-16 19:54:40,321 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyParameter] Result: true
2020-05-16 19:54:40,321 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Starting to check request: 16
2020-05-16 19:54:40,323 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [verifyRequestCredentials] Result: true
2020-05-16 19:54:40,349 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [insertRequest][to DB] Result ID: 5ebfe290226bfb525de2e27a
2020-05-16 19:54:40,350 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='16',price='0',evenTime='null',errorCode='0', dbId='5ebfe290226bfb525de2e27a'}'}
2020-05-16 19:54:40,350 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] msgKeyword = null
2020-05-16 19:54:40,351 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-3] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:54:40,354 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-3] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='16',price='0',evenTime='null',errorCode='0', dbId='5ebfe290226bfb525de2e27a'}'}
2020-05-16 19:54:40,355 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebfe290226bfb525de2e27a] from db
2020-05-16 19:54:40,399 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ebfe290226bfb525de2e27a'}'}
2020-05-16 19:54:41,359 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebfe290226bfb525de2e27a] from db
2020-05-16 19:54:42,364 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebfe290226bfb525de2e27a] from db
2020-05-16 19:54:43,371 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] starting to select result of the request [5ebfe290226bfb525de2e27a] from db
2020-05-16 19:54:43,377 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-3] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:54:43,384 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> {
2020-05-16 19:54:43,385 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:54:43,385 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:54:43,385 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:54:43,386 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:54:43,387 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:54:43,388 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:54:43,389 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:54:43,390 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:54:43,390 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"trans_id": "16",
2020-05-16 19:54:43,390 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:54:43,390 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|> }
2020-05-16 19:54:43,390 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< 200 OK
2020-05-16 19:54:43,391 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|<
2020-05-16 19:54:43,391 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-3] 127.0.0.1|< {"error_code":-1,"trans_id":"16"}
2020-05-16 19:55:54,599 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] Routing file updated
2020-05-16 19:55:54,611 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-18-thread-1] New routes created.
2020-05-16 19:56:03,194 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-21-thread-1] Routing file updated
2020-05-16 19:56:03,216 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-21-thread-1] New routes created.
2020-05-16 19:56:09,583 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:56:09,585 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:56:09,585 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:56:09,585 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:56:09,585 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:56:09,586 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:56:09,586 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 58f141c1-593b-400e-a74e-e79392163b49
2020-05-16 19:56:09,586 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:56:09,586 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:56:09,586 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:56:09,586 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 229
2020-05-16 19:56:09,586 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:56:09,587 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:56:09,587 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:56:09,587 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:56:09,587 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:56:09,587 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:56:09,589 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:56:09,589 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:56:09,590 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:56:09,590 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:56:09,594 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:56:09,598 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "17",
	"service": "charge"
}'
2020-05-16 19:56:09,606 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:56:09,609 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:56:09,613 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 17
2020-05-16 19:56:09,613 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:56:09,614 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 17
2020-05-16 19:56:09,614 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:56:09,680 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfe2e9226bfb525de2e27d
2020-05-16 19:56:09,681 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='17',price='0',evenTime='null',errorCode='0', dbId='5ebfe2e9226bfb525de2e27d'}'}
2020-05-16 19:56:09,683 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:56:09,683 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:56:09,688 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='17',price='0',evenTime='null',errorCode='0', dbId='5ebfe2e9226bfb525de2e27d'}'}
2020-05-16 19:56:09,691 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe2e9226bfb525de2e27d] from db
2020-05-16 19:56:10,756 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe2e9226bfb525de2e27d] from db
2020-05-16 19:56:11,761 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe2e9226bfb525de2e27d] from db
2020-05-16 19:56:12,766 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe2e9226bfb525de2e27d] from db
2020-05-16 19:56:12,769 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:56:12,776 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:56:12,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:56:12,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:56:12,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:56:12,777 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:56:12,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:56:12,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:56:12,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:56:12,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:56:12,778 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "17",
2020-05-16 19:56:12,779 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:56:12,779 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:56:12,779 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:56:12,779 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:56:12,780 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"17"}
2020-05-16 19:56:35,514 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:56:35,517 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:56:35,518 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-16 19:56:35,519 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:56:35,519 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-16 19:56:35,520 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:56:35,521 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: 59d44ab5-3ff5-412f-abd2-d32c2444f13b
2020-05-16 19:56:35,522 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:56:35,522 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:56:35,522 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-16 19:56:35,522 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 229
2020-05-16 19:56:35,523 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-16 19:56:35,523 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:56:35,523 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-16 19:56:35,523 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:56:35,524 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:56:35,524 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-16 19:56:35,527 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-16 19:56:35,527 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-16 19:56:35,527 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:56:35,527 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:56:35,535 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:56:35,537 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "18",
	"service": "charge"
}'
2020-05-16 19:56:35,538 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'charge'
2020-05-16 19:56:35,539 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doTelcoCharge] doing telco charging...
2020-05-16 19:56:35,539 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 18
2020-05-16 19:56:35,540 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-16 19:56:35,540 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 18
2020-05-16 19:56:35,540 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-16 19:56:35,543 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [insertRequest][to DB] Result ID: 5ebfe303226bfb525de2e27e
2020-05-16 19:56:35,544 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='18',price='0',evenTime='null',errorCode='0', dbId='5ebfe303226bfb525de2e27e'}'}
2020-05-16 19:56:35,544 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-05-16 19:56:35,545 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:56:35,545 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='18',price='0',evenTime='null',errorCode='0', dbId='5ebfe303226bfb525de2e27e'}'}
2020-05-16 19:56:35,546 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfe303226bfb525de2e27e] from db
2020-05-16 19:56:35,673 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ebfe303226bfb525de2e27e'}'}
2020-05-16 19:56:35,698 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ebfe303226bfb525de2e27e]
2020-05-16 19:56:35,752 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ebfe303226bfb525de2e27e] Result: true
2020-05-16 19:56:36,552 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfe303226bfb525de2e27e] from db
2020-05-16 19:56:36,560 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] Found result of the request [5ebfe303226bfb525de2e27e]
2020-05-16 19:56:36,563 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-16 19:56:36,564 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:56:36,564 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:56:36,564 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:56:36,564 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:56:36,564 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:56:36,564 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:56:36,565 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:56:36,565 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:56:36,565 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "18",
2020-05-16 19:56:36,565 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:56:36,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-16 19:56:36,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-16 19:56:36,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-16 19:56:36,566 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":-1,"trans_id":"18"}
2020-05-16 19:57:09,332 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:57:09,332 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:57:09,333 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-type: application/json
2020-05-16 19:57:09,334 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:57:09,335 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept: */*
2020-05-16 19:57:09,336 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:57:09,336 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> postman-token: 8a078e31-111a-47d4-8be7-569a4f65b25b
2020-05-16 19:57:09,337 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:57:09,337 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:57:09,337 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> connection: keep-alive
2020-05-16 19:57:09,337 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-length: 229
2020-05-16 19:57:09,337 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>
2020-05-16 19:57:09,337 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:57:09,338 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Ip Adress '127.0.0.1' is valid
2020-05-16 19:57:09,338 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:57:09,338 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:57:09,338 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Looking for the header start with 'PGW'
2020-05-16 19:57:09,340 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] checking authentication for user 'pgw_fptplay'
2020-05-16 19:57:09,340 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] security context was null, so authorizating user
2020-05-16 19:57:09,340 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:57:09,341 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:57:09,344 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:57:09,348 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-4] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "19",
	"service": "charge"
}'
2020-05-16 19:57:09,349 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] Service from the request is 'charge'
2020-05-16 19:57:09,351 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] [doTelcoCharge] doing telco charging...
2020-05-16 19:57:09,351 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyParameter] Starting to check request: 19
2020-05-16 19:57:09,352 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyParameter] Result: true
2020-05-16 19:57:09,352 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Starting to check request: 19
2020-05-16 19:57:09,353 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Result: true
2020-05-16 19:57:09,356 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [insertRequest][to DB] Result ID: 5ebfe325226bfb525de2e27f
2020-05-16 19:57:09,356 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-4] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='19',price='0',evenTime='null',errorCode='0', dbId='5ebfe325226bfb525de2e27f'}'}
2020-05-16 19:57:09,356 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-4] msgKeyword = null
2020-05-16 19:57:09,357 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-4] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:57:09,357 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-4] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='19',price='0',evenTime='null',errorCode='0', dbId='5ebfe325226bfb525de2e27f'}'}
2020-05-16 19:57:09,357 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebfe325226bfb525de2e27f] from db
2020-05-16 19:57:10,362 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebfe325226bfb525de2e27f] from db
2020-05-16 19:57:11,371 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebfe325226bfb525de2e27f] from db
2020-05-16 19:57:12,382 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebfe325226bfb525de2e27f] from db
2020-05-16 19:57:12,386 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:57:12,388 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> {
2020-05-16 19:57:12,389 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:57:12,389 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:57:12,390 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:57:12,390 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:57:12,390 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:57:12,390 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:57:12,391 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:57:12,391 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:57:12,391 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"trans_id": "19",
2020-05-16 19:57:12,391 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:57:12,392 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> }
2020-05-16 19:57:12,392 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< 200 OK
2020-05-16 19:57:12,392 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|<
2020-05-16 19:57:12,392 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< {"error_code":-1,"trans_id":"19"}
2020-05-16 19:58:46,583 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-24-thread-1] Routing file updated
2020-05-16 19:58:46,613 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-24-thread-1] New routes created.
2020-05-16 19:59:09,043 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 19:59:09,045 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 19:59:09,045 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 19:59:09,045 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 19:59:09,045 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 19:59:09,045 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 19:59:09,046 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: a1714c96-362b-4b23-bee2-eac1e6488e5e
2020-05-16 19:59:09,046 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 19:59:09,046 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 19:59:09,047 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 19:59:09,047 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 229
2020-05-16 19:59:09,048 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 19:59:09,048 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 19:59:09,048 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 19:59:09,049 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 19:59:09,049 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 19:59:09,049 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 19:59:09,052 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 19:59:09,052 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 19:59:09,052 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 19:59:09,052 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 19:59:09,058 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 19:59:09,062 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "20",
	"service": "charge"
}'
2020-05-16 19:59:09,070 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 19:59:09,072 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 19:59:09,076 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 20
2020-05-16 19:59:09,076 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 19:59:09,076 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 20
2020-05-16 19:59:09,077 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 19:59:09,115 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfe39d226bfb525de2e281
2020-05-16 19:59:09,116 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='20',price='0',evenTime='null',errorCode='0', dbId='5ebfe39d226bfb525de2e281'}'}
2020-05-16 19:59:09,116 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 19:59:09,117 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 19:59:09,120 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='20',price='0',evenTime='null',errorCode='0', dbId='5ebfe39d226bfb525de2e281'}'}
2020-05-16 19:59:09,121 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe39d226bfb525de2e281] from db
2020-05-16 19:59:10,127 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe39d226bfb525de2e281] from db
2020-05-16 19:59:11,133 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe39d226bfb525de2e281] from db
2020-05-16 19:59:12,142 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe39d226bfb525de2e281] from db
2020-05-16 19:59:12,149 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 19:59:12,156 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 19:59:12,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 19:59:12,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 19:59:12,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 19:59:12,157 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 19:59:12,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 19:59:12,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 19:59:12,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 19:59:12,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 19:59:12,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "20",
2020-05-16 19:59:12,158 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 19:59:12,159 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 19:59:12,159 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 19:59:12,159 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 19:59:12,160 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"20"}
2020-05-16 20:02:36,897 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-27-thread-1] Routing file updated
2020-05-16 20:02:36,913 INFO com.dz.apigw.msgqueue.AMQPMsgRouter [pool-27-thread-1] New routes created.
2020-05-16 20:02:43,548 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> POST /payment/apigw
2020-05-16 20:02:43,550 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 20:02:43,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-type: application/json
2020-05-16 20:02:43,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 20:02:43,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept: */*
2020-05-16 20:02:43,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> cache-control: no-cache
2020-05-16 20:02:43,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> postman-token: 1389447f-648d-4bf9-953a-4bae2c889258
2020-05-16 20:02:43,551 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 20:02:43,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 20:02:43,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> connection: keep-alive
2020-05-16 20:02:43,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> content-length: 229
2020-05-16 20:02:43,552 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|>
2020-05-16 20:02:43,552 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 20:02:43,552 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] Ip Adress '127.0.0.1' is valid
2020-05-16 20:02:43,552 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 20:02:43,553 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 20:02:43,553 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] Looking for the header start with 'PGW'
2020-05-16 20:02:43,556 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] checking authentication for user 'pgw_fptplay'
2020-05-16 20:02:43,556 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] security context was null, so authorizating user
2020-05-16 20:02:43,557 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 20:02:43,557 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-1] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 20:02:43,560 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-1] authorizated user 'pgw_fptplay', setting security context
2020-05-16 20:02:43,562 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-1] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "21",
	"service": "charge"
}'
2020-05-16 20:02:43,571 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] Service from the request is 'charge'
2020-05-16 20:02:43,573 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-1] [doTelcoCharge] doing telco charging...
2020-05-16 20:02:43,585 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Starting to check request: 21
2020-05-16 20:02:43,586 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyParameter] Result: true
2020-05-16 20:02:43,586 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Starting to check request: 21
2020-05-16 20:02:43,587 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [verifyRequestCredentials] Result: true
2020-05-16 20:02:43,674 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [insertRequest][to DB] Result ID: 5ebfe473226bfb525de2e283
2020-05-16 20:02:43,676 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='21',price='0',evenTime='null',errorCode='0', dbId='5ebfe473226bfb525de2e283'}'}
2020-05-16 20:02:43,678 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] msgKeyword = null
2020-05-16 20:02:43,678 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-1] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 20:02:43,682 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-1] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='21',price='0',evenTime='null',errorCode='0', dbId='5ebfe473226bfb525de2e283'}'}
2020-05-16 20:02:43,682 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe473226bfb525de2e283] from db
2020-05-16 20:02:44,687 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe473226bfb525de2e283] from db
2020-05-16 20:02:45,692 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe473226bfb525de2e283] from db
2020-05-16 20:02:46,700 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] starting to select result of the request [5ebfe473226bfb525de2e283] from db
2020-05-16 20:02:46,702 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-1] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 20:02:46,706 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> {
2020-05-16 20:02:46,706 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 20:02:46,706 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 20:02:46,706 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 20:02:46,707 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 20:02:46,707 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 20:02:46,707 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 20:02:46,707 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"account": "dz",
2020-05-16 20:02:46,707 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"cmd": "register",
2020-05-16 20:02:46,708 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"trans_id": "21",
2020-05-16 20:02:46,708 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> 	"service": "charge"
2020-05-16 20:02:46,708 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|> }
2020-05-16 20:02:46,708 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< 200 OK
2020-05-16 20:02:46,708 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|<
2020-05-16 20:02:46,709 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-1] 127.0.0.1|< {"error_code":-1,"trans_id":"21"}
2020-05-16 20:03:09,251 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> POST /payment/apigw
2020-05-16 20:03:09,251 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 20:03:09,251 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-type: application/json
2020-05-16 20:03:09,251 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 20:03:09,251 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept: */*
2020-05-16 20:03:09,252 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> cache-control: no-cache
2020-05-16 20:03:09,252 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> postman-token: 5008826e-190a-4ef4-945e-8b9b2e10fef9
2020-05-16 20:03:09,252 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 20:03:09,252 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 20:03:09,252 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> connection: keep-alive
2020-05-16 20:03:09,252 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> content-length: 229
2020-05-16 20:03:09,253 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|>
2020-05-16 20:03:09,253 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 20:03:09,253 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] Ip Adress '127.0.0.1' is valid
2020-05-16 20:03:09,253 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 20:03:09,254 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 20:03:09,254 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] Looking for the header start with 'PGW'
2020-05-16 20:03:09,257 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] checking authentication for user 'pgw_fptplay'
2020-05-16 20:03:09,258 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] security context was null, so authorizating user
2020-05-16 20:03:09,258 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 20:03:09,259 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-2] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 20:03:09,263 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-2] authorizated user 'pgw_fptplay', setting security context
2020-05-16 20:03:09,265 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-2] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "22",
	"service": "charge"
}'
2020-05-16 20:03:09,269 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] Service from the request is 'charge'
2020-05-16 20:03:09,270 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-2] [doTelcoCharge] doing telco charging...
2020-05-16 20:03:09,270 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Starting to check request: 22
2020-05-16 20:03:09,271 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyParameter] Result: true
2020-05-16 20:03:09,271 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Starting to check request: 22
2020-05-16 20:03:09,271 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [verifyRequestCredentials] Result: true
2020-05-16 20:03:09,281 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [insertRequest][to DB] Result ID: 5ebfe48d226bfb525de2e284
2020-05-16 20:03:09,282 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='22',price='0',evenTime='null',errorCode='0', dbId='5ebfe48d226bfb525de2e284'}'}
2020-05-16 20:03:09,282 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] msgKeyword = null
2020-05-16 20:03:09,282 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-2] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 20:03:09,284 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-2] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='22',price='0',evenTime='null',errorCode='0', dbId='5ebfe48d226bfb525de2e284'}'}
2020-05-16 20:03:09,284 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfe48d226bfb525de2e284] from db
2020-05-16 20:03:09,318 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ebfe48d226bfb525de2e284'}'}
2020-05-16 20:03:09,326 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ebfe48d226bfb525de2e284]
2020-05-16 20:03:09,331 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ebfe48d226bfb525de2e284] Result: true
2020-05-16 20:03:10,295 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] starting to select result of the request [5ebfe48d226bfb525de2e284] from db
2020-05-16 20:03:10,303 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-2] [getResultOfProcess] Found result of the request [5ebfe48d226bfb525de2e284]
2020-05-16 20:03:10,307 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> {
2020-05-16 20:03:10,308 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 20:03:10,308 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 20:03:10,308 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 20:03:10,309 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 20:03:10,309 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 20:03:10,309 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 20:03:10,309 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"account": "dz",
2020-05-16 20:03:10,310 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"cmd": "register",
2020-05-16 20:03:10,310 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"trans_id": "22",
2020-05-16 20:03:10,310 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> 	"service": "charge"
2020-05-16 20:03:10,310 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|> }
2020-05-16 20:03:10,311 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< 200 OK
2020-05-16 20:03:10,311 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|<
2020-05-16 20:03:10,311 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-2] 127.0.0.1|< {"error_code":-1,"trans_id":"22"}
2020-05-16 20:05:45,961 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> POST /payment/apigw
2020-05-16 20:05:45,964 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 20:05:45,964 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-type: application/json
2020-05-16 20:05:45,968 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 20:05:45,968 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept: */*
2020-05-16 20:05:45,968 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> cache-control: no-cache
2020-05-16 20:05:45,968 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> postman-token: 479343f0-085c-4505-a40f-f4e4f8c07ff5
2020-05-16 20:05:45,968 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 20:05:45,968 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 20:05:45,968 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> connection: keep-alive
2020-05-16 20:05:45,968 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> content-length: 229
2020-05-16 20:05:45,969 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|>
2020-05-16 20:05:45,969 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 20:05:45,969 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] Ip Adress '127.0.0.1' is valid
2020-05-16 20:05:45,969 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 20:05:45,969 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 20:05:45,969 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] Looking for the header start with 'PGW'
2020-05-16 20:05:45,974 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] checking authentication for user 'pgw_fptplay'
2020-05-16 20:05:45,974 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] security context was null, so authorizating user
2020-05-16 20:05:45,974 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 20:05:45,974 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-4] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 20:05:45,977 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-4] authorizated user 'pgw_fptplay', setting security context
2020-05-16 20:05:45,982 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-4] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "23",
	"service": "charge"
}'
2020-05-16 20:05:45,985 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] Service from the request is 'charge'
2020-05-16 20:05:45,986 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-4] [doTelcoCharge] doing telco charging...
2020-05-16 20:05:45,986 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyParameter] Starting to check request: 23
2020-05-16 20:05:45,987 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyParameter] Result: true
2020-05-16 20:05:45,987 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Starting to check request: 23
2020-05-16 20:05:45,987 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [verifyRequestCredentials] Result: true
2020-05-16 20:05:45,994 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [insertRequest][to DB] Result ID: 5ebfe529226bfb525de2e285
2020-05-16 20:05:45,995 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-4] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='23',price='0',evenTime='null',errorCode='0', dbId='5ebfe529226bfb525de2e285'}'}
2020-05-16 20:05:45,996 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-4] msgKeyword = null
2020-05-16 20:05:45,996 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-4] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 20:05:45,998 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-4] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='23',price='0',evenTime='null',errorCode='0', dbId='5ebfe529226bfb525de2e285'}'}
2020-05-16 20:05:45,998 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebfe529226bfb525de2e285] from db
2020-05-16 20:05:47,005 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebfe529226bfb525de2e285] from db
2020-05-16 20:05:48,013 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebfe529226bfb525de2e285] from db
2020-05-16 20:05:49,017 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] starting to select result of the request [5ebfe529226bfb525de2e285] from db
2020-05-16 20:05:49,021 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-4] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 20:05:49,025 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> {
2020-05-16 20:05:49,025 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 20:05:49,025 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 20:05:49,026 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 20:05:49,026 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 20:05:49,026 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 20:05:49,026 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 20:05:49,026 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"account": "dz",
2020-05-16 20:05:49,026 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"cmd": "register",
2020-05-16 20:05:49,027 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"trans_id": "23",
2020-05-16 20:05:49,027 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> 	"service": "charge"
2020-05-16 20:05:49,027 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|> }
2020-05-16 20:05:49,027 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< 200 OK
2020-05-16 20:05:49,027 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|<
2020-05-16 20:05:49,027 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-4] 127.0.0.1|< {"error_code":-1,"trans_id":"23"}
2020-05-16 20:08:01,330 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> POST /payment/apigw
2020-05-16 20:08:01,338 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 20:08:01,338 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-type: application/json
2020-05-16 20:08:01,338 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 20:08:01,338 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept: */*
2020-05-16 20:08:01,339 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> cache-control: no-cache
2020-05-16 20:08:01,339 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> postman-token: 439718cc-8b18-4f5c-8ab6-de0b8348c0b0
2020-05-16 20:08:01,339 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 20:08:01,339 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 20:08:01,340 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> connection: keep-alive
2020-05-16 20:08:01,340 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> content-length: 229
2020-05-16 20:08:01,340 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|>
2020-05-16 20:08:01,340 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 20:08:01,341 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] Ip Adress '127.0.0.1' is valid
2020-05-16 20:08:01,341 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 20:08:01,341 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 20:08:01,342 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] Looking for the header start with 'PGW'
2020-05-16 20:08:01,351 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] checking authentication for user 'pgw_fptplay'
2020-05-16 20:08:01,351 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] security context was null, so authorizating user
2020-05-16 20:08:01,351 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 20:08:01,351 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-6] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 20:08:01,354 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-6] authorizated user 'pgw_fptplay', setting security context
2020-05-16 20:08:01,362 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-6] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "24",
	"service": "charge"
}'
2020-05-16 20:08:01,370 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] Service from the request is 'charge'
2020-05-16 20:08:01,371 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-6] [doTelcoCharge] doing telco charging...
2020-05-16 20:08:01,372 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyParameter] Starting to check request: 24
2020-05-16 20:08:01,373 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyParameter] Result: true
2020-05-16 20:08:01,373 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Starting to check request: 24
2020-05-16 20:08:01,373 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [verifyRequestCredentials] Result: true
2020-05-16 20:08:01,389 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [insertRequest][to DB] Result ID: 5ebfe5b1226bfb525de2e286
2020-05-16 20:08:01,389 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-6] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='24',price='0',evenTime='null',errorCode='0', dbId='5ebfe5b1226bfb525de2e286'}'}
2020-05-16 20:08:01,390 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] msgKeyword = null
2020-05-16 20:08:01,390 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-6] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 20:08:01,392 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-6] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='24',price='0',evenTime='null',errorCode='0', dbId='5ebfe5b1226bfb525de2e286'}'}
2020-05-16 20:08:01,393 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5ebfe5b1226bfb525de2e286] from db
2020-05-16 20:08:01,447 INFO com.dz.apigw.msgqueue.AMQPConsumer [SimpleAsyncTaskExecutor-1] msg: Notification {notificationType='TELCO_CHARGE_RESPONSE', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_RESPONSE', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='null', telco='null', service='null', service_code='null', service_id='null', package_code='null', msisdn='null', account='null',cmd='null',trans_id='null',price='0',evenTime='null',errorCode='-1', dbId='5ebfe5b1226bfb525de2e286'}'}
2020-05-16 20:08:01,455 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest] Found row Id [5ebfe5b1226bfb525de2e286]
2020-05-16 20:08:01,469 INFO com.dz.apigw.services.TelcoChargingServiceImpl [SimpleAsyncTaskExecutor-1] [updateRequest][to DB] [Id: 5ebfe5b1226bfb525de2e286] Result: true
2020-05-16 20:08:02,406 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] starting to select result of the request [5ebfe5b1226bfb525de2e286] from db
2020-05-16 20:08:02,410 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-6] [getResultOfProcess] Found result of the request [5ebfe5b1226bfb525de2e286]
2020-05-16 20:08:02,417 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> {
2020-05-16 20:08:02,418 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 20:08:02,418 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 20:08:02,418 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 20:08:02,418 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 20:08:02,419 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 20:08:02,419 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 20:08:02,419 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"account": "dz",
2020-05-16 20:08:02,419 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"cmd": "register",
2020-05-16 20:08:02,419 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"trans_id": "24",
2020-05-16 20:08:02,420 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> 	"service": "charge"
2020-05-16 20:08:02,420 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|> }
2020-05-16 20:08:02,420 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< 200 OK
2020-05-16 20:08:02,420 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|<
2020-05-16 20:08:02,420 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-6] 127.0.0.1|< {"error_code":-1,"trans_id":"24"}
2020-05-16 20:09:57,878 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> POST /payment/apigw
2020-05-16 20:09:57,881 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> authorization: PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ
2020-05-16 20:09:57,882 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> content-type: application/json
2020-05-16 20:09:57,882 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> user-agent: PostmanRuntime/7.24.1
2020-05-16 20:09:57,882 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> accept: */*
2020-05-16 20:09:57,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> cache-control: no-cache
2020-05-16 20:09:57,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> postman-token: 6fcf466f-ae95-4dcf-bdec-53382e9c2223
2020-05-16 20:09:57,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> host: 127.0.0.1:8881
2020-05-16 20:09:57,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> accept-encoding: gzip, deflate, br
2020-05-16 20:09:57,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> connection: keep-alive
2020-05-16 20:09:57,883 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> content-length: 229
2020-05-16 20:09:57,884 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|>
2020-05-16 20:09:57,884 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] Checking Remote Ip Adress '127.0.0.1' for the request
2020-05-16 20:09:57,884 TRACE com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] Ip Adress '127.0.0.1' is valid
2020-05-16 20:09:57,885 TRACE com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] Processing authentication for 'http://127.0.0.1:8881/payment/apigw' ...
2020-05-16 20:09:57,886 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] The request header is 'PGW eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwZ3dfZnB0cGxheSIsImV4cCI6MTU5MDQwMDEzOCwiaWF0IjoxNTg5NTM2MTM4fQ.CXIMtxBVc4s4R9zUeLg80EVjfLucmrfLgBQ4nFc_1_LMuVt9Y77nt7IV_Cf5DM2O06BP67Bcq_uTCwqol8ZxGQ'
2020-05-16 20:09:57,886 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] Looking for the header start with 'PGW'
2020-05-16 20:09:57,898 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] checking authentication for user 'pgw_fptplay'
2020-05-16 20:09:57,898 DEBUG com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] security context was null, so authorizating user
2020-05-16 20:09:57,898 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-8] [JwtUserDetailsService] load info of user 'pgw_fptplay'
2020-05-16 20:09:57,899 INFO com.dz.apigw.security.JwtUserDetailsService [http-nio-8881-exec-8] [loadUserByUsername] Found user with username 'pgw_fptplay'
2020-05-16 20:09:57,901 INFO com.dz.apigw.security.JwtAuthorizationTokenFilter [http-nio-8881-exec-8] authorizated user 'pgw_fptplay', setting security context
2020-05-16 20:09:57,912 TRACE com.dz.apigw.controllers.APIGWMainController [http-nio-8881-exec-8] Remote request body is '{
	"telco": "vinaphone",
	"cp_code": "001",
	"service_code": "FPTPLAY",
	"service_id": "FPTPLAYID",
	"package_code": "VIP",
	"msisdn": "84982051117",
	"account": "dz",
	"cmd": "register",
	"trans_id": "25",
	"service": "charge"
}'
2020-05-16 20:09:57,917 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-8] Service from the request is 'charge'
2020-05-16 20:09:57,918 TRACE com.dz.apigw.services.APIGWMainServiceImpl [http-nio-8881-exec-8] [doTelcoCharge] doing telco charging...
2020-05-16 20:09:57,919 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-8] [verifyParameter] Starting to check request: 25
2020-05-16 20:09:57,919 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-8] [verifyParameter] Result: true
2020-05-16 20:09:57,919 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-8] [verifyRequestCredentials] Starting to check request: 25
2020-05-16 20:09:57,919 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-8] [verifyRequestCredentials] Result: true
2020-05-16 20:09:57,928 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-8] [insertRequest][to DB] Result ID: 5ebfe625226bfb525de2e287
2020-05-16 20:09:57,928 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-8] Send msg = Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='null', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='25',price='0',evenTime='null',errorCode='0', dbId='5ebfe625226bfb525de2e287'}'}
2020-05-16 20:09:57,928 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-8] msgKeyword = null
2020-05-16 20:09:57,929 TRACE com.dz.apigw.msgqueue.AMQPMsgRouter [http-nio-8881-exec-8] Destination found: name = PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE, keyword = null
2020-05-16 20:09:57,935 INFO com.dz.apigw.msgqueue.AMQPProducer [http-nio-8881-exec-8] Msg sent to queue[queue:'PAYMENTGW.TELCO.CHARGING.REQUEST.VINAPHONE']= Notification {notificationType='TELCO_CHARGE_REQUEST', destinationQueueName='PAYMENTGW.APIGW.FPTPLAY', msg='MSG {msgType='TELCOCHARGE_REQUEST', keyword='null', status_process='0', msgRxTime='null', msgRtTime='null', cp_code='001', telco='vinaphone', service='charge', service_code='FPTPLAY', service_id='FPTPLAYID', package_code='VIP', msisdn='0982051117', account='null',cmd='register',trans_id='25',price='0',evenTime='null',errorCode='0', dbId='5ebfe625226bfb525de2e287'}'}
2020-05-16 20:09:57,936 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-8] [getResultOfProcess] starting to select result of the request [5ebfe625226bfb525de2e287] from db
2020-05-16 20:09:58,946 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-8] [getResultOfProcess] starting to select result of the request [5ebfe625226bfb525de2e287] from db
2020-05-16 20:09:59,961 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-8] [getResultOfProcess] starting to select result of the request [5ebfe625226bfb525de2e287] from db
2020-05-16 20:10:00,975 INFO com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-8] [getResultOfProcess] starting to select result of the request [5ebfe625226bfb525de2e287] from db
2020-05-16 20:10:00,976 WARN com.dz.apigw.services.TelcoChargingServiceImpl [http-nio-8881-exec-8] [getResultOfProcess] the progress of the request is timeout -> return timeout error code to client
2020-05-16 20:10:00,980 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> {
2020-05-16 20:10:00,980 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> 	"telco": "vinaphone",
2020-05-16 20:10:00,980 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> 	"cp_code": "001",
2020-05-16 20:10:00,981 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> 	"service_code": "FPTPLAY",
2020-05-16 20:10:00,981 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> 	"service_id": "FPTPLAYID",
2020-05-16 20:10:00,981 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> 	"package_code": "VIP",
2020-05-16 20:10:00,981 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> 	"msisdn": "84982051117",
2020-05-16 20:10:00,981 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> 	"account": "dz",
2020-05-16 20:10:00,982 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> 	"cmd": "register",
2020-05-16 20:10:00,982 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> 	"trans_id": "25",
2020-05-16 20:10:00,982 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> 	"service": "charge"
2020-05-16 20:10:00,982 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|> }
2020-05-16 20:10:00,982 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|< 200 OK
2020-05-16 20:10:00,982 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|<
2020-05-16 20:10:00,982 INFO com.dz.apigw.security.AuthorizationIPAddressFilter [http-nio-8881-exec-8] 127.0.0.1|< {"error_code":-1,"trans_id":"25"}
